<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexoè‡ªå®šä¹‰404é¡µé¢</title>
    <url>/en/2023/07/04/Hexo%E8%87%AA%E5%AE%9A%E4%B9%89404%E9%A1%B5%E9%9D%A2/</url>
    <content><![CDATA[<h1 id="è‡ªå®šä¹‰-404-é¡µé¢"><a href="#è‡ªå®šä¹‰-404-é¡µé¢" class="headerlink" title="è‡ªå®šä¹‰ 404 é¡µé¢"></a>è‡ªå®šä¹‰ 404 é¡µé¢</h1><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>404</code> çš„ post</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">hexo new <span class="number">404</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å¯¹åº”çš„ md æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ 404 é¡µé¢ã€‚ç”±äº Hexo æ¡†æ¶çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ JS è„šæœ¬ï¼Œè®©é¡µé¢åŠ¨èµ·æ¥ã€‚</p>
<p>è¿™é‡Œç»™å‡º<a href="/404" target="_blank">æˆ‘çš„ 404 é¡µé¢</a>ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢æœ‰ä¸€ä¸ªå€’è®¡æ—¶ã€‚å½“å€’è®¡æ—¶ä¸º 0 æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µã€‚å½“ç„¶ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç‚¹å‡»ï¼Œä»è€Œè¿”å›é¦–é¡µã€‚</p>
<p>ä¸‹é¢æ˜¯å¯¹åº”çš„ä»£ç ï¼Œç›´æ¥æ”¾åœ¨ md æ–‡ä»¶ä¸­å³å¯ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./../js/jquery-3.3.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>æ‚¨æ­£åœ¨è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„åœ°å€ğŸ¤”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>ç³»ç»Ÿä¼šåœ¨ <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;seconds&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">span</span>&gt;</span> ç§’åè‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µ,<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span> æ‚¨ä¹Ÿå¯ä»¥ç‚¹æ­¤ <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_self&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span> &gt;</span>é“¾æ¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span>, æ‰‹åŠ¨è·³è½¬!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> seconds = $(<span class="string">&quot;#seconds&quot;</span>).<span class="title function_">text</span>();</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#seconds&quot;</span>).<span class="title function_">text</span>(--seconds);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (seconds == <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                location.<span class="property">href</span> = <span class="string">&quot;/&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘é€‰æ‹©å°† jQuery ä»£ç æ”¾åœ¨æœ¬åœ°ï¼Œè¿™æ ·é¡µé¢å“åº”æ›´å¿«ã€‚</p>
<p>jQuery åœ¨è¿™é‡Œåªæ˜¯ç”¨äºè·å– DOM å¯¹è±¡ï¼Œå› æ­¤ä¹Ÿå®Œå…¨å¯ä»¥ç”¨åŸç”Ÿ JS å‡½æ•°æ¥å†™ã€‚</p>
<h1 id="å¦‚ä½•è®©ç½‘ç«™è·³è½¬åˆ°è‡ªå®šä¹‰é¡µé¢ï¼Ÿ"><a href="#å¦‚ä½•è®©ç½‘ç«™è·³è½¬åˆ°è‡ªå®šä¹‰é¡µé¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•è®©ç½‘ç«™è·³è½¬åˆ°è‡ªå®šä¹‰é¡µé¢ï¼Ÿ"></a>å¦‚ä½•è®©ç½‘ç«™è·³è½¬åˆ°è‡ªå®šä¹‰é¡µé¢ï¼Ÿ</h1><span id="more"></span>

<p>æ³¨æ„ï¼šä»¥ä¸‹æ–¹æ³•ä»…é™äº Github Pagesï¼Œå…¶ä»–å¹³å°çš„æ–¹å¼å¯èƒ½ä¸åŒã€‚</p>
<p>åœ¨<code>front-matter</code>ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼ŒGithub Pages å°±èƒ½è®¾ç½®è¯¥é¡µé¢ä¸º 404 é¡µé¢</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">/404.html</span></span><br></pre></td></tr></table></figure>

<p>ä¸å¦¨éšæœºè®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„ç½‘é¡µï¼Ÿçœ‹çœ‹æ•ˆæœå¦‚ä½•ï¼šâ–¶ <a href="/hsfh/40u235u/jasdlafn" target="_blank">ç‚¹æˆ‘</a></p>
<h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><p><a href="https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-custom-404-page-for-your-github-pages-site">Creating a custom 404 page for your GitHub Pages site</a></p>
<p><a href="https://theme-next.js.org/docs/theme-settings/custom-pages.html#Custom-404-Page">theme-next: custom-pages</a></p>
]]></content>
      <categories>
        <category>softwares</category>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Azure Pipelines æ¶æ„è§£æ</title>
    <url>/en/2023/10/06/Azure-Pipelines-%E6%9E%B6%E6%9E%84%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>Azure Pipelines æ˜¯ Azure DevOpsï¼ˆSaaS å¹³å°ï¼‰çš„ä¸€ä¸ªç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ– CI&#x2F;CD çš„â€œæµæ°´çº¿â€ã€‚ç±»ä¼¼çš„æŠ€æœ¯æœ‰<a href="https://github.com/features/actions">GitHub Actions</a> å’Œ <a href="https://www.jenkins.io/">Jenkins</a>ã€‚</p>
<p>ä½œä¸ºä½¿ç”¨è€…ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ YAML ä¸­å®šä¹‰å„ä¸ªä»»åŠ¡ï¼Œè§¦å‘ Pipelineï¼ŒAzure Pipelines å°±èƒ½å¸®æˆ‘ä»¬è‡ªåŠ¨æ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚</p>
<p>é‚£ä¹ˆï¼Œä»»åŠ¡æ˜¯æ€ä¹ˆè¢«æ‰§è¡Œçš„å‘¢ï¼Ÿæ˜¯å¦å­˜åœ¨å¹¶è¡Œä»»åŠ¡ä¸Šé™ï¼Ÿæˆ‘ä»¬æ€æ ·è®¾è®¡æ›´é«˜æ•ˆåœ°å®šä¹‰ YAMLï¼Œä»è€Œè®©ä¸€æ¬¡ Pipeline æ›´å¿«åœ°è·‘å®Œå‘¢ï¼Ÿâ€”â€” æœ¬æ–‡å°†ä»ä»»åŠ¡è°ƒåº¦çš„è§’åº¦ï¼Œè§£æ Azure Pipelines çš„æ¶æ„ã€‚åœ¨æ¢è®¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸Šè¿°é—®é¢˜è‡ªç„¶èƒ½å¾—åˆ°è§£ç­”ã€‚</p>
<span id="more"></span>

<h1 id="Azure-Pipelines-æœ¯è¯­"><a href="#Azure-Pipelines-æœ¯è¯­" class="headerlink" title="Azure Pipelines æœ¯è¯­"></a>Azure Pipelines æœ¯è¯­</h1><p><img src="/en/MarkDownImages/key-pipeline-concepts-overview-ca80c85c.png" alt="img"></p>
<p><strong>å¯¹äº Azure Pipelines çš„ä½¿ç”¨è€…</strong>ï¼Œä¸€ä¸ª YAML æ–‡ä»¶å”¯ä¸€å®šä¹‰äº†ä¸€æ¡ Pipeline çš„è¿è¡Œé€»è¾‘ï¼š</p>
<ul>
<li>ä¸€æ¡ Pipeline å¯ä»¥åŒ…å«å¤šä¸ª Stage</li>
<li>ä¸€ä¸ª Stage å¯ä»¥åŒ…å«å¤šä¸ª Job</li>
<li>ä¸€ä¸ª Job å¯ä»¥åŒ…å«å¤šä¸ª Step</li>
<li>ä¸€ä¸ª Step å¯ä»¥åŒ…å«å¤šä¸ª task</li>
</ul>
<p><strong>å¯¹äº Azure Pipelines æœ¬èº«</strong>ï¼Œå½“ä¸€æ¡ Pipeline è¢«è§¦å‘ï¼Œå®ƒéœ€è¦è°ƒç”¨è®¡ç®—èµ„æºï¼Œå»æ‰§è¡Œ Pipeline çš„é€»è¾‘ã€‚å…·ä½“æ¥è¯´ï¼Œä¼šæœ‰ä¸€å°æœºå™¨ï¼ˆagentï¼‰è´Ÿè´£æ‰§è¡Œä¸€ä¸ª jobã€‚</p>
<p>ä¸€ä¸ª job åªä¼šåœ¨ä¸€å° agent ä¸Šè·‘ï¼Œå®ƒä¸ä¼šè¢«è¿›ä¸€æ­¥åœ°æ‹†åˆ†ã€‚è€Œä¸€æ¡ Pipeline çš„æ‰€æœ‰ job å¯èƒ½ä¼šåˆ†é…ç»™ä¸åŒçš„ agent å»æ‰§è¡Œã€‚</p>
<p>è¿™ç§åˆ†é…æ˜¯å¦‚ä½•å®Œæˆçš„å‘¢ï¼Ÿ</p>
<h1 id="Azure-Pipelines-ä»»åŠ¡è°ƒåº¦"><a href="#Azure-Pipelines-ä»»åŠ¡è°ƒåº¦" class="headerlink" title="Azure Pipelines ä»»åŠ¡è°ƒåº¦"></a>Azure Pipelines ä»»åŠ¡è°ƒåº¦</h1><p>Azure Pipelines çš„ä»»åŠ¡è°ƒåº¦æ˜¯ä¸€ç§å…¸å‹çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦æ¨¡å‹ï¼ˆç±»ä¼¼çš„æŠ€æœ¯æœ‰<a href="http://www.quartz-scheduler.org/">QUARTZ</a> å’Œ <a href="https://github.com/xuxueli/xxl-job">xxl-job</a>ï¼‰ï¼š</p>
<ul>
<li>Azure Pipelines ä¸Šæœ‰ä¸€ä¸ª<strong>ã€ä»»åŠ¡é˜Ÿåˆ—ã€</strong>ï¼Œé‡Œé¢å­˜æ”¾ç€æ‰€æœ‰å¾…è¿è¡Œçš„ <u>job</u>ï¼ˆæ—¢æŒ‡ä»»åŠ¡è°ƒåº¦æ¨¡å‹ä¸­çš„ Job&#x2F;Taskï¼ŒåˆæŒ‡ Pipeline ä¸­çš„ job æœ¯è¯­ï¼‰</li>
<li>Agent æ˜¯ Workerï¼Œå®ƒä¼šå®šæ—¶åœ°æŸ¥çœ‹<strong>ã€ä»»åŠ¡é˜Ÿåˆ—ã€</strong>ä¸­æ˜¯å¦æœ‰ job è¦è¿è¡Œã€‚å¦‚æœæœ‰ï¼Œåˆ™æŸä¸€å° Agent ä¼šç«äº‰è·å¾—æ‰§è¡Œè¯¥ Job çš„æƒåˆ©ï¼ŒåŒæ—¶è·å¾—è®¿é—®ç›¸åº”èµ„æºçš„æƒé™ã€‚æ­¤æ—¶ï¼Œå®ƒå°±å¯ä»¥å¼€å§‹æ‰§è¡Œè¿™ä¸ª job äº†ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œä¸€æ¡ Pipeline æ˜¯è¿™æ ·æ‰§è¡Œçš„ï¼š</p>
<ol>
<li>è§¦å‘ Pipelineã€‚Azure Pipelines è§£æ YAMLï¼Œæ‹†åˆ†ä¸ºå¤šä¸ª Jobï¼Œå­˜å…¥ã€ä»»åŠ¡é˜Ÿåˆ—ã€ä¸­ã€‚</li>
<li>å‡å¦‚æ­¤æ—¶æœ‰ç©ºé—²çš„ Agentï¼Œè¯´æ˜ã€ä»»åŠ¡é˜Ÿåˆ—ã€æ­¤æ—¶ä¸ºç©ºã€‚é‚£ä¹ˆï¼Œå®ƒç›‘å¬åˆ°äº†ä»»åŠ¡é˜Ÿåˆ—ä¸­åŠ å…¥æ–° job åï¼Œå¼€å§‹ä¸å…¶ä»– Agentï¼ˆå‡å¦‚æœ‰çš„è¯ï¼‰ç«äº‰æ‰§è¡Œè¯¥ jobã€‚<ul>
<li>ç«äº‰æˆåŠŸï¼Œå¼€å§‹æ‰§è¡Œï¼›</li>
<li>ç«äº‰å¤±è´¥ï¼Œç»§ç»­ç›‘å¬ï¼›</li>
</ul>
</li>
<li>å‡å¦‚æ­¤æ—¶æ²¡æœ‰ç©ºé—²çš„ Agentï¼Œåˆ™è¯´æ˜ã€ä»»åŠ¡é˜Ÿåˆ—ã€ä¹‹å‰å·²ç»æœ‰ job äº†ï¼Œæˆ–è€…æ²¡æœ‰ Agent è·‘å®Œè‡ªå·±ä¹‹å‰é¢†å–çš„ jobã€‚é‚£ä¹ˆè¿™äº›æ–°äº§ç”Ÿçš„ job å°±ä¼šæœ‰åºåœ°ç­‰å¾… Agent æ¥æ‰§è¡Œã€‚ï¼ˆjob æŒ‰ç…§ Pipeline è§¦å‘çš„æ—¶é—´æ¥æ’é˜Ÿç­‰å¾…ï¼Œå› æ­¤æ˜¯å…¬å¹³çš„ï¼‰</li>
</ol>
<h1 id="Parallel-Jobs"><a href="#Parallel-Jobs" class="headerlink" title="Parallel Jobs"></a>Parallel Jobs</h1><p>ä»»åŠ¡è°ƒåº¦æ¡†æ¶æ„å‘³ç€<strong>å¹¶è¡Œï¼ˆparallelï¼‰</strong>ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰ YAML æ—¶ï¼Œ<strong>åº”è¯¥å°†æ²¡æœ‰ä¾èµ–çš„ Steps æˆ– Tasks æå‡ä¸º Jobsï¼Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿå¹¶è¡Œæ‰§è¡Œï¼Œç¼©çŸ­è¿è¡Œæ—¶é—´</strong>ã€‚</p>
<blockquote>
<p>åœ¨å®ä¹ è¿‡ç¨‹ä¸­ï¼Œå´é²œæœ‰äººè¿™æ ·åšï¼Œå¤§å®¶éƒ½ç”¨ç€é»˜è®¤çš„ Steps çº§åˆ«ï¼Œå³ä½¿å¤§éƒ¨åˆ† Agents ç»å¸¸æ˜¯ç©ºé—²çš„ã€‚ğŸ¤”</p>
</blockquote>
<p>é‚£ä¹ˆï¼Œæ—¢ç„¶ä¸€ä¸ªæ–° job èƒ½å¦ç«‹åˆ»æ‰§è¡Œå–å†³äºç©ºé—² Agent çš„å­˜åœ¨ï¼Œå¢åŠ  Agent çš„æ•°é‡æ˜¯å¦å°±èƒ½æé«˜æ•´ä½“çš„ååé‡ï¼ˆå•ä½æ—¶é—´å†…æ‰§è¡Œå®Œæˆçš„ job æ•°é‡ï¼‰å‘¢ï¼Ÿâ€”â€” å¾ˆé—æ†¾ï¼Œå¹¶ä¸æ˜¯ã€‚</p>
<p>å¾®è½¯æ¯•ç«Ÿè¦é  Azure ç›ˆåˆ©çš„ï¼Œä»–ä»¬åˆæå‡ºäº† ã€Parallel Jobsã€è¿™ä¸ªæ¦‚å¿µï¼Œè¡¨ç¤ºèƒ½å¹¶è¡Œæ‰§è¡Œçš„ job ä¸Šé™ã€‚è¿™ä¸ªé‡æ˜¯éœ€è¦è´­ä¹°çš„ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³å¹¶è¡Œè·‘ jobï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦è´­ä¹° Azure VM agentsï¼Œè¿˜éœ€è¦è´­ä¹° Parallel Jobsã€‚å³ä½¿æˆ‘ä»¬è‡ªå·±æœ‰å¾ˆå¤šå°æœºå™¨ï¼Œä¹Ÿè¿˜æ˜¯éœ€è¦è´­ä¹° Parallel Jobsã€‚</p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul>
<li><a href="https://learn.microsoft.com/en-us/training/modules/explore-azure-pipelines/3-describe-azure-pipelines">Describe Azure Pipelines</a></li>
<li><a href="https://learn.microsoft.com/en-us/training/modules/explore-azure-pipelines/4-understand-key-terms">Understand Azure Pipelines key terms</a></li>
<li><a href="https://learn.microsoft.com/en-us/training/modules/manage-azure-pipeline-agents-pools/7-communicate-with-azure-pipelines">Communicate with Azure Pipelines</a></li>
<li><a href="https://azure.microsoft.com/en-us/products/devops/pipelines#overview">Azure Pipelines äº§å“ä»‹ç»</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/agents">Azure Pipelines agents</a></li>
</ul>
]]></content>
      <categories>
        <category>tech</category>
        <category>Azure</category>
      </categories>
      <tags>
        <tag>Azure</tag>
        <tag>Azure Pipelines</tag>
        <tag>æ¶æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown æ’å…¥å›¾ç‰‡æ—¶è‡ªåŠ¨æ‹·è´â€”â€”ä»¥ Typora å’Œ  VS Code ä¸ºä¾‹</title>
    <url>/en/2023/07/22/Markdown-%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%E6%97%B6%E8%87%AA%E5%8A%A8%E6%8B%B7%E8%B4%9D%E2%80%94%E2%80%94%E4%BB%A5-Typora-%E5%92%8C-VS-Code-%E4%B8%BA%E4%BE%8B/</url>
    <content><![CDATA[<h1 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h1><p>éšç€ Markdown çš„æ™®åŠï¼Œä½¿ç”¨ä¼ ç»Ÿæ–‡æœ¬ç¼–è¾‘å™¨å†™ä½œçš„æ•ˆç‡æ˜¾å¾—ä½ä¸‹ï¼Œå°¤å…¶è¡¨ç°åœ¨ä¸€äº›å¤æ‚è¯­æ³•ï¼Œæ¯”å¦‚æ’å…¥è¡¨æ ¼ï¼Œæˆ–è€…æ’å…¥å›¾ç‰‡ã€‚</p>
<p>Typora ä½œä¸ºä¸šç•ŒçŸ¥åçš„ Markdown ç¼–è¾‘å™¨ï¼Œé™¤äº†è‘—åçš„ã€å³æ—¶æ¸²æŸ“ã€ï¼Œä¹Ÿæ‹¥æœ‰å¾ˆå¤šæ–¹ä¾¿ä¹¦å†™ Markdown çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ’å…¥å›¾ç‰‡æ—¶çš„è‡ªåŠ¨ä¿å­˜ï¼šå¾€ä¸€ä¸ª Markdown æ–‡ä»¶ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰ä¸­ç²˜è´´ä¸€å¼ å›¾ç‰‡ï¼Œè¯¥å›¾ç‰‡ä¾¿ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ï¼Œå¹¶ä¸”è‡ªåŠ¨åœ¨ Markdown ä¸­å»ºç«‹å¥½å¼•ç”¨ã€‚</p>
<p>å¯¹äºç»å¸¸ç”¨ Markdown è®°ç¬”è®°çš„æˆ‘æ¥è¯´ï¼Œ<strong>è¿™ä¸€åŠŸèƒ½åº”è¯¥æˆä¸ºä¸šç•Œçš„æ ‡å‡†</strong>ã€‚ä½†æ˜¯ï¼Œå¦ä¸€æ¬¾å¸¸ç”¨çš„ç¼–è¾‘å™¨ â€”â€” VS Code â€”â€” å¯¹è¿™ä¸€åŠŸèƒ½çš„æ”¯æŒå¹¶ä¸å¥½ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸åº”è¯¥è‹›æ±‚è¿™æ ·ä¸€æ¬¾å…è´¹ã€é€šç”¨çš„ç¼–è¾‘å™¨èƒ½å¤Ÿé¢é¢ä¿±åˆ°ã€‚</p>
<h1 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h1><p>å¯¹äºç»å¸¸è®°ç¬”è®°çš„ç”¨æˆ·ï¼Œæˆªå›¾å¹¶æ’å…¥ Markdown æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ã€‚åœ¨è¿™ä¸€æ“ä½œçš„èƒŒåï¼Œæœ‰ä¸¤ä¸ªæ–¹é¢å…³ä¹ç€ç”¨æˆ·ä½“éªŒï¼š1ï¸âƒ£ æˆªå›¾å·¥å…· 2ï¸âƒ£Markdown ç¼–è¾‘å™¨ã€‚</p>
<p>åœ¨æˆªå›¾å·¥å…·ä¸€è‡´çš„æƒ…å†µä¸‹ï¼ŒMarkdown ç¼–è¾‘å™¨æ˜¯å†³å®šç”¨æˆ·ä½“éªŒçš„å…³é”®å› ç´ ã€‚ä¸‹é¢æˆ‘å°†å±•å¼€ä»‹ç» 3 ç§ç¼–è¾‘å™¨æ˜¯å¦‚ä½•æ’å…¥å›¾ç‰‡çš„ã€‚</p>
<span id="more"></span>


<h1 id="ä¼ ç»Ÿæ–‡æœ¬ç¼–è¾‘å™¨"><a href="#ä¼ ç»Ÿæ–‡æœ¬ç¼–è¾‘å™¨" class="headerlink" title="ä¼ ç»Ÿæ–‡æœ¬ç¼–è¾‘å™¨"></a>ä¼ ç»Ÿæ–‡æœ¬ç¼–è¾‘å™¨</h1><p>è¿™ç§ç¼–è¾‘å™¨é€šå¸¸åªæ˜¯æ”¯æŒ Markdown è¯­æ³•é«˜äº®çš„â€œè®°äº‹æœ¬â€ï¼Œæ¯”å¦‚ vimï¼Œsublime ç­‰ã€‚</p>
<p>å½“æˆ‘ä»¬æˆªå›¾å®Œæ¯•åï¼Œéœ€è¦å…ˆå°†å›¾ç‰‡å­˜å‚¨åˆ°æœ¬åœ°ï¼Œå†ä½¿ç”¨ Markdown è¯­æ³•æ‰‹åŠ¨å¼•ç”¨è¯¥å›¾ç‰‡çš„è·¯å¾„ï¼š</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">alt text</span>](<span class="link">image.jpg</span>)</span><br></pre></td></tr></table></figure>

<p>å‡ºäºæ–¹ä¾¿ï¼Œæˆªå›¾è½¯ä»¶å¾€å¾€ä¼šå°†å›¾ç‰‡éƒ½å­˜å‚¨åˆ°ç‰¹å®šè·¯å¾„ä¸‹ã€‚ä¸ºäº†å•ç‹¬å­˜æ”¾æ¯ä¸ª Markdown æ–‡ä»¶ç›¸å…³çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‰‹åŠ¨åœ°å‰ªåˆ‡å›¾ç‰‡çš„ä½ç½®ã€‚å¾ˆéº»çƒ¦ï¼</p>
<h1 id="Typora"><a href="#Typora" class="headerlink" title="Typora"></a>Typora</h1><h2 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h2><p>Typora ä¸ºæ’å…¥å›¾ç‰‡æä¾›äº†å¤šç§åŠŸèƒ½ï¼Œæˆ‘æœ€å¸¸ç”¨çš„æ˜¯ã€å¤åˆ¶å›¾ç‰‡åˆ°æŒ‡å®šè·¯å¾„ã€ã€‚</p>
<p>è¿™é‡Œçš„ã€æ’å…¥å›¾ç‰‡ã€ï¼Œæ˜¯æŒ‡é¼ æ ‡æ‹–åŠ¨å›¾ç‰‡åˆ° Typora ä¸­ï¼Œæˆ–è€…ä»å‰ªè´´æ¿ï¼ˆ<code>win + v</code>ï¼‰ä¸­ç²˜è´´</p>
<img src="/MarkDownImages/image-20230722141038783.png" alt="image-20230722141038783" style="zoom:50%;" />

<p>æˆ‘é€‰æ‹©ä¿å­˜åˆ°ä¸å½“å‰ Markdown æ–‡ä»¶åŒç›®å½•ä¸‹çš„<code>MarkDownImages</code>æ–‡ä»¶å¤¹ä¸‹ï¼ˆæ²¡æœ‰ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰ã€‚å½“ç„¶ï¼Œæ›´å¥½çš„åšæ³•åº”è¯¥æ˜¯é€‰æ‹©ã€å¤åˆ¶å›¾ç‰‡åˆ° <code>./$&#123;filename&#125;.assets</code> æ–‡ä»¶å¤¹ã€ï¼Œè¿™æ ·æ–¹ä¾¿ Markdown æ–‡ä»¶çš„è¿ç§»</p>
<img src="/MarkDownImages/image-20230722141359394.png" alt="image-20230722141359394" style="zoom:50%;" />

<p>ã€å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™ã€ï¼šå½“æˆ‘ä»¬å¤åˆ¶äº†ä¸€ä¸ªç½‘ç»œå›¾ç‰‡ï¼ˆçš„ url ï¼‰ ï¼ŒTypora ä¼šè‡ªåŠ¨ä¸‹è½½å›¾ç‰‡åˆ°æŒ‡å®šè·¯å¾„ï¼Œå¹¶å°† url å˜ä¸ºæœ¬åœ°æ–‡ä»¶å¼•ç”¨ â€”â€” ç½‘ç»œä¸Šçš„å›¾ç‰‡å¯èƒ½éšæ—¶æ¶ˆå¤±ï¼Œæœ¬åœ°å­˜å‚¨æ›´å¯é ã€‚</p>
<h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><p>æˆªå›¾åï¼Œåœ¨ Typora ä¸­æŒ‰ä¸‹ <code>Ctrl + v</code>ï¼Œåˆ™å‰ªè´´æ¿ä¸­çš„å›¾ç‰‡ä¼šè‡ªåŠ¨æ‹·è´åˆ°<code>MarkDownImages</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä¸”<strong>æ–‡ä»¶ååŸºäºæ—¶é—´æˆ³</strong>ï¼Œä¸å®¹æ˜“é‡å¤</p>
<hr>
<img src="/MarkDownImages/image-20230722142231405.png" alt="image-20230722142231405" style="zoom:67%;" />

<hr>
<img src="/MarkDownImages/image-20230722142307844.png" alt="image-20230722142307844" style="zoom:67%;" />

<hr>
<img src="/MarkDownImages/image-20230722142326387.png" alt="image-20230722142326387" style="zoom:67%;" />

<hr>
<p>å¯ä»¥çœ‹å‡ºï¼Œè¿™ç§æ’å…¥å›¾ç‰‡çš„æ–¹å¼éå¸¸ä¼˜é›…ã€ä¾¿æ·</p>
<h1 id="VS-Code"><a href="#VS-Code" class="headerlink" title="VS Code"></a>VS Code</h1><h2 id="è®¾ç½®-1"><a href="#è®¾ç½®-1" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h2><p>VS Code åº”è¯¥æ˜¯åœ¨æœ€è¿‘æ‰åŠ å…¥ç±»ä¼¼ Typora çš„åŠŸèƒ½ï¼Œä¸è¿‡åªæä¾›äº†ã€å¤åˆ¶å›¾ç‰‡åˆ°æŒ‡å®šè·¯å¾„ã€çš„é€‰é¡¹ã€‚</p>
<p>æˆ‘è¿™é‡Œçš„é…ç½®æ˜¯æ’å…¥ä»»æ„æ–‡ä»¶ï¼ˆ<code>**/*</code>ï¼‰æ—¶ï¼Œå°†å®ƒå¤åˆ¶åˆ°ä¸å½“å‰ Markdown æ–‡ä»¶åŒç›®å½•ä¸‹çš„ <code>MarkDownImages</code> æ–‡ä»¶å¤¹ä¸‹ï¼ˆæ²¡æœ‰ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰ã€‚æ–‡ä»¶åå«åš <code>VSCodeCopied-$&#123;fileName&#125;</code>ã€‚<code>$&#123;fileName&#125;</code>æ˜¯åŸå§‹æ–‡ä»¶å</p>
<p><img src="/en/MarkDownImages/image-20230722142953270.png" alt="image-20230722142953270"></p>
<p>æˆ–è€…å¯ä»¥ç›´æ¥å¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ° <code>settings.json</code> ä¸­ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;markdown.copyFiles.destination&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;**/*&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./MarkDownImages/VSCodeCopied-$&#123;fileName&#125;&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ“ä½œ-1"><a href="#æ“ä½œ-1" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><p>ä¸ Typora ç±»ä¼¼ï¼Œæˆªå›¾æŒ‰ä¸‹ <code>Ctrl + v</code> å³å¯</p>
<p>ä¸ºä»€ä¹ˆä¿å­˜çš„å›¾ç‰‡åè¦å«åš <code>VSCodeCopied-$&#123;fileName&#125;</code>ï¼Ÿå› ä¸ºå°†æˆªå›¾æ’å…¥åˆ° VS Code ä¸­æ—¶ï¼Œä¼šè¢«èµ·åä¸º<code>image.png</code></p>
<p><img src="/en/MarkDownImages/image-20230722143640371.png" alt="image-20230722143640371"></p>
<p>å¦‚æœæœ‰é‡å¤ï¼Œå°±åœ¨æ–‡ä»¶ååé¢æ·»åŠ æ•°å­—ä»¥ç¤ºåŒºåˆ†ï¼š</p>
<p><img src="/en/MarkDownImages/image-20230722143756389.png" alt="image-20230722143756389"></p>
<p><img src="/en/MarkDownImages/image-20230722143813041.png" alt="image-20230722143813041"></p>
<p>è¿™æ˜¾ç„¶ä¸ç›´è§‚ï¼Œå¹¶ä¸”åœ¨å›¢é˜Ÿåˆä½œå†™æ–‡æ¡£æ—¶å®¹æ˜“é€ æˆæ–‡ä»¶åå†²çªã€‚æœŸå¾… VS Code åç»­çš„æ›´æ–°ä¸­èƒ½å¤Ÿè§£å†³è¿™ä¸€ç‚¹ï¼Œå¹¶æä¾›æ›´å¤šçš„æ’å…¥å›¾ç‰‡æ—¶çš„é€‰é¡¹ã€‚</p>
<h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><p><a href="https://support.typora.io/Images/#when-insert-images">Images in Typora: when-insert-images</a></p>
<p><a href="https://www.markdownguide.org/cheat-sheet/">Markdown Cheat Sheet</a></p>
]]></content>
      <categories>
        <category>softwares</category>
        <category>tech</category>
        <category>VS Code</category>
        <category>Typora</category>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>settings</tag>
        <tag>VS Code</tag>
        <tag>Typora</tag>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>LANraragi Manga Server</title>
    <url>/en/2024/01/25/LANraragi-%E6%BC%AB%E7%94%BB%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    <content><![CDATA[<h1 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h1><p>Recently, Iâ€™ve been looking into home media libraries, and most tutorials focus on NAS, but most of the applications actually run on Docker.</p>
<p>Now, I have the following demands for reading manga&#x2F;doujinshi:</p>
<ul>
<li>I have a large collection of manga archives on my computer and want various devices able to access these resources. â€”â€” A server capable of transmitting images via HTTP.</li>
<li>I want to manage the manga directory according to my preferences, not the rules of the server software.</li>
<li>When browsing manga on my phone&#x2F;tablet, I want an easy-to-use interface. â€”â€” A user-friendly client or a Web UI.</li>
<li>The client should have a random manga selection feature. â€”â€” Due to the abundance of collected manga, randomly picking one for leisure is the most convenient.</li>
</ul>
<p>Considering these, I chose <a href="https://github.com/Difegue/LANraragi">LANraragi</a>. Although <a href="https://komga.org/">Komga</a>, <a href="https://www.kavitareader.com/#home">Kavita</a>, and <a href="https://github.com/Suwayomi/Tachidesk-Sorayomi">Tachidesk (Sorayomi)</a> are also open-source manga servers, they didnâ€™t quite meet my expectations.</p>
<p>This article includes some excerpts from the official documentation and my own insights.</p>
<span id="more"></span>

<h1 id="LANraragi"><a href="#LANraragi" class="headerlink" title="LANraragi"></a>LANraragi</h1><p>LANraragi offers many features, but I only need a few of them:</p>
<table>
<thead>
<tr>
<th>Features</th>
<th>Required</th>
</tr>
</thead>
<tbody><tr>
<td>Upload local manga</td>
<td>âœ…</td>
</tr>
<tr>
<td>Download online manga</td>
<td>âŒ</td>
</tr>
<tr>
<td>Adding metadata (tagging)</td>
<td>âŒ</td>
</tr>
</tbody></table>
<p>All manga are uploaded locally by me. I just want to read manga and donâ€™t need to categorize them with tags.</p>
<h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><p>Docker compose:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">lanraragi:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">difegue/lanraragi:v.0.9.0</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">lanraragi</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">43000</span><span class="string">:3000</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/mnt/hgfs/doujinshiArchives:/home/koyomi/lanraragi/content:ro</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">lanraragi-database:/home/koyomi/lanraragi/database</span></span><br><span class="line">        </span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">lanraragi-database:</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>/home/koyomi/lanraragi/database</code> is the directory where LANraragi stores Redis data. Just create a volume for it.</li>
<li>The <code>/home/koyomi/lanraragi/content</code> directory stores:<ul>
<li>All manga archives. LANraragi can recursively scan subdirectories â€”â€” file management is based on my preferences.</li>
<li>Thumbnails of manga, by default stored in <code>/home/koyomi/lanraragi/content/thumb</code>.</li>
</ul>
</li>
<li>Since the thumbnail directory can be configured, the <code>content</code> directory only contains my own archives. I set permissions to read-only and map the host directory where manga files are stored. LANraragi detects file changes on its own, and I can collect mangas just like before.</li>
</ul>
<hr>
<ul>
<li>Using Docker Compose allows for recording the startup command, making it convenient for reuse later.</li>
<li>Stack in Portainer is a synonym for Docker Compose. After modifying Docker-compose file, Portainer will redeploy it, which is convenient. (Essentially, itâ€™s a combination of <a href="https://docs.docker.com/engine/reference/commandline/compose_down/">down</a> + up, but data wonâ€™t be lost because they are stored in volumes.)</li>
</ul>
<h1 id="Configurations"><a href="#Configurations" class="headerlink" title="Configurations"></a>Configurations</h1><p>On the first launch, the admin password is <code>kamimamita</code>. After logging in, go to the configuration page:</p>
<p><img src="/en/MarkDownImages/image-20240125195217045.png" alt="image-20240125195217045"></p>
<p>Firstly, a reminder: donâ€™t forget to save your configuration changes:</p>
<p><img src="/en/MarkDownImages/image-20240125200813922.png" alt="image-20240125200813922"></p>
<p>Start by changing the initial password:</p>
<p><img src="/en/MarkDownImages/image-20240125195247264.png" alt="image-20240125195247264"></p>
<p>Other configurations are as follows:</p>
<h2 id="Global-Settings"><a href="#Global-Settings" class="headerlink" title="Global Settings"></a>Global Settings</h2><p><img src="/en/MarkDownImages/image-20240125195357388.png" alt="image-20240125195357388"></p>
<ul>
<li>Set <code>Archives per page</code> to 20; a default of 100 is too many.</li>
<li>The reading history feature is not needed, so I store them on the client side to save server resources.</li>
</ul>
<h2 id="Archive-Files"><a href="#Archive-Files" class="headerlink" title="Archive Files"></a>Archive Files</h2><p>No need to change.</p>
<p><img src="/en/MarkDownImages/image-20240125195541509.png" alt="image-20240125195541509"></p>
<h2 id="Tags-and-Thumbnails"><a href="#Tags-and-Thumbnails" class="headerlink" title="Tags and Thumbnails"></a>Tags and Thumbnails</h2><p><img src="/en/MarkDownImages/image-20240125195742625.png" alt="image-20240125195742625"></p>
<ul>
<li>The point here is to change the thumbnail directory, due to the read-only mapping during Docker startup and the default thumbnail directory in <code>content</code>.</li>
<li>Turn off the two options related to tags.</li>
</ul>
<h2 id="Background-Workers"><a href="#Background-Workers" class="headerlink" title="Background Workers"></a>Background Workers</h2><p><img src="/en/MarkDownImages/image-20240125200521462.png" alt="image-20240125200521462"></p>
<p>This is used to monitor changes in manga archives in the <code>content</code> directory. If new resources are not processed promptly, a manual restart may be needed.</p>
<h2 id="Plugin-Configuration"><a href="#Plugin-Configuration" class="headerlink" title="Plugin Configuration"></a>Plugin Configuration</h2><p><img src="/en/MarkDownImages/image-20240125200854396.png" alt="image-20240125200854396"></p>
<p>Turn this off as itâ€™s not needed.</p>
<p>All plugins are disabled by default, So you may leave this setting as before.</p>
<h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><p>When mounting your own manga archives for the first time in the <code>content</code> directory, LANraragi requires significant resources to process metadata and thumbnails. According to Portainerâ€™s monitoring data, it used 2-3GB of memory and 2000% CPU (not quite sure how this CPU resource is calculated).</p>
<p>Functions on the homepage:</p>
<ul>
<li>Search;</li>
<li>Display random mangas each time;</li>
<li>List mode &#x2F; thumbnail mode.</li>
</ul>
<p>Reader configuration:</p>
<p>1ï¸âƒ£ Default is pagination mode.</p>
<p>2ï¸âƒ£ I prefer infinite scrolling mode:</p>
<p><img src="/en/MarkDownImages/image-20240125201748231.png" alt="image-20240125201748231"></p>
<h1 id="Sharing-With-Other-Devices"><a href="#Sharing-With-Other-Devices" class="headerlink" title="Sharing With Other Devices"></a>Sharing With Other Devices</h1><p>My Docker runs in a Linux virtual machine, and due to Docker port mapping, LANraragi can be accessed on the host machine through the virtual machineâ€™s IP.</p>
<h2 id="Virtual-Machine-NAT-Passthrough"><a href="#Virtual-Machine-NAT-Passthrough" class="headerlink" title="Virtual Machine NAT Passthrough"></a>Virtual Machine NAT Passthrough</h2><p>To access LANraragi from other devices, NAT passthrough is needed to map the virtual machineâ€™s port to the hostâ€™s port:</p>
<p><img src="/en/MarkDownImages/image-20240125202125135.png" alt="image-20240125202125135"></p>
<p><img src="/en/MarkDownImages/image-20240125202155268.png" alt="image-20240125202155268"></p>
<p><img src="/en/MarkDownImages/image-20240125202344077.png" alt="image-20240125202344077"></p>
<p>As configured in the images, map port 43000 on the virtual machine to port 43000 on the host.</p>
<h2 id="Local-Firewall"><a href="#Local-Firewall" class="headerlink" title="Local Firewall"></a>Local Firewall</h2><p>Windows Firewall will block this port by default, so configure a new rule:</p>
<p><img src="/en/MarkDownImages/image-20240125202513739.png" alt="image-20240125202513739"></p>
<p><img src="/en/MarkDownImages/image-20240125202536458.png" alt="image-20240125202536458"></p>
<p><img src="/en/MarkDownImages/image-20240125202641453.png" alt="image-20240125202641453"></p>
<p>Create a new rule in inbound rules: open port 43000&#x2F;tcp for private networks (home networks).</p>
<p>Afterward, you can access LANraragi from your phone via <code>computerIP:43000</code>.</p>
<p>The homepage of the mobile web UI is not great, but you can use the <a href="https://sugoi.gitbook.io/lanraragi/advanced-usage/external-readers">officially recommended client</a>. However, since I only want to read randomly, itâ€™s not a big issue. And the interface for reading manga is handy, So I will take it.</p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li><a href="https://sugoi.gitbook.io/lanraragi/">LANraragi Official Documentation</a></li>
</ul>
]]></content>
      <categories>
        <category>tech</category>
        <category>NAS</category>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>NAS</tag>
        <tag>Docker</tag>
        <tag>LANraragi</tag>
      </tags>
  </entry>
  <entry>
    <title>LocalSendï¼šå±€åŸŸç½‘æ–‡ä»¶ä¼ è¾“åˆ©å™¨</title>
    <url>/en/2023/09/04/LocalSend%EF%BC%9A%E5%B1%80%E5%9F%9F%E7%BD%91%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%88%A9%E5%99%A8/</url>
    <content><![CDATA[<h1 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h1><p>æœ€è¿‘å‡†å¤‡é‡è£…ç¬”è®°æœ¬çš„ç³»ç»Ÿï¼Œå› æ­¤è¦å¤‡ä»½æ–‡ä»¶ï¼Œå­˜åˆ°å°å¼æœºé‡Œã€‚æˆ‘å°†è¦å¤‡ä»½çš„æ–‡ä»¶å¤¹å‹ç¼©ï¼Œé€šè¿‡ Windows è‡ªå¸¦çš„æ–‡ä»¶å¤¹å…±äº«ï¼ˆå±€åŸŸç½‘å…±äº«ï¼‰ï¼Œä¼ è¾“è¿™äº›å‹ç¼©åŒ…ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¼ è¾“è¿‡ç¨‹å´éå¸¸è‰°éš¾ã€‚æœ‰çš„å‹ç¼©åŒ…æœ‰ 10 å‡ ä¸ª GBï¼Œä¼ äº†ä¸€åˆ†é’Ÿï¼Œç½‘é€Ÿå°±æ²¡äº†ï¼Œä¹‹åå°±å¼€å§‹æŠ¥è¶…æ—¶ä¹‹ç±»çš„é”™è¯¯ã€‚æ›´ç¦»è°±çš„æ˜¯ï¼Œæœ‰ä¸ªå‹ç¼©åŒ…åœ¨ä¸¤å°ç”µè„‘ä¸Š<a href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E6%A0%A1%E9%AA%8C">æ‘˜è¦ç®—æ³•</a>çš„ç»“æœä¸åŒã€‚</p>
<p>æ˜¾ç„¶ï¼Œwindows SMB åè®®æ—¢ä¸èƒ½ä¿è¯é€Ÿåº¦ï¼Œä¹Ÿä¸èƒ½ä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼Œäºæ˜¯æˆ‘å¼€å§‹å¯»æ‰¾æ›´åŠ å¥½ç”¨çš„å±€åŸŸç½‘ä¼ è¾“è½¯ä»¶ã€‚å®ƒï¼Œå°±æ˜¯æœ¬æ–‡çš„ä¸»è§’ â€”â€” LocalSend</p>
<span id="more"></span>

<h1 id="LocalSend-ä»‹ç»"><a href="#LocalSend-ä»‹ç»" class="headerlink" title="LocalSend ä»‹ç»"></a>LocalSend ä»‹ç»</h1><p>LocalSend æ˜¯ä¸€ä¸ª<strong>è·¨å¹³å°</strong>çš„å±€åŸŸç½‘ä¼ è¾“è½¯ä»¶ï¼Œæ”¯æŒ Windows, Linux, macOS, Android å’Œ IOS. è¿™æ˜¯å®ƒçš„<a href="https://localsend.org/#/">å®˜ç½‘</a>ï¼›è¿™æ˜¯å®ƒçš„ <a href="https://github.com/localsend/localsend">GitHub ä»“åº“</a></p>
<p>ä½œè€…è®¾è®¡äº†ä¸€ä¸ªåŸºäº HTTP çš„ä¼ è¾“åè®®ï¼Œåœ¨<a href="https://github.com/localsend/protocol">è¿™é‡Œ</a></p>
<p>LocalSend åŸºæœ¬ä¸Šæ˜¯å¼€ç®±å³ç”¨ï¼Œæ²¡å¿…è¦ä¸“é—¨å†™ä¸€èŠ‚ quickstart</p>
<p>ä½†æ˜¯ï¼Œç”±äº Windows é˜²ç«å¢™çš„é»˜è®¤é…ç½®ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨è¯¥è½¯ä»¶æ—¶ï¼ŒåŒå±€åŸŸç½‘å†…çš„è®¾å¤‡å¯èƒ½æ— æ³•å‘ç°è¿™å° Windows è®¾å¤‡ã€‚ä¸‹é¢ï¼Œæˆ‘å°†ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚</p>
<h1 id="é˜²ç«å¢™é…ç½®"><a href="#é˜²ç«å¢™é…ç½®" class="headerlink" title="é˜²ç«å¢™é…ç½®"></a>é˜²ç«å¢™é…ç½®</h1><h2 id="æˆ‘çš„æ–¹æ¡ˆ"><a href="#æˆ‘çš„æ–¹æ¡ˆ" class="headerlink" title="æˆ‘çš„æ–¹æ¡ˆ"></a>æˆ‘çš„æ–¹æ¡ˆ</h2><ol>
<li><p>å°†å®¶åº­ WIFI è®¾ç½®ä¸ºä¸“ç”¨ç½‘ç»œï¼ˆä¸å»ºè®®åœ¨å…¬å…±ç½‘ç»œä½¿ç”¨å±€åŸŸç½‘ä¼ è¾“æ–‡ä»¶ï¼Œæ— è®ºè½¯ä»¶ä½œè€…åšäº†æ€æ ·çš„åŠ å¯†ï¼Œæˆ‘éƒ½è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ã€‚å› æ­¤ï¼Œè¿™é‡Œä¸è®¨è®ºå…¬ç”¨ç½‘ç»œçš„æƒ…å†µï¼‰<img src="/en/MarkDownImages/image-20230904212558782.png" alt="image-20230904212558782"></p>
</li>
<li><p>è¿›å…¥ã€é…ç½®é˜²ç«å¢™å’Œå®‰å…¨è®¾ç½®ã€</p>
<p> <img src="/en/MarkDownImages/image-20230904212718315.png" alt="image-20230904212718315"></p>
</li>
<li><p>ã€å…è®¸åº”ç”¨é€šè¿‡é˜²ç«å¢™ã€â€”â€”ã€æ›´æ”¹é…ç½®ã€ã€‚æ‰¾åˆ° <code>localsend_app</code>ï¼ˆå…¶ä»–ä»¥<code>localsend</code>å¼€å¤´çš„ä¹Ÿå¯ä»¥è¿™æ ·åšï¼‰ï¼Œå°†å®ƒä¹‹å‰é‚£çš„å•é€‰æ¡†é€‰ä¸Šã€‚ä»¥é˜²ä¸‡ä¸€ï¼Œç¡®ä¿ä¹‹åçš„ä¸¤ä¸ªå•é€‰æ¡†ä¹Ÿæ˜¯é€‰ä¸Šçš„ï¼ˆåº”è¯¥æ˜¯é»˜è®¤å¼€å¯çš„ï¼‰ã€‚ç„¶åç‚¹å‡»ã€ç¡®å®šã€</p>
<p> <img src="/en/MarkDownImages/image-20230904212911221.png" alt="image-20230904212911221"></p>
</li>
<li><p>é‡å¯ LocalSendï¼Œç­‰å¾…æ‰¾åˆ°ç›®æ ‡ä¸»æœº</p>
</li>
</ol>
<h2 id="ç½‘ä¸Šçš„æ–¹æ¡ˆï¼ˆæœªéªŒè¯ï¼‰"><a href="#ç½‘ä¸Šçš„æ–¹æ¡ˆï¼ˆæœªéªŒè¯ï¼‰" class="headerlink" title="ç½‘ä¸Šçš„æ–¹æ¡ˆï¼ˆæœªéªŒè¯ï¼‰"></a>ç½‘ä¸Šçš„æ–¹æ¡ˆï¼ˆæœªéªŒè¯ï¼‰</h2><p>è¿™é‡Œä¹Ÿç»™å‡ºç½‘ä¸Šå…¶ä»–äººçš„è§£å†³æ–¹æ³•ï¼Œè™½ç„¶æˆ‘è§‰å¾—å…¨å±€æ“ä½œé˜²ç«å¢™<strong>å¾ˆä¸å®‰å…¨</strong>ã€‚</p>
<ol>
<li><p>æ‰“å¼€ã€Windows Defender é˜²ç«å¢™ã€</p>
<p> <img src="/en/MarkDownImages/image-20230904213446263.png" alt="image-20230904213446263"></p>
</li>
<li><p>ã€é«˜çº§è®¾ç½®ã€â€”â€”ã€Windows é˜²ç«å¢™å±æ€§ã€ã€‚åœ¨ã€ä¸“ç”¨é…ç½®æ–‡ä»¶ã€ä¸€æ ï¼Œå°†ã€å…¥ç«™è¿æ¥ã€æ”¹ä¸ºã€å…è®¸ã€ï¼Œç„¶åã€åº”ç”¨ã€</p>
<p> <img src="/en/MarkDownImages/image-20230904213728952.png" alt="image-20230904213728952"></p>
</li>
<li><p>é‡å¯ LocalSendï¼ŒæŸ¥çœ‹èƒ½å¦æ‰¾åˆ°ç›®æ ‡ä¸»æœºã€‚å¦‚æœä¸è¡Œï¼Œå†å°†ä¸Šè¿°ã€å…¬ç”¨é…ç½®æ–‡ä»¶ã€ä¸€æ çš„ã€å…¥ç«™è¿æ¥ã€æ”¹ä¸ºã€å…è®¸ã€ï¼Œç„¶åã€åº”ç”¨ã€ï¼Œå†æ¬¡é‡å¯ LocalSend å¹¶æ£€éªŒã€‚</p>
</li>
</ol>
<h1 id="æ–‡ä»¶ä¼ è¾“æ ¡éªŒ"><a href="#æ–‡ä»¶ä¼ è¾“æ ¡éªŒ" class="headerlink" title="æ–‡ä»¶ä¼ è¾“æ ¡éªŒ"></a>æ–‡ä»¶ä¼ è¾“æ ¡éªŒ</h1><p>åœ¨ç½‘ç»œä¼ è¾“æ–‡ä»¶åï¼Œé€šå¸¸è¦ä½¿ç”¨æ‘˜è¦ç®—æ³•ï¼ˆMD5ã€SHA1ã€SHA256ç­‰ï¼‰å¯¹æ¯”ä¸¤ä»½æ–‡ä»¶æ˜¯å¦ä¸€è‡´ï¼Œé˜²æ­¢ç”±äºç½‘ç»œå¯¼è‡´çš„æ•°æ®ä¸¢å¤±ã€‚å¾ˆå¤šç°æˆçš„å·¥å…·æä¾›è¿™æ ·çš„æœåŠ¡ï¼Œè¿™é‡Œæˆ‘ä»‹ç» 3 ä¸ªã€‚</p>
<h2 id="7-zip"><a href="#7-zip" class="headerlink" title="7-zip"></a>7-zip</h2><p>7-zip è™½ç„¶æ˜¯ä¸€ä¸ªå¼€æºçš„å‹ç¼©è½¯ä»¶ï¼Œä½†ä¹Ÿæä¾›æ‘˜è¦å‡½æ•°ã€‚</p>
<p>å³é”®é€‰ä¸­è¦æ‘˜è¦çš„æ–‡ä»¶ï¼Œç‚¹å‡»ã€CRC SHAã€ï¼Œé€‰æ‹©æ‘˜è¦ç®—æ³•</p>
<p><img src="/en/MarkDownImages/image-20230904214607556.png" alt="image-20230904214607556"></p>
<p>å¦‚æœå³é”®èœå•æ²¡æœ‰è¯¥é€‰é¡¹ï¼Œåœ¨ 7-zip ä¸­é…ç½®å³å¯ï¼š</p>
<p><img src="/en/MarkDownImages/image-20230904214947662.png" alt="image-20230904214947662"></p>
<h2 id="openssl"><a href="#openssl" class="headerlink" title="openssl"></a>openssl</h2><p>Linux å¤§å¤šæ•°å‘è¡Œç‰ˆéƒ½ä¼šè‡ªå¸¦çš„å·¥å…·ã€‚ä¹Ÿå¯ä»¥åœ¨ git bash ä¸­ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚è¯­æ³•æ˜¯ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">openssl æ‘˜è¦ç®—æ³•å æ–‡ä»¶è·¯å¾„</span><br></pre></td></tr></table></figure>

<p>ä¾‹å­ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Elnino@PC MINGW64 ~/Desktop</span><br><span class="line">$ openssl sha256 generate-random-file.cmd</span><br><span class="line">SHA256(generate-random-file.cmd)= 03f9454e4ee7923d08aefa4957282b62a655e7231ea6f4bdd6cdcc4e9a4c1bd9</span><br></pre></td></tr></table></figure>



<h2 id="Certutil"><a href="#Certutil" class="headerlink" title="Certutil"></a>Certutil</h2><p>Windows ä¸Šçš„ä¸€ä¸ªç”¨æ¥æä¾›è¯ä¹¦æœåŠ¡çš„å·¥å…·ï¼Œä¹Ÿæä¾›äº†ä¸€äº›æ‘˜è¦ç®—æ³•ã€‚è¯­æ³•æ˜¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">certutil <span class="literal">-hashfile</span> æ–‡ä»¶è·¯å¾„ æ‘˜è¦ç®—æ³•å</span><br></pre></td></tr></table></figure>

<p>ä¾‹å­ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\Elnino\Desktop&gt; certutil <span class="literal">-hashfile</span> .\generate<span class="literal">-random-file</span>.cmd sha256</span><br><span class="line">SHA256 çš„ .\generate<span class="literal">-random-file</span>.cmd å“ˆå¸Œ:</span><br><span class="line"><span class="number">03</span>f9454e4ee7923d08aefa4957282b62a655e7231ea6f4bdd6cdcc4e9a4c1bd9</span><br><span class="line">CertUtil: <span class="literal">-hashfile</span> å‘½ä»¤æˆåŠŸå®Œæˆã€‚</span><br></pre></td></tr></table></figure>



<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»‹ç»äº†ä¸€æ¬¾å¼€æºå¥½ç”¨çš„å±€åŸŸç½‘ä¼ è¾“å·¥å…· â€”â€” LocalSendã€‚ä¹‹åï¼Œæˆ‘åˆç»™å‡ºäº† Windows ç³»ç»Ÿä¸­å¦‚ä½•é…ç½®é˜²ç«å¢™ï¼Œä½¿å¾—å…¶ä»–è®¾å¤‡èƒ½å‘ç°å½“å‰çš„è®¾å¤‡ã€‚æœ€åï¼Œæˆ‘ä»‹ç»äº†ä¸€äº›å¸¸è§çš„å¯¹æ–‡ä»¶è¿›è¡Œæ‘˜è¦çš„å·¥å…·ï¼šä»ç½‘ç»œä¸‹è½½çš„æ–‡ä»¶ï¼Œç†è®ºä¸Šéƒ½è¦è¿›è¡Œä¸€éæ ¡éªŒï¼Œé˜²æ­¢æ•°æ®æŸåæˆ–ä¸¢å¤±ã€‚</p>
]]></content>
      <categories>
        <category>softwares</category>
        <category>LocalSend</category>
      </categories>
      <tags>
        <tag>settings</tag>
        <tag>LocalSend</tag>
        <tag>Firewall</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-Plus å®ç° MySQL JSON ç±»å‹å­—æ®µçš„æ˜ å°„</title>
    <url>/en/2023/07/08/MyBatis-Plus-%E5%AE%9E%E7%8E%B0-MySQL-JSON-%E7%B1%BB%E5%9E%8B%E5%AD%97%E6%AE%B5%E7%9A%84%E6%98%A0%E5%B0%84/</url>
    <content><![CDATA[<h1 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h1><p>MySQL æ”¯æŒ JSON ç±»å‹çš„å­—æ®µã€‚ç›¸æ¯”å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œ JSON ç±»å‹æœ‰å¦‚ä¸‹å¥½å¤„ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ£€æŸ¥ JSON è¯­æ³•æ˜¯å¦æ­£ç¡®</li>
<li>åº•å±‚æ”¯æŒå¿«é€Ÿå­˜å– JSON ä¸­çš„å…ƒç´ ã€‚ä¸éœ€è¦å°†æ•´ä¸ª å­—ç¬¦ä¸² å…¨éƒ¨è¯»å–å‡ºæ¥ï¼Œå†è§£ææˆ JSON å¯¹è±¡</li>
</ul>
<p>åœ¨é€»è¾‘ä¸Šï¼ŒJSON ä¸ POJO æ— å¼‚ã€‚Spring MVC å·²ç»å®ç°äº† Controller å±‚ä¸¤è€…çš„è‡ªåŠ¨è½¬åŒ–ï¼Œè¿™ä½“ç°åœ¨è¯·æ±‚å‚æ•°å’Œè¿”å›å€¼ä¸Šã€‚é‚£ä¹ˆï¼ŒRepository å±‚å¦‚ä½•å®ç°ä¸¤è€…çš„è‡ªåŠ¨è½¬æ¢å‘¢ï¼Ÿ</p>
<p>æœ¬æ–‡å±•ç¤ºäº†é€šè¿‡ä½¿ç”¨ MyBatis-Plusï¼Œ<strong>æ— ä¾µå…¥å¼</strong>åœ°å®ç°æŒä¹…å±‚ JSON ä¸ POJO çš„è‡ªåŠ¨æ˜ å°„ï¼ˆORMï¼Œ Object Relational Mappingï¼‰</p>
<h1 id="æ¡ˆä¾‹æ¼”ç¤º"><a href="#æ¡ˆä¾‹æ¼”ç¤º" class="headerlink" title="æ¡ˆä¾‹æ¼”ç¤º"></a>æ¡ˆä¾‹æ¼”ç¤º</h1><h2 id="æ•°æ®åº“è¡¨"><a href="#æ•°æ®åº“è¡¨" class="headerlink" title="æ•°æ®åº“è¡¨"></a>æ•°æ®åº“è¡¨</h2><span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `person` (</span><br><span class="line">  `id` bigint NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `name` varchar(255) NOT NULL,</span><br><span class="line">  `log` json NOT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB;</span><br></pre></td></tr></table></figure>

<h2 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(value = &quot;person&quot;, autoResultMap = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableField(typeHandler = JacksonTypeHandler.class)</span></span><br><span class="line">    <span class="keyword">private</span> PersonLog log;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">PersonLog</span> &#123;</span><br><span class="line">        List&lt;String&gt; hobbies;</span><br><span class="line">        Integer age;</span><br><span class="line">        String address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„<code>PersonLog</code>æ˜¯é‡ç‚¹è®¨è®ºçš„å¯¹è±¡ï¼Œæˆ‘ä»¬è¦å®ç°å®ƒä¸ JSON çš„æ˜ å°„ã€‚</p>
<p><code>Person</code>ç±»ä¸Šéœ€è¦æ ‡è®°ä¸¤ä¸ªæ³¨è§£ï¼Œä¸¤è€…é€šå¸¸ä¸€èµ·ä½¿ç”¨ï¼š</p>
<p> <code>TableName#autoResultMap</code>ï¼šè´Ÿè´£åœ¨<strong>æŸ¥è¯¢</strong>æ—¶å€™æŠŠ JSON è½¬æ¢ä¸º POJO</p>
<p><code>TableField#typeHandler</code>ï¼šè´Ÿè´£åœ¨<strong>æ’å…¥</strong>æ—¶å°† POJO è½¬æ¢ä¸º JSONã€‚ç”±äº spring-web-starter å·²ç»å¯¼å…¥äº† jackson ä¾èµ–ï¼Œç›´æ¥ä½¿ç”¨ <code>JacksonTypeHandler</code> å³å¯ã€‚</p>
<h2 id="mapper-xml"><a href="#mapper-xml" class="headerlink" title="mapper.xml"></a>mapper.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.demo.mapper.PersonMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.example.demo.entity.Person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;BIGINT&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;log&quot;</span> <span class="attr">property</span>=<span class="string">&quot;log&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;LONGVARCHAR&quot;</span> <span class="attr">typeHandler</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.handlers.JacksonTypeHandler&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">        id, name, log</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>mapper æ–‡ä»¶ä¸­éœ€è¦æŒ‡å‡º <code>log</code> å­—æ®µçš„ typeHandler çš„å…¨ç±»å</p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PersonMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Person&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœç•¥äº† Service å±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PersonMapper personMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/json&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">testJSON2BeanMap</span><span class="params">(<span class="meta">@RequestBody</span> Person person)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> personMapper.insert(person);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/json/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Person <span class="title function_">getPersonById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> personMapper.selectById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸¤ä¸ªæ–¹æ³•ï¼Œæ²¡æŠ¥é”™å°±è¯´æ˜æˆåŠŸï¼Œæ’å…¥æ—¶å¯ä»¥å†æŸ¥çœ‹ä¸€ä¸‹æ•°æ®åº“ã€‚</p>
<p>åœ¨<a href="#%E5%BA%8F%E8%A8%80">åºè¨€</a>ä¸­æåˆ°çš„<strong>æ— ä¾µå…¥å¼ORM</strong>ï¼Œæ˜¯æŒ‡æˆ‘ä»¬ä¸éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨åœ°æ‰§è¡Œ JSON ä¸ PersonLog çš„è½¬æ¢ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬æ–‡å±•ç¤ºäº†é€šè¿‡ä½¿ç”¨ MyBatis-Plus<strong>æ— ä¾µå…¥å¼</strong>å®ç°æŒä¹…å±‚ JSON ä¸ POJO çš„è‡ªåŠ¨æ˜ å°„ã€‚</p>
<p>æˆ‘å¯¹è¿™ä¸€é—®é¢˜çš„ç ”ç©¶æºè‡ªå®ä¹ æ—¶ä¸šåŠ¡çš„è¦æ±‚ã€‚å½“æˆ‘æŸ¥è¯¢ç½‘ä¸Šçš„èµ„æ–™æ—¶ï¼Œå‘ç°å¸–å­çš„è¡¨è¿°éƒ½ä¸å¤ªå®Œæ•´ã€ç›´è§‚ï¼Œäºæ˜¯æˆ‘è®°å½•ä¸‹äº†è§£å†³æ–¹æ¡ˆï¼Œå†™æˆäº†è¿™ç¯‡æ–‡ç« ã€‚</p>
<h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><p><a href="https://dev.mysql.com/doc/refman/8.0/en/json.html">The JSON Data Type</a></p>
<p><a href="https://blog.csdn.net/qq_33360626/article/details/119836835">mybatis-pluså¤„ç†mysqlä¸­jsonæ ¼å¼æ–¹æ³•</a></p>
]]></content>
      <categories>
        <category>tech</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Spring Boot</tag>
        <tag>MySQL</tag>
        <tag>MyBatis-Plus</tag>
        <tag>JDBC</tag>
        <tag>Repository</tag>
      </tags>
  </entry>
  <entry>
    <title>Python venv ä½¿ç”¨</title>
    <url>/en/2023/12/20/Python-venv-%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h1><p>Python ä»¥å…¶æ¨¡å—ä¸°å¯Œè€Œè‘—ç§°ã€‚ä½†æ˜¯ï¼Œä¸åŒäº Java å¼€å‘ä¸­ Maven ä½¿ç”¨ group Idã€artifact Id å’Œ version æ¥å”¯ä¸€ç¡®å®šä¸€ä¸ªä¾èµ–ã€‚åœ¨å®è·µä¸­ï¼Œç»å¤§å¤šæ•° Python é¡¹ç›®<strong>åª</strong>é€šè¿‡æ¨¡å—åæ¥åŒºåˆ†æ¨¡å—ã€‚<code>pip install &lt;module&gt;</code>ï¼Œä¸€ä¸ªæ¨¡å—å°±è£…å¥½äº†ã€‚é‚£ä¹ˆæ¨¡å—çš„ç‰ˆæœ¬å‘¢ï¼Ÿå¤§éƒ¨åˆ†é¡¹ç›®çš„ requirements éƒ½ä¸ä¼šæåŠç‰ˆæœ¬ï¼Œé€ æˆåæ¥è€…è·‘é¡¹ç›®æ—¶ä¸åœåœ°æŠ¥é”™ã€‚</p>
<p>å› æ­¤ï¼Œå¼±åŒ–ç‰ˆæœ¬å·çš„æ¦‚å¿µæ— ç–‘<strong>å¼Šå¤§äºåˆ©</strong>ã€‚å¦‚ä½•è§£å†³ï¼Ÿä½¿ç”¨ venvï¼ˆè™šæ‹Ÿç¯å¢ƒï¼‰ã€‚</p>
<p>å¦‚æœç›´æ¥ä½¿ç”¨ <code>pip install</code> ï¼Œé‚£ä¹ˆæ‰€æœ‰ Python é¡¹ç›®å…±ç”¨è¿™äº›æ¨¡å—ï¼Œä¼šäº§ç”Ÿç‰ˆæœ¬ä¼šå…¼å®¹ã€‚venv å°†åŸå§‹çš„ Python ç¯å¢ƒæ‹·è´ä¸€ä»½ã€‚è™šæ‹Ÿç¯å¢ƒçš„è¿è¡Œåªä¾èµ–äºæ‹·è´åçš„ Pythonï¼Œå®‰è£…çš„æ¨¡å—ä¹Ÿåªä¼šå­˜åœ¨äºè¯¥è™šæ‹Ÿç¯å¢ƒä¸­ã€‚å¤šä¸ªè™šæ‹Ÿç¯å¢ƒé—´ç›¸äº’éš”ç¦»ã€‚</p>
<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>1ï¸âƒ£åˆ›å»º  venv :</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">python <span class="literal">-m</span> venv C:\Users\Elnino\Desktop\test\venv</span><br></pre></td></tr></table></figure>

<p><code>C:\Users\Elnino\Desktop\test\venv</code> ç›®å½•å°±æ˜¯è¯¥è™šæ‹Ÿç¯å¢ƒ</p>
<span id="more"></span>

<p>2ï¸âƒ£å¯åŠ¨ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">venv\Scripts\activate</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæç¤ºç¬¦å‰å‡ºç° <code>(venv)</code>ï¼Œå°±è¯´æ˜å¯åŠ¨æˆåŠŸï¼Œåœ¨é‡Œé¢å¯ä»¥éšä¾¿ç©äº†ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">(venv) C:\Users\Elnino\Desktop\test&gt;pip list</span><br></pre></td></tr></table></figure>

<p>3ï¸âƒ£é€€å‡ºï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">(venv) C:\Users\Elnino\Desktop\test&gt;deactivate</span><br><span class="line">C:\Users\Elnino\Desktop\test&gt;</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://docs.python.org/3/library/venv.html">venv â€” Creation of virtual environments</a></p>
]]></content>
      <categories>
        <category>tech</category>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>venv</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring MVC ä½¿ç”¨ Validation æ³¨è§£å®ç°è¯·æ±‚å‚æ•°è‡ªåŠ¨æ ¡éªŒ</title>
    <url>/en/2023/07/05/Spring-MVC-%E4%BD%BF%E7%94%A8-Validation-%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E8%87%AA%E5%8A%A8%E6%A0%A1%E9%AA%8C/</url>
    <content><![CDATA[<h1 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h1><p>æ§åˆ¶å™¨æ–¹æ³•ï¼ˆ handler ï¼‰ä¸­è´Ÿè´£è¯·æ±‚å‚æ•°æ ¡éªŒã€‚</p>
<p>ä¼ ç»Ÿçš„å†™æ³•æ˜¯åœ¨æ¯ä¸ªæ–¹æ³•çš„å¼€å¤´å¯¹æ‰€æœ‰è¯·æ±‚å‚æ•°è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœå­˜åœ¨å‚æ•°ä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–è€…æå‰è¿”å›é”™è¯¯ã€‚</p>
<p>Validation API æä¾›äº†ä¸€ç³»åˆ—çš„æ³¨è§£ï¼Œé€šè¿‡å°†è¿™äº›æ³¨è§£æ ‡è®°åœ¨ entity ç±»çš„å±æ€§ä¸Šï¼ŒSpring MVC ä¼šæ ¹æ®è¿™äº›æ³¨è§£çš„è¯­ä¹‰ï¼Œè‡ªåŠ¨å®Œæˆè¯·æ±‚å‚æ•°æ ¡éªŒã€‚å¦‚æœå‚æ•°ä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚è¿™èŠ‚çœäº†å¼€å‘è€…æ‰‹åŠ¨æ ¡éªŒè¯·æ±‚å‚æ•°çš„éº»çƒ¦ã€‚</p>
<p>è´Ÿè´£è‡ªåŠ¨å‚æ•°æ ¡éªŒçš„ç±»å®é™…ä¸Šæ˜¯ç”± Spring Boot è‡ªåŠ¨è£…é…å¯¼å…¥çš„ï¼Œå› æ­¤æˆ‘ä»¬è¦ä½¿ç”¨å¯¹åº”çš„ starter ä¾èµ–ã€‚</p>
<h1 id="æ¡ˆä¾‹æ¼”ç¤º"><a href="#æ¡ˆä¾‹æ¼”ç¤º" class="headerlink" title="æ¡ˆä¾‹æ¼”ç¤º"></a>æ¡ˆä¾‹æ¼”ç¤º</h1><h2 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h2><span id="more"></span>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>validation-api æ˜¯æœ¬æ¬¡ä»‹ç»çš„é‡ç‚¹</p>
<img src="/MarkDownImages/image-20230705200537754.png" alt="image-20230705200537754" style="zoom:80%;" />

<h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><p>ä¸€ä¸ªæ ‡å‡†çš„ Spring Initializer ç”Ÿæˆçš„ Spring Boot é¡¹ç›®</p>
<img src="/MarkDownImages/image-20230705200916180.png" alt="image-20230705200916180" style="zoom: 80%;" />

<h2 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h2><h3 id="User"><a href="#User" class="headerlink" title="User"></a>User</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.elnino.springmvcvalidatordemo.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@NotBlank</span></span><br><span class="line">    <span class="meta">@Size(max = 5, message = &quot;åå­—ä¸èƒ½è¶…è¿‡5ä¸ªå­—ç¬¦&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Min(value = 0, message = &quot;å¹´é¾„ä¸èƒ½å°äº0&quot;)</span></span><br><span class="line">    <span class="meta">@Max(value = 200, message = &quot;å¹´é¾„ä¸èƒ½å¤§äº200&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>@NotBlank</code>ï¼šç”¨åœ¨ <code>CharSequence</code> ç±»å‹çš„å±æ€§ä¸Šï¼Œè¡¨ç¤ºè¯¥å­—æ®µéç©ºï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 1ã€‚ç®€å•æ¥è¯´ï¼Œè¯¥å­—ç¬¦ä¸²å¿…é¡»æœ‰å†…å®¹</p>
<p><code>@Size</code>ï¼šç”¨åœ¨<code>CharSequence</code>å’Œé›†åˆç±»çš„å±æ€§ä¸Šï¼Œè¡¨ç¤ºè¯¥å­—æ®µçš„å­—ç¬¦æ•°&#x2F;å…ƒç´ æ•°ç›®ã€‚<code>max = 5</code>æ˜¯æ•°é‡çš„ä¸Šç•Œï¼Œä¸èƒ½è¶…è¿‡è¯¥ä¸Šç•Œã€‚å½“å±æ€§å€¼ä¸æ»¡è¶³æ¡ä»¶æ—¶ï¼ŒSpring MVC ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœè®¾ç½®äº†<code>message</code>å±æ€§ï¼Œåˆ™å¼‚å¸¸å†…å®¹ä¸­ä¼šåŒ…å« <code>message</code> çš„å€¼</p>
<p><code>@NotNull</code>ï¼šå­—é¢å«ä¹‰ï¼Œå­—æ®µéç©º</p>
<p><code>@Min</code>ã€<code>@Max</code>ï¼šç”¨åœ¨æ•°å€¼ç±»å‹ä¸Šï¼Œå¯¹æ•°å€¼çš„å¤§å°è¿›è¡Œçº¦æŸã€‚</p>
<h3 id="Pet"><a href="#Pet" class="headerlink" title="Pet"></a>Pet</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.elnino.springmvcvalidatordemo.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotBlank;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pet</span> &#123;</span><br><span class="line">    <span class="meta">@NotBlank</span></span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="meta">@NotBlank</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="UserAndPet"><a href="#UserAndPet" class="headerlink" title="UserAndPet"></a>UserAndPet</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.elnino.springmvcvalidatordemo.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.Valid;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAndPet</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Valid</span> <span class="comment">// è¿™ä¸ªæ³¨è§£ä¿è¯äº†Userç±»å†…éƒ¨çš„å­—æ®µä¹Ÿèƒ½è¢«æ ¡éªŒ</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">private</span> Pet pet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@Valid</code>æ³¨è§£å‘Šè¯‰ Spring MVCï¼Œå®ƒæ ‡è®°çš„ç±»ä¸Šä¹Ÿæœ‰å­—æ®µéœ€è¦æ ¡éªŒã€‚</p>
<h2 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.elnino.springmvcvalidatordemo.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.elnino.springmvcvalidatordemo.entity.UserAndPet;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.annotation.Validated;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoController</span> &#123;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> UserAndPet <span class="title function_">test</span><span class="params">(<span class="meta">@Validated</span> <span class="meta">@RequestBody</span> UserAndPet userAndPet)</span> &#123;</span><br><span class="line">        System.out.println(userAndPet);</span><br><span class="line">        <span class="keyword">return</span> userAndPet;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@Validated</code>æŒ‡ç¤º Spring MVCï¼šå½“å‰è¯·æ±‚å‚æ•°éœ€è¦è¢«æ ¡éªŒ</p>
<h2 id="ä½¿ç”¨-Postman-å‘é€è¯·æ±‚"><a href="#ä½¿ç”¨-Postman-å‘é€è¯·æ±‚" class="headerlink" title="ä½¿ç”¨ Postman å‘é€è¯·æ±‚"></a>ä½¿ç”¨ Postman å‘é€è¯·æ±‚</h2><h3 id="åˆæ³•è¯·æ±‚"><a href="#åˆæ³•è¯·æ±‚" class="headerlink" title="åˆæ³•è¯·æ±‚"></a>åˆæ³•è¯·æ±‚</h3><p>è¯·æ±‚ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;adam&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">15</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pet&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cat&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;east wind&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<img src="/MarkDownImages/image-20230705202651511.png" alt="image-20230705202651511" style="zoom:67%;" />

<h3 id="éæ³•è¯·æ±‚"><a href="#éæ³•è¯·æ±‚" class="headerlink" title="éæ³•è¯·æ±‚"></a>éæ³•è¯·æ±‚</h3><p>æ•…æ„ä½¿<code>user.name</code>è¶…è¿‡é•¿åº¦é™åˆ¶ã€‚è¯·æ±‚ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;adam williams&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">15</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pet&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cat&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;east wind&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>æœåŠ¡å™¨è¿”å›äº† 400 é”™è¯¯</p>
<p><img src="/en/MarkDownImages/image-20230705202748075.png" alt="image-20230705202748075"></p>
<p>æœåŠ¡ç«¯æŠ›å‡ºäº†<code>MethodArgumentNotValidException</code>çš„å¼‚å¸¸ã€‚å†…å®¹æ˜¯<code>user.name</code>ä¸ºéæ³•å‚æ•°ï¼ŒåŒæ—¶å±•ç¤ºäº†æˆ‘ä»¬è‡ªå·±è®¾ç½®çš„ <code>message</code></p>
<p><img src="/en/MarkDownImages/image-20230705202916086.png" alt="image-20230705202916086"></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡ä½¿ç”¨ Validation æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥ä¾¿æ·åœ°å®ç°è¯·æ±‚å‚æ•°æ ¡éªŒï¼Œæ— éœ€å†™å¾ˆå¤šä»£ç ã€‚</p>
<p>è¯•æƒ³ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼æ ¡éªŒè¯·æ±‚å‚æ•°ï¼Œå…‰æ˜¯æ ¡éªŒ <code>user.name</code>ï¼Œå°±éœ€è¦å†™å¾ˆå¤šä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> UserAndPet <span class="title function_">test</span><span class="params">(<span class="meta">@Validated</span> <span class="meta">@RequestBody</span> UserAndPet userAndPet)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (userAndPet == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (userAndPet.getUser() == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> userAndPet.getUser().getName();</span><br><span class="line">    <span class="keyword">if</span> (!(name != <span class="literal">null</span> &amp;&amp; name.length() &gt;= <span class="number">1</span> &amp;&amp; name.length() &lt;= <span class="number">5</span>)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ ¡éªŒå…¶ä»–è¯·æ±‚å‚æ•°</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œæ–¹ä¾¿å¿«æ·çš„ Validation æ³¨è§£æ ¡éªŒå»ºç«‹åœ¨ Spring MVC å’Œ Spring Boot çš„åŸºç¡€ä¸Šã€‚Spring Boot å…·ä½“è‡ªåŠ¨è£…é…äº†å“ªäº›ç±»ï¼ŒSpring MVC åˆæ˜¯å¦‚ä½•ä½¿ç”¨è¿™äº›ç±»å®Œæˆè¯·æ±‚å‚æ•°æ ¡éªŒï¼Œå°±ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´å†…äº†ã€‚æœ‰å…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡Œé˜…è¯»æºç ï¼Œæˆ–è€…é˜…è¯»å…¶ä»–æ–‡ç« ã€‚</p>
]]></content>
      <categories>
        <category>tech</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Spring Boot</tag>
        <tag>Spring MVC</tag>
        <tag>Controller</tag>
      </tags>
  </entry>
  <entry>
    <title>PotPlayer å¯ç”¨ Nvidia è¶…åˆ†è¾¨ç‡</title>
    <url>/en/2023/07/09/PotPlayer-%E5%90%AF%E7%94%A8-Nvidia-%E8%B6%85%E5%88%86%E8%BE%A8%E7%8E%87/</url>
    <content><![CDATA[<h1 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h1><p>Nvidia VSR (Video Super Resolution) é€šè¿‡ AI æŠ€æœ¯ä¼˜åŒ–è§†é¢‘çš„ç”»é¢è´¨é‡ï¼Œä¸»è¦è¡¨ç°åœ¨é”åŒ–ä½åˆ†è¾¨ç‡çš„è§†é¢‘ä¸Šã€‚è¯¥æŠ€æœ¯æœ€åˆåªæ”¯æŒ Chrome å’Œ Edge æµè§ˆå™¨ã€‚</p>
<p>å¦‚ä½•åœ¨æœ¬åœ°è§†é¢‘æ’­æ”¾å™¨ä¸­ä½“éªŒè¿™é¡¹æŠ€æœ¯ï¼ŸPotPlayer æœ€è¿‘å‘å¸ƒäº†ç›¸å…³æ›´æ–°ï¼Œæ”¯æŒäº†è¯¥æŠ€æœ¯ã€‚</p>
<p>PotPlayer æ˜¯ç›®å‰æ•°ä¸€æ•°äºŒçš„è§†é¢‘æ’­æ”¾å™¨ï¼Œä¹Ÿæ˜¯æˆ‘çš„ä¸»åŠ›æ’­æ”¾å™¨ã€‚è¶ç€è¿™æ¬¡æ›´æ–°ï¼Œæˆ‘æ¥è®°å½•ä¸€ä¸‹å¦‚ä½•åœ¨ PotPlayer ä¸Šä½¿ç”¨ Nvidia Super Resolution.</p>
<h1 id="æµè§ˆå™¨å¼€å¯-VSR"><a href="#æµè§ˆå™¨å¼€å¯-VSR" class="headerlink" title="æµè§ˆå™¨å¼€å¯ VSR"></a>æµè§ˆå™¨å¼€å¯ VSR</h1><p>æœ¬å°èŠ‚å…ˆä»‹ç»ä¸€ä¸‹å¦‚ä½•è®© Chrome å’Œ Edge æµè§ˆå™¨ä½¿ç”¨ Nvidia Super Resolutionã€‚</p>
<span id="more"></span>

<h2 id="æ›´æ–°é©±åŠ¨ç‰ˆæœ¬"><a href="#æ›´æ–°é©±åŠ¨ç‰ˆæœ¬" class="headerlink" title="æ›´æ–°é©±åŠ¨ç‰ˆæœ¬"></a>æ›´æ–°é©±åŠ¨ç‰ˆæœ¬</h2><p>æ›´æ–°é©±åŠ¨ç‰ˆæœ¬ï¼Œè‡³å°‘åˆ° 532 ç‰ˆ</p>
<img src="/MarkDownImages/image-20230709161546792.png" alt="image-20230709161546792" style="zoom: 67%;" />

<h2 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h2><p>åœ¨ Nvidia Control Panel ä¸­è¿›å…¥å¦‚ä¸‹é…ç½®ï¼š</p>
<p>å¼€å¯ã€è¶…åˆ†è¾¨ç‡ã€ï¼Œé€‰æ‹©è´¨é‡ã€‚æ•°å­—è¶Šå¤§ï¼Œå¢å¼ºæ•ˆæœè¶Šå¼ºï¼ŒåŒæ—¶å¯¹ GPU å‹åŠ›ä¹Ÿè¶Šå¤§</p>
<p><img src="/en/MarkDownImages/image-20230709161702760.png" alt="image-20230709161702760"></p>
<h1 id="PotPlayer-å¼€å¯-VSR"><a href="#PotPlayer-å¼€å¯-VSR" class="headerlink" title="PotPlayer å¼€å¯ VSR"></a>PotPlayer å¼€å¯ VSR</h1><h2 id="æ›´æ–°ç‰ˆæœ¬"><a href="#æ›´æ–°ç‰ˆæœ¬" class="headerlink" title="æ›´æ–°ç‰ˆæœ¬"></a>æ›´æ–°ç‰ˆæœ¬</h2><p>åœ¨ PotPlayer è¿‘æœŸçš„æ›´æ–°è¯´æ˜ä¸­ï¼Œæåˆ°äº†ï¼š</p>
<blockquote>
<p>æ·»åŠ  GPU è¶…åˆ†è¾¨ç‡åŠŸèƒ½åˆ°å†…ç½®çš„ D3D11 è§†é¢‘æ¸²æŸ“å™¨</p>
</blockquote>
<img src="/MarkDownImages/image-20230709162050531.png" alt="image-20230709162050531" style="zoom: 67%;" />

<p>è‡³å°‘å°† PotPlayer å‡çº§åˆ°è¿™ä¸ªç‰ˆæœ¬</p>
<h2 id="è®¾ç½®-1"><a href="#è®¾ç½®-1" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h2><p>ç¡®ä¿ä½¿ç”¨çš„æ˜¯ã€Direct3D 11 è§†é¢‘æ¸²æŸ“å™¨ã€ï¼Œå¹¶æ‰“å¼€ã€è¶…åˆ†è¾¨ç‡ã€ï¼ˆé»˜è®¤æ˜¯å…³é—­çš„ï¼‰</p>
<img src="/MarkDownImages/image-20230709162350077.png" alt="image-20230709162350077" style="zoom: 80%;" />

<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>éšä¾¿æ‰“å¼€ä¸€ä¸ªè§†é¢‘ï¼ŒæŒ‰ <code>Tab</code> é”®ã€‚å¦‚æœã€è§†é¢‘æ¸²æŸ“å™¨ - ç¼©æ”¾ã€æ˜¾ç¤ºçš„æ˜¯ã€GPU Super Resolutionã€ï¼Œåˆ™è¯´æ˜é…ç½®æˆåŠŸäº†ã€‚æ’­æ”¾è§†é¢‘æ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­çœ‹åˆ° GPU çš„è´Ÿè½½å‡é«˜ã€‚</p>
<p><img src="/en/MarkDownImages/image-20230709162617479.png" alt="image-20230709162617479"></p>
<h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><p><a href="https://blogs.nvidia.com/blog/2023/02/28/rtx-video-super-resolution/">Pixel Perfect: RTX Video Super Resolution Now Available for GeForce RTX 40 and 30 Series GPUs</a></p>
<p><a href="https://potplayer.daum.net/">PotPlayer å®˜ç½‘</a></p>
]]></content>
      <categories>
        <category>softwares</category>
        <category>PotPlayer</category>
      </categories>
      <tags>
        <tag>settings</tag>
        <tag>PotPlayer</tag>
        <tag>Nvidia</tag>
        <tag>VSR</tag>
      </tags>
  </entry>
  <entry>
    <title>VS Code Remote SSH å¯†é’¥ç™»å½•</title>
    <url>/en/2024/01/01/VS-Code-Remote-SSH-%E5%AF%86%E9%92%A5%E7%99%BB%E5%BD%95/</url>
    <content><![CDATA[<h1 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h1><p>VS Code çš„ Remote SSH æ’ä»¶æä¾›äº†è¿œç¨‹è¿æ¥å…¶ä»–ä¸»æœºçš„åŠŸèƒ½ã€‚è¿æ¥å°±éœ€è¦ç”¨æˆ·åå’Œå¯†ç ï¼Œè€Œå¯†é’¥å¯ä»¥åœ¨æ¯æ¬¡ç™»å½•æ—¶ä¸è¾“å…¥å¯†ç ã€ç›´æ¥ç™»å½•ã€‚</p>
<p>ä½†æ˜¯ï¼ŒVS Code å®é™…ä¸Šåªæ˜¯æä¾›äº† GUIï¼Œè€Œ SSH å¦‚ä½•ä½¿ç”¨å¯†é’¥ç™»å½•ï¼Œåˆ™æ˜¯å¦ä¸€ç äº‹ã€‚ä¸¤è€…ä¸åº”è¯¥æ··ä¸ºä¸€è°ˆã€‚</p>
<p>æœ¬æ–‡å°†ä¸»è¦è®²è§£ SSH å¯†é’¥åœ¨æœ¬æœºå’Œè¿œç¨‹æœºå™¨ä¸Šå¦‚ä½•é…ç½®ã€‚ä¹‹åï¼Œè®²è§£ VS Code Remote SSH æ’ä»¶çš„ä½¿ç”¨ã€‚</p>
<span id="more"></span>

<h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>æœ¬æœºï¼šWindows 10</li>
<li>è¿œç¨‹æœºå™¨ï¼šæœ¬åœ°è™šæ‹Ÿæœº CentOS 8ï¼Œroot ç”¨æˆ·</li>
</ul>
<h1 id="æœ¬æœº-SSH-é…ç½®"><a href="#æœ¬æœº-SSH-é…ç½®" class="headerlink" title="æœ¬æœº SSH é…ç½®"></a>æœ¬æœº SSH é…ç½®</h1><p>ä½¿ç”¨ <code>ssh-keygen</code> å‘½ä»¤ï¼Œä¼šåœ¨ <code>C:\users\&lt;user&gt;\.ssh</code> ç›®å½•ä¸‹åˆ›å»º<strong>æœ¬æœº</strong>çš„ RSA å…¬ç§é’¥ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\Elnino\.ssh&gt; <span class="built_in">dir</span></span><br><span class="line">    ç›®å½•: C:\Users\Elnino\.ssh</span><br><span class="line">Mode                 LastWriteTime         Length Name</span><br><span class="line"><span class="literal">----</span>                 <span class="literal">-------------</span>         <span class="literal">------</span> <span class="literal">----</span></span><br><span class="line"><span class="literal">-a----</span>          <span class="number">2024</span>/<span class="number">1</span>/<span class="number">1</span>     <span class="number">12</span>:<span class="number">26</span>             <span class="number">91</span> config</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2023</span>/<span class="number">9</span>/<span class="number">30</span>     <span class="number">18</span>:<span class="number">03</span>           <span class="number">2610</span> id_rsa</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2023</span>/<span class="number">9</span>/<span class="number">30</span>     <span class="number">18</span>:<span class="number">03</span>            <span class="number">576</span> id_rsa.pub</span><br><span class="line"><span class="literal">-a----</span>        <span class="number">2023</span>/<span class="number">12</span>/<span class="number">18</span>     <span class="number">20</span>:<span class="number">42</span>           <span class="number">1398</span> known_hosts</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2023</span>/<span class="number">9</span>/<span class="number">30</span>     <span class="number">18</span>:<span class="number">03</span>             <span class="number">92</span> known_hosts.old</span><br></pre></td></tr></table></figure>

<p><code>id_rsa</code> æ˜¯ç§é’¥ï¼Œ<code>id_rsa.pub</code> æ˜¯å…¬é’¥</p>
<h1 id="è¿œç¨‹ä¸»æœº-SSH-é…ç½®"><a href="#è¿œç¨‹ä¸»æœº-SSH-é…ç½®" class="headerlink" title="è¿œç¨‹ä¸»æœº SSH é…ç½®"></a>è¿œç¨‹ä¸»æœº SSH é…ç½®</h1><p>å°†<strong>æœ¬æœº</strong>çš„ <code>id_rsa.pub</code> ä¸Šä¼ åˆ° Linux è¿œç¨‹ä¸»æœºçš„ <code>~/ssh</code> ç›®å½•ï¼Œå¹¶æ”¹åä¸º <code>authorized_keys</code></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@CentOS100 .ssh]<span class="comment"># ll</span></span><br><span class="line">total 16</span><br><span class="line">-rw-r--r--. 1 root root 576 Jan  1 11:50 authorized_keys</span><br><span class="line">-rw-------. 1 root root 411 Jul  1  2023 id_ed25519</span><br><span class="line">-rw-r--r--. 1 root root  96 Jul  1  2023 id_ed25519.pub</span><br><span class="line">-rw-r--r--. 1 root root 880 Dec 18 21:07 known_hosts</span><br></pre></td></tr></table></figure>

<h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><p>ä»¥ä¸Šæ­¥éª¤ï¼Œå°±æ˜¯ SSH å¯†é’¥ç™»å½•çš„å…¨éƒ¨é…ç½®ã€‚</p>
<p>æ‰“å¼€æœ¬æœºçš„PowerShellï¼Œä½¿ç”¨ <code>ssh &lt;user&gt;@&lt;ip&gt;</code> æµ‹è¯•è¿æ¥ã€‚åº”è¯¥èƒ½å¤Ÿç›´æ¥ç™»å½•ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\Elnino&gt; ssh root@CentOS100</span><br><span class="line">Activate the web console with: systemctl enable <span class="literal">--now</span> cockpit.socket</span><br><span class="line"></span><br><span class="line">Last login: Mon Jan  <span class="number">1</span> <span class="number">12</span>:<span class="number">26</span>:<span class="number">15</span> <span class="number">2024</span> from &lt;ip&gt;</span><br><span class="line">[<span class="type">root</span>@<span class="type">CentOS100</span> ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<h1 id="VS-Code-é…ç½®"><a href="#VS-Code-é…ç½®" class="headerlink" title="VS Code é…ç½®"></a>VS Code é…ç½®</h1><ol>
<li><p>å®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh">Remote - SSH</a> æ’ä»¶ï¼š</p>
<p> <img src="/en/MarkDownImages/image-20240101130622357.png" alt="image-20240101130622357"></p>
</li>
<li><p>ä¾æ¬¡ç‚¹å‡»è¿™3ä¸ªæŒ‰é’®ï¼Œè¿›å…¥é…ç½®æ–‡ä»¶ï¼š</p>
<p> <img src="/en/MarkDownImages/image-20240101130733756.png" alt="image-20240101130733756"></p>
</li>
<li><p>å¡«å†™é…ç½®æ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å…¶å®æ˜¯ä¸»æœºçš„ SSH é…ç½®ï¼‰ï¼š</p>
<p> <img src="/en/MarkDownImages/image-20240101130804525.png" alt="image-20240101130804525"></p>
<ul>
<li><code>Host</code>ï¼šè¯†åˆ«è¿™ä¸ªè¿œç¨‹è¿æ¥çš„ Idï¼Œå¯ä»¥éšä¾¿èµ·ä¸ªåå­—ï¼›</li>
<li><code>HostName</code>ï¼šè¿œç¨‹ä¸»æœºçš„åŸŸåæˆ– IPï¼›</li>
<li><code>User</code>ï¼šç™»å½•è¿œç¨‹ä¸»æœºçš„ç”¨æˆ·ï¼›</li>
<li><code>IdentityFile</code>ï¼šå¯¹åº” <code>authorized_keys</code> çš„<strong>ç§é’¥</strong>çš„å­˜æ”¾ä½ç½®ï¼›</li>
</ul>
</li>
</ol>
<p>å…³äºé…ç½®æ–‡ä»¶çš„å‡ ç‚¹è¯´æ˜ï¼š</p>
<ul>
<li>å¦‚æœæ²¡æœ‰åœ¨è¿œç¨‹ä¸»æœºé…ç½® <code>authorized_keys</code> ï¼Œé‚£ä¹ˆ <code>IdentityFile</code> å±æ€§ä¸ä¼šèµ·ä½œç”¨ã€‚ç™»å½•æ—¶ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼›</li>
<li>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œ<code>IdentityFile</code> å…¶å®æ²¡å¿…è¦é…ç½®ã€‚å› ä¸º <code>authorized_keys</code> å°±æ˜¯æœ¬æœºçš„å…¬é’¥ï¼Œè€Œ SSH é»˜è®¤ä½¿ç”¨æœ¬æœºçš„ç§é’¥å°è¯•è¿æ¥ï¼›</li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<code>authorized_keys</code> ä¸ä¼šæ˜¯æœ¬æœºçš„å…¬é’¥ï¼Œæ­¤æ—¶ <code>IdentityFile</code> å¿…é¡»è¦é…ç½®ï¼Œå¦åˆ™å°±è¦è¾“å…¥å¯†ç ï¼›</li>
</ul>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><a href="https://medium.com/@sean4deepak/using-ssh-key-authentication-in-visual-studio-codes-remote-ssh-extension-4e5b922448e7">Using SSH Key Authentication in Visual Studio Codeâ€™ s Remote SSH Extension</a></li>
<li><a href="https://adamtheautomator.com/add-ssh-key-to-vs-code/">Add SSH Key to VS Code and Connect to a Host</a></li>
<li><a href="https://stackoverflow.com/questions/48328446/id-rsa-pub-file-ssh-error-invalid-format">id_rsa.pub file SSH Error: invalid format</a></li>
</ul>
]]></content>
      <categories>
        <category>softwares</category>
        <category>VS Code</category>
      </categories>
      <tags>
        <tag>settings</tag>
        <tag>VS Code</tag>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title>pip &amp; conda å¸¸ç”¨æŒ‡ä»¤</title>
    <url>/en/2024/01/14/pip-conda-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<h1 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h1><ol>
<li><p>å®‰è£… <code>script-house</code>ï¼Œç‰ˆæœ¬ä¸º <code>0.0.2</code></p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip install script-house==0.0.2</span><br></pre></td></tr></table></figure>

<p> å¦‚æœé»˜è®¤å®‰è£…æœ€æ–°ç‰ˆï¼Œåˆ™ä¸éœ€è¦å†™ <code>==0.0.2</code></p>
<p> æ‰€æœ‰è¦å®‰è£…çš„ä¾èµ–ä¹Ÿå¯ä»¥å†™åœ¨ä¸€è¡Œï¼š</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip install script-house==0.0.2 pydantic==2.5.3 pymongo==4.6.1</span><br></pre></td></tr></table></figure></li>
</ol>
<span id="more"></span>

<ol start="2">
<li><p>åˆ—å‡ºæ‰€æœ‰ä¾èµ–</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip list</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä»¥ <code>requirements.txt</code> çš„æ ¼å¼åˆ—å‡ºå½“å‰ä¾èµ–</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip freeze</span><br></pre></td></tr></table></figure>

<p> <code>pip freeze</code> çš„ç»“æœæ˜¯ <code>pip list</code> çš„å­é›†ã€‚<code>pip list</code> é€šå¸¸è¿˜åŒ…æ‹¬ <code>pip</code> ã€<code>setuptools</code> å’Œ <code>wheel</code> è¿™äº›åŸºç¡€ä¾èµ–ï¼›</p>
<p> <code>pip freeze</code> çš„ç›®çš„æ˜¯å¯¼å‡ºè¯¥é¡¹ç›®çš„ä¾èµ–ï¼Œæ–¹ä¾¿ä»–äººä½¿ç”¨ã€‚è€Œ <code>pip list</code> ä»…ä»…åªæ˜¯å±•ç¤ºã€‚</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä» <code>requirements.txt</code> ä¸­å®‰è£…æ‰€æœ‰ä¾èµ–</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤æŸä¸€ä¾èµ–</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip uninstall script-house</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤æŸäº›ä¾èµ–</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip uninstall -r req.txt -y</span><br></pre></td></tr></table></figure>

<p> <code>-y</code> è¡¨ç¤ºè‡ªåŠ¨ç¡®è®¤åˆ é™¤</p>
<p> å¦‚ä½•åˆ é™¤å½“å‰ç¯å¢ƒçš„æ‰€æœ‰ä¾èµ–ï¼Ÿ</p>
 <figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">pip freeze &gt; req</span><br><span class="line">pip uninstall <span class="literal">-r</span> req <span class="literal">-y</span></span><br><span class="line"><span class="built_in">del</span> req</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="conda"><a href="#conda" class="headerlink" title="conda"></a>conda</h1><ol>
<li><p>åœ¨ Linux å®‰è£…å¥½ condaï¼Œé€šå¸¸éœ€è¦å…ˆæ‰§è¡Œ  <code>conda init</code>ï¼Œæ‰èƒ½ä½¿ç”¨ conda å‘½ä»¤</p>
</li>
<li><p>åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒ</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">conda <span class="built_in">env</span> list</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»ºç¯å¢ƒ</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">conda create -n &lt;ç¯å¢ƒå&gt; python=3.8</span><br></pre></td></tr></table></figure>

<p> åŸºæœ¬å‘½ä»¤å°±æ˜¯ <code>conda create -n &lt;ç¯å¢ƒå&gt;</code>ï¼Œä½†é€šå¸¸è¦æŒ‡å®š python ç‰ˆæœ¬ã€‚ç›¸æ¯” venvï¼Œconda ç¯å¢ƒä¼šé¢å¤–å®‰è£… OS ç›¸å…³çš„ä¸€äº›åŸºç¡€ä¾èµ–ã€‚</p>
</li>
<li><p>è¿›å…¥ç¯å¢ƒ</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">conda activate &lt;ç¯å¢ƒå&gt;</span><br></pre></td></tr></table></figure>

<p> å¦‚æœæ˜¯ Windowsï¼Œä¸éœ€è¦å†™ <code>conda</code></p>
</li>
<li><p>é€€å‡ºç¯å¢ƒ</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">conda deactivate</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤ç¯å¢ƒ</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">conda remove -n &lt;ç¯å¢ƒå&gt; --all</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">conda info</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…ä¾èµ–</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">conda install pytorch==1.12.1 torchvision==0.13.1 torchaudio==0.12.1 -c pytorch -c conda-forge</span><br></pre></td></tr></table></figure>

<p> å’Œ pip ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ <code>ä¾èµ–==ç‰ˆæœ¬å·</code>çš„å½¢å¼ ï¼›<code>-c</code> å‚æ•°æ˜¯æŒ‡å®šä¸‹è½½æºï¼ˆchannelï¼‰ï¼Œå› ä¸ºé»˜è®¤ channel ç»å¸¸ä¼šæŸ¥æ‰¾å¤±è´¥</p>
</li>
<li><p>ä»é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸å« <code>environment.yml</code> ï¼‰ä¸­åˆ›å»ºç¯å¢ƒï¼š</p>
 <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">conda <span class="built_in">env</span> create -f environment.yml</span><br></pre></td></tr></table></figure>

<p> é…ç½®æ–‡ä»¶å†…å®¹ï¼š</p>
 <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">&lt;ç¯å¢ƒå&gt;</span></span><br><span class="line"><span class="attr">channels:</span> <span class="comment"># -c å‚æ•°ï¼ŒæŒ‡å®šä¸‹è½½æº</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pytorch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">conda-forge</span></span><br><span class="line"><span class="attr">dependencies:</span> <span class="comment"># dependencies é»˜è®¤ç”¨ conda install</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">python=3.8</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">numpy</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">pandas</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">matplotlib</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">pip:</span> <span class="comment"># ä¸‹é¢çš„ä¾èµ–ç”¨ pip install </span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">imageio</span></span><br></pre></td></tr></table></figure>

<p> æ ¹æ®ç»éªŒï¼Œä¸å»ºè®®é€šè¿‡è¿™ç§æ–¹å¼å®‰è£…ï¼Œå› ä¸º channel ä¸ä¸€å®šé è°±</p>
</li>
<li><p>å…³é—­è‡ªåŠ¨è¿›å…¥ base ç¯å¢ƒã€‚å¦‚æœå¼€å¯ï¼Œæ¯ä¸ªæ–°å»ºçš„ shell éƒ½ä¼šè‡ªåŠ¨è¿›å…¥ base ç¯å¢ƒã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>tech</category>
        <category>Python</category>
        <category>cheat sheet</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>pip</tag>
        <tag>conda</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ›æ‰£ 369 å‘¨èµ›æ€»ç»“</title>
    <url>/en/2023/10/29/%E5%8A%9B%E6%89%A3-369-%E5%91%A8%E8%B5%9B%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h1><blockquote>
<p><a href="https://leetcode.cn/contest/weekly-contest-369/">åŠ›æ‰£ç¬¬ 369 åœºå‘¨èµ›</a></p>
</blockquote>
<blockquote>
<p>æœ¬æ–‡åªæ˜¯å‘¨èµ›çš„æ€»ç»“ï¼Œæˆ‘ä¸å‡†å¤‡è¯¦ç»†åœ°è®¨è®ºæ¯ä¸€é“é¢˜ï¼Œåªä¼šç»™å‡ºå¤§è‡´æ€è·¯ã€‚é‡ç‚¹è¿˜æ˜¯åœ¨äºè‡ªå·±çš„æ€»ç»“ã€åæ€å’Œæé«˜ã€‚</p>
</blockquote>
<p>èµ›åæ¥çœ‹ï¼Œè¿™åœºæ¯”èµ›éš¾åº¦ä¸å¤§ã€‚åšé¢˜æƒ…å†µç®€è¦æè¿°ï¼š</p>
<ul>
<li>ç¬¬ä¸€é¢˜ï¼šç®€å•æ¨¡æ‹Ÿï¼Œé€åˆ†é¢˜ï¼›</li>
<li>ç¬¬äºŒé¢˜ï¼šéš¾åº¦ä¸å¤§ï¼Œä½†è¦è€ƒè™‘å¤šç§æƒ…å†µï¼Œæˆ‘æ²¡æœ‰é™ä¸‹å¿ƒæ¥ç»†æƒ³ï¼Œé€ æˆäº† 3 ä¸ª WA ğŸ˜’ï¼›</li>
<li>ç¬¬ä¸‰é¢˜ï¼šéš¾åº¦ä¸­ç­‰çš„ DPï¼Œä¸€å¼€å§‹æ²¡æœ‰æƒ³å‡ºæ¥ï¼Œè½¬è€Œå»åšæœ€ç»ˆæ²¡åšå‡ºæ¥çš„ç¬¬å››é¢˜ï¼Œæµªè´¹äº†æ—¶é—´ã€‚å¥½åœ¨åæ¥å¾ˆå¿«åšå‡ºæ¥äº†ğŸ˜‹ï¼›</li>
<li>ç¬¬å››é¢˜ï¼šè™½ç„¶æ˜¯å›°éš¾é¢˜ï¼Œå¹¶ä¸”æ²¡æœ‰åšå‡ºæ¥ï¼Œä½†æ¯”èµ›çš„ä»£ç æœ€ç»ˆä¹Ÿåªæ˜¯è¶…æ—¶ï¼Œèµ›åæˆ‘ä¹Ÿè‡ªå·±æƒ³å‡ºæ¥äº†ä¼˜åŒ–çš„æ–¹æ³•â€”â€”ä¸éš¾ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå†™ä»£ç æ—¶çš„é€»è¾‘æ··ä¹±è¿˜æ˜¯é€ æˆäº† 2 ä¸ª WA ğŸ˜’ï¼›</li>
</ul>
<span id="more"></span>

<h1 id="ä¸€ã€æ‰¾å‡ºæ•°ç»„ä¸­çš„-K-or-å€¼"><a href="#ä¸€ã€æ‰¾å‡ºæ•°ç»„ä¸­çš„-K-or-å€¼" class="headerlink" title="ä¸€ã€æ‰¾å‡ºæ•°ç»„ä¸­çš„ K-or å€¼"></a>ä¸€ã€<a href="https://leetcode.cn/problems/find-the-k-or-of-an-array/">æ‰¾å‡ºæ•°ç»„ä¸­çš„ K-or å€¼</a></h1><p><img src="/en/MarkDownImages/image-20231029195438014.png" alt="image-20231029195438014"></p>
<p><img src="/en/MarkDownImages/image-20231029195448237.png" alt="image-20231029195448237"></p>
<p><img src="/en/MarkDownImages/image-20231029195455078.png" alt="image-20231029195455078"></p>
<p>é¢˜ç›®æè¿°æœ‰ç‚¹éš¾æ‡‚ï¼Œæ¯”èµ›æ—¶éœ€è¦ç»“åˆç¤ºä¾‹æ‰èƒ½å¿«é€Ÿè¯»æ‡‚</p>
<p>é€æ¯”ç‰¹æ¨¡æ‹Ÿï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findKOr</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">32</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">val</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((num &amp; val) &gt; <span class="number">0</span>) count++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count &gt;= k)  &#123;</span><br><span class="line">                ans |= val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$</p>
<h1 id="äºŒã€æ•°ç»„çš„æœ€å°ç›¸ç­‰å’Œ"><a href="#äºŒã€æ•°ç»„çš„æœ€å°ç›¸ç­‰å’Œ" class="headerlink" title="äºŒã€æ•°ç»„çš„æœ€å°ç›¸ç­‰å’Œ"></a>äºŒã€<a href="https://leetcode.cn/problems/minimum-equal-sum-of-two-arrays-after-replacing-zeros/">æ•°ç»„çš„æœ€å°ç›¸ç­‰å’Œ</a></h1><p><img src="/en/MarkDownImages/image-20231029195518874.png" alt="image-20231029195518874"></p>
<p><img src="/en/MarkDownImages/image-20231029195534194.png" alt="image-20231029195534194"></p>
<ul>
<li>å¦‚æœ <code>nums1</code> ä¸­æœ‰ <code>k</code> ä¸ª <code>0</code>ï¼Œé‚£ä¹ˆå®ƒçš„å’Œåœ¨æ›¿æ¢åå¿…é¡»è¦å¢åŠ è‡³å°‘ <code>k</code></li>
<li>å¦‚æœ <code>nums1</code> ä¸­è‡³å°‘æœ‰ä¸€ä¸ª <code>0</code>ï¼Œé‚£ä¹ˆå®ƒåœ¨æ›¿æ¢åçš„å’Œå¯ä»¥ç­‰äºä»»æ„å¤§äº <code>sum(nums1)</code> çš„å€¼</li>
<li><code>nums2</code> åŒç†</li>
</ul>
<p>å‡½æ•°çš„è¿”å›ç±»å‹ä¸º <code>long</code>ï¼›æ•°ç»„é•¿åº¦æœ€å¤§ä¸º $10^5$ï¼Œå…ƒç´ æœ€å¤§ä¸º $10^6$ï¼Œæ•°ç»„å’Œæœ€å¤§ä¸º $10^{11}$ï¼Œè¶…è¿‡ 32-bit int çš„ä¸Šé™ã€‚è¿™æé†’æˆ‘ä»¬ä¸­é—´æ­¥éª¤çš„è®¡ç®—ç»“æœéœ€è¦ç”¨ <code>long</code> å­˜å‚¨ã€‚äº‹å®ä¸Šï¼Œç®—æ³•é¢˜åº”è¯¥éƒ½ç”¨ <code>long </code> ä»£æ›¿ <code>int</code>ï¼Œé¿å…æ•´æ•°æº¢å‡ºï¼Œå¹¶ä¸”å¼€é”€ä¹Ÿä¸å¤§ã€‚</p>
<p>é‡ç‚¹åœ¨äºåˆ¤æ–­æ— æ³•ç›¸ç­‰çš„æ¡ä»¶ï¼Œåœ¨è¿™ä¸Šé¢çš„å¤±è¯¯é€ æˆäº† 3 ä¸ª WAï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">minSum</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">sum1</span> <span class="operator">=</span> Arrays.stream(nums1).mapToLong(i -&gt; i).sum();</span><br><span class="line">        <span class="type">long</span> <span class="variable">sum2</span> <span class="operator">=</span> Arrays.stream(nums2).mapToLong(i -&gt; i).sum();</span><br><span class="line">        <span class="type">long</span> <span class="variable">c1</span> <span class="operator">=</span> Arrays.stream(nums1).filter(i -&gt; i == <span class="number">0</span>).count();</span><br><span class="line">        <span class="type">long</span> <span class="variable">c2</span> <span class="operator">=</span> Arrays.stream(nums2).filter(i -&gt; i == <span class="number">0</span>).count();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ— æ³•ç›¸ç­‰çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (sum1 &gt; sum2) &#123;</span><br><span class="line">            <span class="comment">// sum2 æ— æ³•å¢åŠ </span></span><br><span class="line">            <span class="keyword">if</span> (c2 == <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            <span class="comment">// sum1 æ— æ³•å¢åŠ ï¼Œsum2 æœ‰ c2 ä¸ª 0ï¼Œè‡³å°‘ä¼šå¢åŠ  c2</span></span><br><span class="line">            <span class="keyword">if</span> (c1 == <span class="number">0</span> &amp;&amp; c2 + sum2 &gt; sum1) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum1 == sum2) &#123;</span><br><span class="line">            <span class="comment">// sum1 æˆ– sum2 ä¸€æ–¹å¿…é¡»å¢åŠ ï¼Œä½†å¦ä¸€æ–¹ä¸ä¼šå˜</span></span><br><span class="line">            <span class="keyword">if</span> (c1 == <span class="number">0</span> &amp;&amp; c2 != <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (c1 != <span class="number">0</span> &amp;&amp; c2 == <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å’Œ sum1 &gt; sum2 çš„ä»£ç é€»è¾‘ä¸€è‡´</span></span><br><span class="line">            <span class="keyword">if</span> (c1 == <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (c2 == <span class="number">0</span> &amp;&amp; c1 + sum1 &gt; sum2) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.max(sum1 + c1, sum2 + c2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ä¸‰ã€ä½¿æ•°ç»„å˜ç¾çš„æœ€å°å¢é‡è¿ç®—æ•°"><a href="#ä¸‰ã€ä½¿æ•°ç»„å˜ç¾çš„æœ€å°å¢é‡è¿ç®—æ•°" class="headerlink" title="ä¸‰ã€ä½¿æ•°ç»„å˜ç¾çš„æœ€å°å¢é‡è¿ç®—æ•°"></a>ä¸‰ã€<a href="https://leetcode.cn/problems/minimum-increment-operations-to-make-array-beautiful/">ä½¿æ•°ç»„å˜ç¾çš„æœ€å°å¢é‡è¿ç®—æ•°</a></h1><p><img src="/en/MarkDownImages/image-20231029195556639.png" alt="image-20231029195556639"></p>
<p><img src="/en/MarkDownImages/image-20231029195611424.png" alt="image-20231029195611424"></p>
<p><img src="/en/MarkDownImages/image-20231029195617587.png" alt="image-20231029195617587"></p>
<blockquote>
<p>å¦‚æœæ•°ç»„ä¸­ä»»ä½•é•¿åº¦ <strong>å¤§äºæˆ–ç­‰äº 3</strong> çš„å­æ•°ç»„ï¼Œå…¶ <strong>æœ€å¤§</strong> å…ƒç´ éƒ½å¤§äºæˆ–ç­‰äº <code>k</code> ï¼Œåˆ™è®¤ä¸ºæ•°ç»„æ˜¯ä¸€ä¸ª <strong>ç¾ä¸½æ•°ç»„</strong> ã€‚</p>
</blockquote>
<p>ä¸Šè¿°æ¡ä»¶ç­‰ä»·äº <strong>æ¯ä¸ªé•¿åº¦ä¸º 3 çš„å­æ•°ç»„</strong> ä¸­çš„æœ€å¤§å…ƒç´ éƒ½ $\ge k$</p>
<p>å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡åœ°ä½¿æ¯ 3 ä¸ªè¿ç»­å…ƒç´ ä¸­ï¼Œæœ‰ä¸€ä¸ªå…ƒç´  $\ge k$ã€‚ä½†æ˜¯åº”è¯¥ä½¿å“ªäº›å…ƒç´ å¢åŠ åˆ° $k$ å‘¢ï¼Ÿä¸æ¸…æ¥šï¼Œé‚£å°±ç”¨ DP â€”â€” å±€éƒ¨æš´åŠ›è§£</p>
<p>1ï¸âƒ£DPå®šä¹‰ï¼š<code>dp[i]</code>ï¼šä½¿å¾— <strong><code>nums[0:i]</code></strong> ä¸ºç¾ä¸½æ•°ç»„ï¼Œå¹¶ä¸” <strong><code>nums[i]</code></strong> $\ge k$ çš„<strong>æœ€å°</strong>é€’å¢è¿ç®—æ•°ã€‚â€”â€” è¿™é‡Œæœ‰ 3 ä¸ªåŠ ç²—çš„é‡ç‚¹</p>
<p> <code>nums[i]</code> $\ge k$ï¼Œé‚£ä¹ˆ <code>nums[i - 2 : i]</code> è¿™ä¸ªé•¿åº¦ä¸º 3 çš„å­æ•°ç»„è‚¯å®šèƒ½è¢«è¦†ç›–ï¼Œæ»¡è¶³ç¾ä¸½æ•°ç»„çš„æ¡ä»¶ã€‚è¿™ä¸€è¦†ç›–åŒæ—¶è¡¨æ˜ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦ä¿è¯<code>nums[0:(i-3)]</code> æ˜¯ç¾ä¸½æ•°ç»„ï¼Œæ‰èƒ½ä½¿å¾— <code>nums[0:i]</code> æˆä¸ºç¾ä¸½æ•°ç»„ã€‚<code>dp[i - 3]</code>ã€<code>dp[i - 2]</code>ã€<code>dp[i - 1]</code> çš„ç»“æœéƒ½å¯ä»¥æ»¡è¶³è¿™ä¸€ç‚¹ï¼Œå–æœ€å°å€¼å€¼å³å¯ï¼š</p>
<p>2ï¸âƒ£é€’å½’å¼ï¼š$dp[i] &#x3D; \max\set{0,k-nums[i]} + \min\set{dp[i - 1], dp[i - 2], dp[i - 3]}$</p>
<p>3ï¸âƒ£ç­”æ¡ˆï¼š<code>dp[n - 3]</code>ã€<code>dp[n - 2]</code> å’Œ <code>dp[n - 1]</code> æŒ‰ç…§å®šä¹‰éƒ½å¯ä»¥ä½¿ <code>nums</code> æˆä¸ºç¾ä¸½æ•°ç»„ï¼Œå–ä¸‰è€…æœ€å°å€¼å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">minIncrementOperations</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">long</span>[] dp = <span class="keyword">new</span> <span class="title class_">long</span>[n];</span><br><span class="line">        <span class="comment">// base case</span></span><br><span class="line">        Arrays.fill(dp, Long.MAX_VALUE);</span><br><span class="line">        <span class="comment">// n &gt;= 3 ä¿è¯äº†åˆå§‹æ¡ä»¶ä¸éœ€è¦æ ¹æ® n åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        dp[<span class="number">0</span>] = Math.max(<span class="number">0</span>, k - nums[<span class="number">0</span>]);</span><br><span class="line">        dp[<span class="number">1</span>] = Math.max(<span class="number">0</span>, k - nums[<span class="number">1</span>]);</span><br><span class="line">        dp[<span class="number">2</span>] = Math.max(<span class="number">0</span>, k - nums[<span class="number">2</span>]);</span><br><span class="line">        <span class="comment">// recursively</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">v</span> <span class="operator">=</span> Math.max(<span class="number">0</span>, k - nums[i]);</span><br><span class="line">            dp[i] = Math.min(dp[i], dp[i - <span class="number">1</span>] + v);</span><br><span class="line">            dp[i] = Math.min(dp[i], dp[i - <span class="number">2</span>] + v);</span><br><span class="line">            dp[i] = Math.min(dp[i], dp[i - <span class="number">3</span>] + v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// answer</span></span><br><span class="line">        <span class="keyword">return</span> Math.min(dp[n - <span class="number">1</span>], Math.min(dp[n - <span class="number">2</span>], dp[n - <span class="number">3</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="å››ã€æ”¶é›†æ‰€æœ‰é‡‘å¸å¯è·å¾—çš„æœ€å¤§ç§¯åˆ†"><a href="#å››ã€æ”¶é›†æ‰€æœ‰é‡‘å¸å¯è·å¾—çš„æœ€å¤§ç§¯åˆ†" class="headerlink" title="å››ã€æ”¶é›†æ‰€æœ‰é‡‘å¸å¯è·å¾—çš„æœ€å¤§ç§¯åˆ†"></a>å››ã€<a href="https://leetcode.cn/problems/maximum-points-after-collecting-coins-from-all-nodes/">æ”¶é›†æ‰€æœ‰é‡‘å¸å¯è·å¾—çš„æœ€å¤§ç§¯åˆ†</a></h1><p><img src="/en/MarkDownImages/image-20231029195640792.png" alt="image-20231029195640792"></p>
<p><img src="/en/MarkDownImages/image-20231029195650693.png" alt="image-20231029195650693"></p>
<p><img src="/en/MarkDownImages/image-20231029195700814.png" alt="image-20231029195700814"></p>
<p>1ï¸âƒ£å»ºæ ‘ã€‚å…¶å®æ˜¯å»ºå›¾ï¼Œåªæ˜¯æˆ‘ä»¬è¦ä»èŠ‚ç‚¹ 0 å¼€å§‹ dfsï¼Œæ¨¡æ‹Ÿæ ‘éå†çš„è¿‡ç¨‹</p>
<p>2ï¸âƒ£æ”¶é›†é‡‘å¸çš„ä¸¤ä¸ªæ–¹æ¡ˆï¼ˆé¢˜ç›®æ•…æ„å†™å¾—å¤æ‚ï¼Œéœ€è¦åŒ–ç®€ï¼‰ï¼š</p>
<ul>
<li>æ–¹æ¡ˆ 1ï¼šå½“å‰æ”¶é›†åˆ°çš„é‡‘å¸åŠ ä¸Š <code>coins[i] - k</code> ï¼ˆæ— è®ºæ­£è´Ÿï¼‰</li>
<li>æ–¹æ¡ˆ 2ï¼š<code>floor(coins[i] / 2)</code> å°±æ˜¯æ•´æ•°é™¤æ³•ï¼Œéœ€è¦ç”¨ä½è¿ç®—ä¼˜åŒ–ï¼Œå³ <code>coins[i] &gt;&gt; 1</code>ã€‚ä½è¿ç®—è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå‡è®¾å½“å‰èŠ‚ç‚¹æœ‰ $k$ ä¸ªç¥–å…ˆèŠ‚ç‚¹é€‰æ‹©äº†æ–¹æ¡ˆ 2ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹çš„é‡‘å¸æ•°å°±æ˜¯ <code>coins[i] &gt;&gt; k</code>ï¼Œå…å»äº†è®¡ç®—å’Œé™¤ä»¥ $2^k$ çš„å¼€é”€ã€‚</li>
</ul>
<p>æ ¹æ®è¿™ä¸¤ä¸ªæ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä¸€ä¸ªå‰åºéå†çš„é€’å½’å‡½æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‰åºéå†ï¼Œæ”¶é›†é‡‘å¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> root å­æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> half å­æ ‘çš„ç¥–å…ˆèŠ‚ç‚¹é€‰æ‹©è¿‡å¤šå°‘æ¬¡æ–¹æ¡ˆ 2</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è¯¥å­æ ‘èƒ½å¤Ÿæ”¶é›†çš„æœ€å¤§é‡‘å¸æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">long</span> <span class="title function_">recur</span><span class="params">(Node root, <span class="type">long</span> half)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// node æ˜¯å›¾ä¸­çš„èŠ‚ç‚¹ï¼Œéå†éœ€è¦ visited æ•°ç»„è¾…åŠ©</span></span><br><span class="line">    <span class="comment">// å‰åºéå†æœ¬è´¨ä¸Šæ˜¯ dfs</span></span><br><span class="line">    visited[root.index] = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">// æ–¹æ¡ˆä¸€</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">res1</span> <span class="operator">=</span> (root.val &gt;&gt; half) - k;</span><br><span class="line">    <span class="keyword">for</span> (Node child : root.children) &#123;</span><br><span class="line">        <span class="keyword">if</span> (visited[child.index]) <span class="keyword">continue</span>;</span><br><span class="line">        res1 += recur(child, half);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ¡ˆäºŒ</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">res2</span> <span class="operator">=</span> (root.val &gt;&gt; (<span class="number">1</span> + half));</span><br><span class="line">    <span class="keyword">for</span> (Node child : root.children) &#123;</span><br><span class="line">        <span class="keyword">if</span> (visited[child.index]) <span class="keyword">continue</span>;</span><br><span class="line">        res2 += recur(child, half + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    visited[root.index] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> Math.max(res1, res2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ°è¿™ä¸€æ­¥ä¸ºæ­¢ï¼Œæˆ‘åœ¨æ¯”èµ›ä¸­éƒ½å†™äº†å‡ºæ¥ï¼Œä½†è¿˜æ˜¯è¶…æ—¶äº†ã€‚ä¹‹åï¼Œæˆ‘åˆæƒ³åˆ°äº†å¦‚ä¸‹çš„ä¼˜åŒ–æ€è·¯ï¼š</p>
<p>3ï¸âƒ£ $\forall i, coins[i] \le 10^4$ ï¼Œå¹¶ä¸” $\log_2(10^4) \approx 13.8$ ï¼Œå› æ­¤ï¼Œåªè¦å½“å‰å­æ ‘çš„ç¥–å…ˆèŠ‚ç‚¹é€‰æ‹©äº†è‡³å°‘ 14 æ¬¡æ–¹æ¡ˆ 2ï¼Œè¯¥å­æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹çš„é‡‘å¸æ•°éƒ½ä¼šä¸æ–­å‡åŠè‡³ 0</p>
<p>è¿™ç›¸å½“äºä¸€ä¸ªå‰ªæï¼Œåœ¨ <code>recur</code> å‡½æ•°å¼€å§‹å¤„åˆ¤æ–­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (half &gt;= <span class="number">14</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>4ï¸âƒ£è¯´åˆ°é€’å½’ï¼Œå°±æƒ³åˆ°åˆ†æ²»ç®—æ³•èŒƒå¼ï¼Œåˆä¼šè”æƒ³åˆ° DP ç®—æ³•èŒƒå¼ã€‚ä¸¤è€…çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” DP ä¼šå¤ç”¨å­é—®é¢˜çš„ç»“æœï¼Œå› æ­¤æ•ˆç‡æ›´é«˜ã€‚</p>
<p>å°½ç®¡éå†æ ‘çš„è¿‡ç¨‹æ²¡æ³•å†™æˆè¿­ä»£ï¼Œä½†æˆ‘ä»¬å¯ä»¥ç”¨ map æ¥ç¼“å­˜å­é—®é¢˜çš„ç»“æœï¼škey æ˜¯ <code>(nodes[i], half)</code>ï¼Œvalue æ˜¯æ”¶é›†åˆ°çš„é‡‘å¸æ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> HashMap&lt;Node, HashMap&lt;Long, Long&gt;&gt; dpMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">long</span> <span class="title function_">recur</span><span class="params">(Node root, <span class="type">long</span> half)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ç¼“å­˜ï¼ŒæŸ¥åˆ°å°±ç›´æ¥è¿”å›</span></span><br><span class="line">    HashMap&lt;Long, Long&gt; mp = dpMap.get(root);</span><br><span class="line">    <span class="keyword">if</span> (mp != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">ans</span> <span class="operator">=</span> mp.get(half);</span><br><span class="line">        <span class="keyword">if</span> (ans != <span class="literal">null</span>) <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ–¹æ¡ˆ 1 å’Œæ–¹æ¡ˆ 2 çš„ä»£ç ......</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ’å…¥ç¼“å­˜</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> Math.max(res1, res2);</span><br><span class="line">    dpMap.putIfAbsent(root, <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;());</span><br><span class="line">    dpMap.get(root).put(half, ans);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠ ä¸Šäº†è¿™ä¸¤æ­¥ä¼˜åŒ–ï¼ŒæˆåŠŸ AC äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.IntStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        List&lt;Node&gt; children = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> val;</span><br><span class="line">        <span class="type">int</span> index;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> val, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.val = val;</span><br><span class="line">            <span class="built_in">this</span>.index = index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> k;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span>[] visited;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximumPoints</span><span class="params">(<span class="type">int</span>[][] edges, <span class="type">int</span>[] coins, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.k = k;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> coins.length;</span><br><span class="line">        visited = <span class="keyword">new</span> <span class="title class_">boolean</span>[n];</span><br><span class="line">        Node[] nodes = IntStream.range(<span class="number">0</span>, n).mapToObj(i -&gt; <span class="keyword">new</span> <span class="title class_">Node</span>(coins[i], i)).toArray(Node[]::<span class="keyword">new</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] e : edges) &#123;</span><br><span class="line">            nodes[e[<span class="number">0</span>]].children.add(nodes[e[<span class="number">1</span>]]);</span><br><span class="line">            nodes[e[<span class="number">1</span>]].children.add(nodes[e[<span class="number">0</span>]]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) recur(nodes[<span class="number">0</span>], <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å½’ç»“æœç¼“å­˜ï¼Œé€šè¿‡ç¼“å­˜å°†åˆ†æ²»ç®—æ³•æ™‹å‡ä¸ºDPç®—æ³•ï¼Œæå‡æ•ˆç‡</span></span><br><span class="line"><span class="comment">     * &lt;node, &lt;half, result&gt;&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HashMap&lt;Node, HashMap&lt;Long, Long&gt;&gt; dpMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰åºéå†ï¼Œæ”¶é›†é‡‘å¸</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> root å­æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> half å­æ ‘çš„ç¥–å…ˆèŠ‚ç‚¹é€‰æ‹©è¿‡å¤šå°‘æ¬¡æ–¹æ¡ˆ 2</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¯¥å­æ ‘èƒ½å¤Ÿæ”¶é›†çš„æœ€å¤§é‡‘å¸æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="title function_">recur</span><span class="params">(Node root, <span class="type">long</span> half)</span> &#123;</span><br><span class="line">        <span class="comment">// coins[i] &lt;= 10^4 -&gt; log_2 (10^4) &lt; 14</span></span><br><span class="line">        <span class="keyword">if</span> (half &gt;= <span class="number">14</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢ç¼“å­˜ï¼ŒæŸ¥åˆ°å°±ç›´æ¥è¿”å›</span></span><br><span class="line">        HashMap&lt;Long, Long&gt; mp = dpMap.get(root);</span><br><span class="line">        <span class="keyword">if</span> (mp != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">ans</span> <span class="operator">=</span> mp.get(half);</span><br><span class="line">            <span class="keyword">if</span> (ans != <span class="literal">null</span>) <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// node æ˜¯å›¾ä¸­çš„èŠ‚ç‚¹ï¼Œéå†éœ€è¦ visited æ•°ç»„è¾…åŠ©</span></span><br><span class="line">        <span class="comment">// å‰åºéå†æœ¬è´¨ä¸Šæ˜¯ dfs</span></span><br><span class="line">        visited[root.index] = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// æ–¹æ¡ˆä¸€</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">res1</span> <span class="operator">=</span> (root.val &gt;&gt; half) - k;</span><br><span class="line">        <span class="keyword">for</span> (Node child : root.children) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visited[child.index]) <span class="keyword">continue</span>;</span><br><span class="line">            res1 += recur(child, half);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹æ¡ˆäºŒ</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">res2</span> <span class="operator">=</span> (root.val &gt;&gt; (<span class="number">1</span> + half));</span><br><span class="line">        <span class="keyword">for</span> (Node child : root.children) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visited[child.index]) <span class="keyword">continue</span>;</span><br><span class="line">            res2 += recur(child, half + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        visited[root.index] = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// æ’å…¥ç¼“å­˜</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> Math.max(res1, res2);</span><br><span class="line">        dpMap.putIfAbsent(root, <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;());</span><br><span class="line">        dpMap.get(root).put(half, ans);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
        <category>ç®—æ³•ç«èµ›</category>
      </categories>
      <tags>
        <tag>æ¨¡æ‹Ÿ</tag>
        <tag>ä½è¿ç®—</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
        <tag>æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®—æ³•é¢˜001ï¼šæ±‚æ•°ç»„å¯èƒ½çš„æœ€å¤§å¾—åˆ†</title>
    <url>/en/2023/09/21/%E7%AE%97%E6%B3%95%E9%A2%98001%EF%BC%9A%E6%B1%82%E6%95%B0%E7%BB%84%E5%8F%AF%E8%83%BD%E7%9A%84%E6%9C%80%E5%A4%A7%E5%BE%97%E5%88%86/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><blockquote>
<p> é¢˜ç›®æ¥æºï¼šç‰›å®¢ç¬”è¯•</p>
</blockquote>
<p>ç»™å®šä¸€ä¸ªä» $0$ å¼€å§‹çš„æ•°ç»„ $nums$ å’Œä¸€ä¸ªéè´Ÿæ•´æ•° $k$ã€‚</p>
<p>åœ¨ä¸€æ¬¡æ“ä½œä¸­ï¼Œä½ å¯ä»¥åšä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>é€‰æ‹©ä¸€ä¸ªä¹‹å‰æœªé€‰æ‹©è¿‡çš„ä¸‹æ ‡ $i$ï¼ŒèŒƒå›´ä¸º $[0, nums.length - 1]$ ã€‚</li>
<li>å°† $nums[i]$ æ›¿æ¢ä¸ºèŒƒå›´ $[nums[i] - k, nums[i] + k]$ å†…çš„ä»»æ„æ•´æ•°ï¼ˆåŒ…å«ä¸¤ç«¯ï¼‰ã€‚</li>
</ul>
<p>åœ¨åº”ç”¨ä»»æ„æ¬¡æ•°çš„æ“ä½œåï¼Œè¿”å›æ•°ç»„ $nums$ çš„æœ€å¤§å¯èƒ½åˆ†æ•°ã€‚</p>
<p>æ•°ç»„<strong>åˆ†æ•°</strong>æ˜¯â€œæ•°ç»„ä¸­æœ€å¤šçš„é‡å¤å…ƒç´ ä¸ªæ•°â€</p>
<p>æ³¨æ„ï¼Œä½ <strong>åªèƒ½</strong>å¯¹æ¯ä¸ªä¸‹æ ‡åº”ç”¨<strong>ä¸€æ¬¡</strong>æ“ä½œã€‚</p>
<span id="more"></span>



<h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h1><h2 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h2><p>è¾“å…¥ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>é€‰æ‹©ä¸‹æ ‡1ï¼Œå°†å…¶æ›¿æ¢ä¸º4ï¼ˆèŒƒå›´ä¸º[4, 8]ï¼‰ï¼Œnums &#x3D; [4,4,1,2]ã€‚</li>
<li>é€‰æ‹©ä¸‹æ ‡3ï¼Œå°†å…¶æ›¿æ¢ä¸º4ï¼ˆèŒƒå›´ä¸º[0, 4]ï¼‰ï¼Œnums &#x3D; [4,4,1,4]ã€‚</li>
</ul>
<p>åº”ç”¨è¿™äº›æ“ä½œåï¼Œæ•°ç»„ nums çš„å¾—åˆ†ä¸º3ï¼ˆç”±ä¸‹æ ‡ 0ã€1 å’Œ 3 ç»„æˆçš„å­åºåˆ—ï¼‰ã€‚å¯ä»¥è¯æ˜ï¼Œ3 æ˜¯æˆ‘ä»¬å¯ä»¥è¾¾åˆ°çš„æœ€å¤§å¯èƒ½é•¿åº¦ã€‚</p>
<h2 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h2><p>è¾“å…¥ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ— éœ€æ‰§è¡Œä»»ä½•æ“ä½œã€‚</p>
<p>æ•°ç»„numsçš„å¾—åˆ†æ˜¯4ï¼ˆæ•´ä¸ªæ•°ç»„ï¼‰ã€‚</p>
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><h2 id="é‡æ–°è¯»é¢˜"><a href="#é‡æ–°è¯»é¢˜" class="headerlink" title="é‡æ–°è¯»é¢˜"></a>é‡æ–°è¯»é¢˜</h2><p>é¢˜ç›®çš„è¡¨è¿°æœ‰ä¸€è‚¡æµ“é‡çš„æœºç¿»å‘³ï¼Œæˆ‘ä»¬ä¸å¦¨é‡æ–°è¡¨è¿°ä¸€ä¸‹ï¼š</p>
<p>ç»™å®šä¸€ä¸ªæ•°ç»„ $nums$ å’Œä¸€ä¸ªè‡ªç„¶æ•° $k$</p>
<p>å¯¹äºä»»æ„ä¸‹æ ‡ $i$ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯¥å…ƒç´  $nums[i]$ æ›¿æ¢ä¸º $[nums[i] - k, nums[i] + k]$ ä¸­çš„ä»»æ„æ•´æ•°ã€‚ä¸€ä¸ªä¸‹æ ‡åªèƒ½æ“ä½œä¸€æ¬¡ï¼Œä¹Ÿå¯ä»¥ä¸æ“ä½œã€‚</p>
<p>è¿”å›ä»»æ„æ¬¡æ“ä½œåï¼Œ$nums$ ä¸­æœ€å¤§å¯èƒ½çš„é‡å¤å…ƒç´ æ•°é‡ã€‚</p>
<h2 id="è§‚å¯Ÿ1ï¼šæ’åº"><a href="#è§‚å¯Ÿ1ï¼šæ’åº" class="headerlink" title="è§‚å¯Ÿ1ï¼šæ’åº"></a>è§‚å¯Ÿ1ï¼šæ’åº</h2><p>ä¸ºäº†å¾—åˆ°å°½å¯èƒ½å¤šçš„é‡å¤å…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦åœ°å°†<strong>å¤§å°æ¥è¿‘</strong>çš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œä½¿å®ƒä»¬çš„å€¼ç›¸ç­‰ã€‚</p>
<p>å¦‚ä½•æ‰¾å‡ºå¤§å°æ¥è¿‘çš„å…ƒç´ å‘¢ï¼Ÿâ€”â€” æ’åº</p>
<h2 id="è§‚å¯Ÿ2ï¼šæ‰¾è§„å¾‹"><a href="#è§‚å¯Ÿ2ï¼šæ‰¾è§„å¾‹" class="headerlink" title="è§‚å¯Ÿ2ï¼šæ‰¾è§„å¾‹"></a>è§‚å¯Ÿ2ï¼šæ‰¾è§„å¾‹</h2><p>å‡è®¾åœ¨æ’åºåï¼Œæˆ‘ä»¬è¯•å›¾ä½¿åŒºé—´ $[i, j]$å†…çš„å…ƒç´ åœ¨æ“ä½œåçš„å€¼ç›¸ç­‰ã€‚é‚£ä¹ˆæ­¤æ—¶ $i$ å’Œ $j$ éœ€è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶å‘¢ï¼Ÿ</p>
<ul>
<li>åœ¨æ’åºåï¼Œå·²çŸ¥ $nums[i] \le nums[i + 1] \le â€¦ \le nums[j - 1] \le nums[j]$</li>
<li>$nums[i]$ çš„æ›¿æ¢èŒƒå›´æ˜¯ $[nums[i] - k, nums[i] + k]$ ï¼›$nums[j]$ çš„æ›¿æ¢èŒƒå›´æ˜¯ $[nums[j] - k, nums[j] + k]$ </li>
<li>åˆ™ $nums[i] + k \ge nums[j] - k$</li>
<li>åŒ–ç®€ï¼Œå¾—åˆ°  <strong>$0 \le nums[j] - nums[i] \le 2k$</strong></li>
</ul>
<p>å¯ä»¥çœ‹å‡ºï¼Œå½“ $i$ å›ºå®šæ—¶ï¼Œä¸ºäº†å°½å¯èƒ½ä½¿åŒºé—´èŒƒå›´ $j - i + 1$ å˜å¤§ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ª $j$ ï¼Œä½¿å¾— $nums[j] - nums[i]$ å°½å¯èƒ½åœ°æ¥è¿‘ $2k$ã€‚æ­¤æ—¶çš„åŒºé—´èŒƒå›´ $j - i + 1$æ‰æœ‰å¯èƒ½æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆã€‚</p>
<h2 id="è§‚å¯Ÿ3ï¼šæ»‘åŠ¨çª—å£"><a href="#è§‚å¯Ÿ3ï¼šæ»‘åŠ¨çª—å£" class="headerlink" title="è§‚å¯Ÿ3ï¼šæ»‘åŠ¨çª—å£"></a>è§‚å¯Ÿ3ï¼šæ»‘åŠ¨çª—å£</h2><p>ç»è¿‡æˆ‘ä»¬çš„åˆ†æï¼Œè¿™é“é¢˜å˜æˆäº†ï¼š</p>
<ul>
<li>å¯¹äºä¸€ä¸ªæœ‰åºæ•°ç»„ $nums$ï¼Œå’Œä¸€ä¸ªè‡ªç„¶æ•° $k$</li>
<li>å½“ä¸‹æ ‡ $i$ å›ºå®šï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªå°½å¯èƒ½å¤§çš„ä¸‹æ ‡ $j$ï¼Œå¹¶ä¸”æ»¡è¶³ $0 \le nums[j] - nums[i] \le 2k$</li>
<li>åœ¨æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„åŒºé—´ $[i, j]$ ä¸­ï¼Œæœ€å¤§çš„ $j - i + 1$ å³ä¸ºç­”æ¡ˆ</li>
</ul>
<p>é‚£ä¹ˆï¼Œä½¿ç”¨<strong>æ»‘åŠ¨çª—å£</strong>ç®—æ³•èƒ½å¤Ÿå°†æš´åŠ›éå†çš„æ—¶é—´å¤æ‚åº¦ä» $O(n^2)$ é™ä½åˆ° $O(n)$</p>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximumScore</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line"></span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// sliding window</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (j &lt; n &amp;&amp; nums[j] &lt;= nums[i] + <span class="number">2</span> * k) j++;</span><br><span class="line">            ans = Math.max(ans, j - i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
      </categories>
      <tags>
        <tag>æ’åº</tag>
        <tag>æ»‘åŠ¨çª—å£</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ›æ‰£ 370 å‘¨èµ›æ€»ç»“</title>
    <url>/en/2023/11/05/%E5%8A%9B%E6%89%A3-370-%E5%91%A8%E8%B5%9B%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h1><blockquote>
<p><a href="https://leetcode.cn/contest/weekly-contest-370/">åŠ›æ‰£ç¬¬ 370 åœºå‘¨èµ›</a></p>
</blockquote>
<blockquote>
<p>æœ¬æ–‡åªæ˜¯å‘¨èµ›çš„æ€»ç»“ï¼Œæˆ‘ä¸å‡†å¤‡è¯¦ç»†åœ°è®¨è®ºæ¯ä¸€é“é¢˜ï¼Œæœ‰äº›é¢˜åªä¼šç»™å‡ºå¤§è‡´æ€è·¯ã€‚é‡ç‚¹è¿˜æ˜¯åœ¨äºè‡ªå·±çš„æ€»ç»“ã€åæ€å’Œæé«˜ã€‚</p>
</blockquote>
<p>23 åˆ†é’Ÿ AC å‰ä¸‰é¢˜ï¼Œä½¿å¾—æ’ååœ¨ä¸‰ç™¾å·¦å³ â€”â€” å…¸å‹çš„æ¯”æ‰‹é€Ÿç­–ç•¥ã€‚åšé¢˜æƒ…å†µç®€è¦æè¿°ï¼š</p>
<ul>
<li>ç¬¬ä¸€é¢˜ï¼šé€åˆ†é¢˜ï¼Œä½†æ˜¯æœ‰ç‚¹å¡ä½äº†ï¼ŒèŠ±äº† 5 åˆ†é’ŸğŸ˜’ï¼›</li>
<li>ç¬¬äºŒé¢˜ï¼šèƒŒæ™¯å’Œç¬¬ä¸€é¢˜ä¸€æ ·ï¼ŒåŒæ ·æ˜¯é€åˆ†é¢˜ï¼Œåšå¾—åè€Œæ›´å¿«ğŸ˜‹ï¼›</li>
<li>ç¬¬ä¸‰é¢˜ï¼šä¸€é“ç¬¦åˆéš¾åº¦çš„ä¸­ç­‰é¢˜ï¼Œéœ€è¦ç¨å¾®æƒ³ä¸€ä¸‹ï¼Œ15 åˆ†é’Ÿåšå‡ºæ¥ï¼Œä¸é”™ğŸ˜‹ï¼›</li>
<li>ç¬¬å››é¢˜ï¼šæ²¡åšå‡ºæ¥ã€‚å¦‚æœæ•°æ®è§„æ¨¡å°çš„è¯æ˜¯ä¸€é“ç®€å• dpï¼Œä½†æ²¡æœ‰ä¼˜åŒ–æ€è·¯ ğŸ˜’ï¼›</li>
</ul>
<span id="more"></span>



<h1 id="ä¸€ã€æ‰¾åˆ°å† å†›-I"><a href="#ä¸€ã€æ‰¾åˆ°å† å†›-I" class="headerlink" title="ä¸€ã€æ‰¾åˆ°å† å†› I"></a>ä¸€ã€<a href="https://leetcode.cn/problems/find-champion-i/">æ‰¾åˆ°å† å†› I</a></h1><p><img src="/en/MarkDownImages/image-20231105132950645.png" alt="image-20231105132950645"></p>
<p><img src="/en/MarkDownImages/image-20231105132958733.png" alt="image-20231105132958733"></p>
<p>â€œå¦‚æœä¸å­˜åœ¨æŸæ”¯å¼ºäº <code>a</code> é˜Ÿçš„é˜Ÿä¼ï¼Œåˆ™è®¤ä¸º <code>a</code> é˜Ÿå°†ä¼šæ˜¯ <strong>å† å†›</strong> â€ï¼Œå› æ­¤ä½¿ç”¨ <code>count[i]</code> è¡¨ç¤ºæ¯” <code>i</code> å¼ºçš„é˜Ÿä¼æ•°é‡ã€‚ä½¿å¾— $count[i] &#x3D; 0$ çš„ $i$ å³ä¸ºç­”æ¡ˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findChampion</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> grid.length;</span><br><span class="line">        <span class="type">int</span>[] count = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == j) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span>) count[j]++;</span><br><span class="line">                <span class="keyword">else</span> count[i]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (count[i] == <span class="number">0</span>) <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="äºŒã€æ‰¾åˆ°å† å†›-II"><a href="#äºŒã€æ‰¾åˆ°å† å†›-II" class="headerlink" title="äºŒã€æ‰¾åˆ°å† å†› II"></a>äºŒã€<a href="https://leetcode.cn/problems/find-champion-ii/">æ‰¾åˆ°å† å†› II</a></h1><p><img src="/en/MarkDownImages/image-20231105133352267.png" alt="image-20231105133352267"></p>
<p><img src="/en/MarkDownImages/image-20231105133528772.png" alt="image-20231105133528772"></p>
<p><img src="/en/MarkDownImages/image-20231105133540889.png" alt="image-20231105133540889"></p>
<p>ç”¨æœ‰å‘è¾¹è¡¨ç¤ºè°æ¯”è°å¼ºï¼Œæ˜æ˜¾æ¯”ç¬¬ä¸€é¢˜å¥½ç†è§£ã€‚è¾¹ $(a,b)$ è¡¨ç¤º $a$ æ¯” $b$ å¼ºï¼Œå› æ­¤é‚£äº›æœ€å¼ºçš„é˜Ÿä¼çš„å…¥åº¦ä¸º $0$ã€‚ç»Ÿè®¡å…¥åº¦å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findChampion</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span>[][] edges)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] inDeg = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡å…¥åº¦</span></span><br><span class="line">        Arrays.stream(edges).forEach(e -&gt; inDeg[e[<span class="number">1</span>]]++);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> Arrays.stream(inDeg).filter(i -&gt; i == <span class="number">0</span>).count();</span><br><span class="line">        <span class="comment">// éå”¯ä¸€</span></span><br><span class="line">        <span class="keyword">if</span> (count != <span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (inDeg[i] == <span class="number">0</span>) <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ä¸‰ã€åœ¨æ ‘ä¸Šæ‰§è¡Œæ“ä½œä»¥åå¾—åˆ°çš„æœ€å¤§åˆ†æ•°"><a href="#ä¸‰ã€åœ¨æ ‘ä¸Šæ‰§è¡Œæ“ä½œä»¥åå¾—åˆ°çš„æœ€å¤§åˆ†æ•°" class="headerlink" title="ä¸‰ã€åœ¨æ ‘ä¸Šæ‰§è¡Œæ“ä½œä»¥åå¾—åˆ°çš„æœ€å¤§åˆ†æ•°"></a>ä¸‰ã€<a href="https://leetcode.cn/problems/maximum-score-after-applying-operations-on-a-tree/">åœ¨æ ‘ä¸Šæ‰§è¡Œæ“ä½œä»¥åå¾—åˆ°çš„æœ€å¤§åˆ†æ•°</a></h1><p><img src="/en/MarkDownImages/image-20231105134014234.png" alt="image-20231105134014234"></p>
<p><img src="/en/MarkDownImages/image-20231105134359269.png" alt="image-20231105134359269"></p>
<p><img src="/en/MarkDownImages/image-20231105134415086.png" alt="image-20231105134415086"></p>
<p>$\forall i, values[i] \ge 1$ï¼Œå¹¶ä¸”â€œä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œåˆ°ä»»æ„å¶å­èŠ‚ç‚¹ç»è¿‡çš„è·¯å¾„ä¸Šçš„èŠ‚ç‚¹å€¼ä¹‹å’Œéƒ½ä¸ç­‰äº 0â€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œæ“ä½œæ—¶ï¼Œ<strong>æ¯æ¡ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„ä¸Šï¼Œéƒ½è¦ç•™ä¸€ä¸ªèŠ‚ç‚¹ä¸å»æ“ä½œ</strong>ã€‚ï¼ˆå¤šæ¡è·¯å¾„å¯èƒ½å…±ç”¨ä¸€ä¸ªä¸æ“ä½œçš„èŠ‚ç‚¹ï¼‰</p>
<p>ä»¤å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„é›†åˆæ˜¯ $V$ï¼Œæˆ‘ä»¬<strong>ä¸æ“ä½œ</strong>çš„èŠ‚ç‚¹çš„é›†åˆä¸º $U$ï¼Œåˆ™â€œå¯¹è¿™æ£µæ ‘æ‰§è¡Œä»»æ„æ¬¡æ“ä½œï¼Œä½†è¦æ±‚æ‰§è¡Œå®Œæ‰€æœ‰æ“ä½œä»¥åæ ‘æ˜¯ <strong>å¥åº·çš„</strong> â€ï¼Œå¾—åˆ°çš„åˆ†æ•°ä¸º $\sum\limits_{v\in V} v - \sum\limits_{u\in U}u$ã€‚$\sum\limits_{v\in V} v $ å³ä¸º <code>sum(values)</code>ï¼Œå› æ­¤ï¼Œä¸ºäº†ä½¿åˆ†æ•°æœ€å¤§ï¼Œæˆ‘ä»¬ä¸æ“ä½œçš„èŠ‚ç‚¹ä¹‹å’Œ $\sum\limits_{u\in U}u$ åº”è¯¥å°½å¯èƒ½åœ°å°ã€‚é‚£ä¹ˆï¼Œåº”è¯¥ä¸æ“ä½œå“ªäº›èŠ‚ç‚¹å‘¢ï¼Ÿ</p>
<p>å¯¹äºæ ‘çš„ä»»æ„ä¸€æ£µå­æ ‘ï¼Œæ¯”å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/en/MarkDownImages/image-20231105135510005.png" alt="image-20231105135510005"></p>
<p>å‡è®¾æˆ‘ä»¬ä¸æ“ä½œæ ¹èŠ‚ç‚¹ 0ï¼Œé‚£ä¹ˆå‰©ä½™çš„èŠ‚ç‚¹éƒ½å¯ä»¥æ“ä½œï¼›å‡è®¾æˆ‘ä»¬æ“ä½œäº†æ ¹èŠ‚ç‚¹ 0ï¼Œé‚£ä¹ˆå‰©ä½™çš„èŠ‚ç‚¹ä¸­å­˜åœ¨ä¸èƒ½æ“ä½œçš„èŠ‚ç‚¹ã€‚è¿™é‡Œçš„å‰©ä½™èŠ‚ç‚¹å¯èƒ½æ˜¯å¶èŠ‚ç‚¹ï¼Œä¹Ÿå¯èƒ½æ˜¯å¤šæ£µå­æ ‘ï¼Œæ— è®ºæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸å½±å“è¯¥ç»“è®ºã€‚</p>
<p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™æ“ä½œæ ¹èŠ‚ç‚¹ï¼Ÿå®šä¹‰ä¸€æ£µä»¥ $u$ ä¸ºæ ¹èŠ‚ç‚¹çš„<strong>å¥åº·çš„</strong>å­æ ‘ä¸­<strong>ä¸æ“ä½œ</strong>çš„èŠ‚ç‚¹çš„<strong>æœ€å°å’Œ</strong>ä¸º $res(u)$ï¼Œåˆ™ $\forall x, x$ æ˜¯ $u$ çš„å­èŠ‚ç‚¹, $res(u) &#x3D; \min\set{values[u], \sum\limits_x res(x)}$</p>
<p>è¯¥é€’å½’å¼çš„å«ä¹‰æ˜¯ï¼š</p>
<ul>
<li>è¦ä¹ˆä¸æ“ä½œæ ¹èŠ‚ç‚¹ $u$ï¼Œæ­¤æ—¶è¿™æ£µæ ‘æ˜¯å¥åº·çš„ï¼Œå‰©ä½™çš„æ‰€æœ‰å­èŠ‚ç‚¹éƒ½å¯ä»¥æ“ä½œï¼›</li>
<li>è¦ä¹ˆæ“ä½œæ ¹èŠ‚ç‚¹ $u$ï¼Œä½†æ˜¯ $u$ çš„æ‰€æœ‰å­æ ‘éƒ½éœ€è¦ä¿è¯è‡ªå·±æ˜¯å¥åº·çš„ï¼›</li>
<li>æ ¹æ®å®šä¹‰ï¼Œæˆ‘ä»¬è¦å¾—åˆ°<strong>æœ€å°å’Œ</strong>ï¼Œå› æ­¤å–ä¸¤è€…æƒ…å†µçš„è¾ƒå°å€¼ï¼›</li>
</ul>
<p>å¯¹äºä¸Šè¿°ä¾‹å­ï¼Œ$res(1) &#x3D; 2,res(2) &#x3D; 2,res(3) &#x3D; 5$</p>
<p>$values[0] &#x3D; 5 &lt; \sum\limits_{x\in\set{1,2,3}}res(x) &#x3D; 9$ï¼Œå› æ­¤ä¸æ“ä½œæ ¹èŠ‚ç‚¹ $0$ï¼Œè€Œæ“ä½œå…¶æ‰€æœ‰å­æ ‘ä¸­çš„èŠ‚ç‚¹ã€‚</p>
<p>æœ‰äº† $res(u)$ çš„é€’æ¨å¼ï¼Œä¸Šè¿° $\sum\limits_{u\in U}u$ çš„å€¼å°±æ˜¯ $res(0)$ï¼Œå› æ­¤ï¼Œæœ€å¤§åˆ†æ•°æ˜¯ <code>sum(values) - res(0)</code></p>
<p>ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.IntStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> val, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.val = val;</span><br><span class="line">            <span class="built_in">this</span>.index = index;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;Node&gt; children = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> val;</span><br><span class="line">        <span class="type">int</span> index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">maximumScoreAfterOperations</span><span class="params">(<span class="type">int</span>[][] edges, <span class="type">int</span>[] values)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> values.length;</span><br><span class="line">        <span class="comment">// å»ºæ ‘ï¼Œå®é™…ä¸Šæ˜¯å»ºå›¾</span></span><br><span class="line">        Node[] nodes = IntStream.range(<span class="number">0</span>, n).mapToObj(i -&gt; <span class="keyword">new</span> <span class="title class_">Node</span>(values[i], i)).toArray(Node[]::<span class="keyword">new</span>);</span><br><span class="line">        Arrays.stream(edges).forEach(e -&gt; &#123;</span><br><span class="line">            nodes[e[<span class="number">0</span>]].children.add(nodes[e[<span class="number">1</span>]]);</span><br><span class="line">            nodes[e[<span class="number">1</span>]].children.add(nodes[e[<span class="number">0</span>]]);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span>[] visited = <span class="keyword">new</span> <span class="title class_">boolean</span>[n];</span><br><span class="line">        visited[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// values[i] &lt;= 10^9ï¼Œæ³¨æ„ mapToLong</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> Arrays.stream(values).mapToLong(i -&gt; i).sum();</span><br><span class="line">        <span class="type">long</span> <span class="variable">min</span> <span class="operator">=</span> dfs(nodes[<span class="number">0</span>], visited);</span><br><span class="line">        <span class="keyword">return</span> sum - min;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> root æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> res(root)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="title function_">dfs</span><span class="params">(Node root, <span class="type">boolean</span>[] visited)</span> &#123;</span><br><span class="line">        <span class="comment">// count # visited neighbors</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// min = sum(res(children))</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">min</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Node child : root.children) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visited[child.index]) &#123;</span><br><span class="line">                count++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            visited[child.index] = <span class="literal">true</span>;</span><br><span class="line">            min += dfs(child, visited);</span><br><span class="line">            visited[child.index] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶è¯¥èŠ‚ç‚¹ä¸ºå¶èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›å®ƒçš„ val</span></span><br><span class="line">        <span class="keyword">if</span> (count == root.children.size()) &#123;</span><br><span class="line">            <span class="keyword">return</span> root.val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.min(root.val, min);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å››ã€å¹³è¡¡å­åºåˆ—çš„æœ€å¤§å’Œ"><a href="#å››ã€å¹³è¡¡å­åºåˆ—çš„æœ€å¤§å’Œ" class="headerlink" title="å››ã€å¹³è¡¡å­åºåˆ—çš„æœ€å¤§å’Œ"></a>å››ã€<a href="https://leetcode.cn/problems/maximum-balanced-subsequence-sum/">å¹³è¡¡å­åºåˆ—çš„æœ€å¤§å’Œ</a></h1><p><img src="/en/MarkDownImages/image-20231105162645031.png" alt="image-20231105162645031"></p>
<p><img src="/en/MarkDownImages/image-20231105162654150.png" alt="image-20231105162654150"></p>
<p>é‡æ–°è¯»é¢˜ï¼šå¹³è¡¡å­åºåˆ—ä¸­è¿ç»­çš„ä¸¤ä¸ªå…ƒç´  <code>nums[i]</code> å’Œ <code>nums[j]</code> éœ€è¦æ»¡è¶³ $i &lt; j$ ä¸” $nums[j] - nums[i] \ge j -i$</p>
<p>å¯¹ä¸Šè¿°ä¸ç­‰å¼ç§»é¡¹ï¼Œå¾—åˆ° $nums[j] - j \ge nums[i] - i$ â€”â€” å·¦å³ä¸¤è¾¹çš„å„é¡¹éƒ½åªå…³äºå…¶ä¸‹æ ‡ï¼Œè€Œä¸å…¶ä»–æ¡ä»¶æ— å…³</p>
<p>å› æ­¤ï¼Œè¿™é“é¢˜ç±»ä¼¼äºæœ€é•¿é€’å¢å­åºåˆ—ï¼Œç”¨ DP è§£å†³ï¼š</p>
<p>DP å®šä¹‰ï¼š<code>dp[j]</code> è¡¨ç¤ºä»¥ <code>nums[j]</code> <strong>ç»“å°¾</strong>çš„ <strong>å¹³è¡¡</strong> å­åºåˆ—é‡Œé¢çš„ <strong>æœ€å¤§å…ƒç´ å’Œ</strong> </p>
<p>é€’æ¨å¼ï¼š$dp[j] &#x3D; nums[j] + \max\set{dp[i] | (i &lt; j) âˆ§ (nums[j] - j \ge nums[i] - i)}$</p>
<p>ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">maxBalancedSubsequenceSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// dp[i]ï¼š ä»¥ nums[i] ç»“å°¾çš„å­åºåˆ—çš„æœ€å¤§å…ƒç´ å’Œ</span></span><br><span class="line">        <span class="type">long</span>[] dp = <span class="keyword">new</span> <span class="title class_">long</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            dp[j] = nums[j];</span><br><span class="line">            <span class="type">long</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; j; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[j] - j &gt;= nums[i] - i) &#123;</span><br><span class="line">                    max = Math.max(max, dp[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            dp[j] += max;</span><br><span class="line"></span><br><span class="line">            ans = Math.max(ans, dp[j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜åœ¨äºï¼Œè¿™ä¹ˆåšæ˜¾ç„¶æ˜¯ $O(n^2)$ çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ¯”èµ›æ—¶æˆ‘ä¹Ÿæ²¡æƒ³å‡ºå¦‚ä½•ä¼˜åŒ–ã€‚</p>
<p>æˆ‘å‡†å¤‡åœ¨ä¸‹ä¸€ç¯‡åšå®¢ä¸­è¯¦ç»†æè¿°å¦‚ä½•åšå‡ºè¿™é“é¢˜ï¼ˆåŸºäºå¤§ä½¬çš„é¢˜è§£ï¼‰ï¼Œç°åœ¨å…ˆè®©æˆ‘å»å­¦ä¹ ç›¸å…³çŸ¥è¯†ã€‚</p>
]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
        <category>ç®—æ³•ç«èµ›</category>
      </categories>
      <tags>
        <tag>æ¨¡æ‹Ÿ</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
        <tag>æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®—æ³•é¢˜002ï¼šèºæ—‹çŸ©é˜µ II</title>
    <url>/en/2023/10/03/%E7%AE%97%E6%B3%95%E9%A2%98002%EF%BC%9A%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5-II/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><blockquote>
<p>é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/spiral-matrix-ii/">59. èºæ—‹çŸ©é˜µ II</a></p>
</blockquote>
<p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° <code>n</code> ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å« <code>1</code> åˆ° <code>n^2</code> æ‰€æœ‰å…ƒç´ ï¼Œä¸”å…ƒç´ æŒ‰é¡ºæ—¶é’ˆé¡ºåºèºæ—‹æ’åˆ—çš„ <code>n x n</code> æ­£æ–¹å½¢çŸ©é˜µ <code>matrix</code> ã€‚</p>
<span id="more"></span>


<h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h1><h2 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹ 1"></a>ç¤ºä¾‹ 1</h2><p>è¾“å…¥ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<p><img src="/en/MarkDownImages/spiraln.jpg" alt="img"></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="punctuation">[</span><span class="number">8</span><span class="punctuation">,</span><span class="number">9</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="punctuation">[</span><span class="number">7</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h2 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹ 2"></a>ç¤ºä¾‹ 2</h2><p>è¾“å…¥ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>



<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>è¿™é“é¢˜æ˜¯ä¸€é“å…¸å‹çš„æ¨¡æ‹Ÿé¢˜ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§éå†æ•´ä¸ªçŸ©é˜µã€‚</p>
<h2 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯ 1"></a>æ€è·¯ 1</h2><p>æˆ‘è‡ªå·±çš„åšæ³•æ˜¯å°†çŸ©é˜µåˆ†å±‚ï¼ˆ<code>layer</code>ï¼‰ï¼Œä¸€å±‚ä¸€å±‚åœ°éå†ã€‚æ¯”å¦‚ï¼Œå½“ $n &#x3D; 3$ æ—¶ï¼ŒçŸ©é˜µä¸º</p>
<p> <img src="/en/MarkDownImages/spiraln.jpg" alt="img"></p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å®šä¹‰ç¬¬ä¸€å±‚ä¸º <code>layer = 0</code>ï¼ŒåŒ…å«æ•°å­— 1 - 8ï¼›ç¬¬äºŒå±‚ä¸º <code>layer = 1</code>ï¼ŒåŒ…å«æ•°å­— 9ï¼›</p>
<p>éå†æ¯ä¸€å±‚æ—¶ï¼Œä¾æ¬¡ç¼–å†™å‘å³ï¼ˆ1ã€2ï¼‰ã€å‘ä¸‹ï¼ˆ3ã€4ï¼‰ã€å‘å·¦ï¼ˆ5ã€6ï¼‰ã€å‘å³ï¼ˆ7ã€8ï¼‰çš„å¾ªç¯ä»£ç </p>
<p>è¿™ç§æ–¹æ³•çš„é‡ç‚¹åœ¨äºæ‰¾æ•°å­¦è§„å¾‹ï¼Œæ‰¾åˆ° <code>layer</code> å’Œå½“å‰éå†çš„æŸä¸€è¡Œ&#x2F;æŸä¸€åˆ—çš„å¤§å°å…³ç³»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] generateMatrix(<span class="type">int</span> n) &#123;</span><br><span class="line">        <span class="type">int</span>[][] ans = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">        <span class="type">int</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">layer</span> <span class="operator">=</span> <span class="number">0</span>; layer &lt;= n / <span class="number">2</span>; layer++) &#123;</span><br><span class="line">            <span class="comment">// å‘å³</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> layer; j &lt; n - layer - <span class="number">1</span>; ++j, ++counter) &#123;</span><br><span class="line">                ans[layer][j] = counter;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å‘ä¸‹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> layer; i &lt; n - layer - <span class="number">1</span>; ++i, ++counter) &#123;</span><br><span class="line">                ans[i][n - layer - <span class="number">1</span>] = counter;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å‘å·¦</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> n - layer - <span class="number">1</span>; j &gt; layer; --j, ++counter) &#123;</span><br><span class="line">                ans[n - layer - <span class="number">1</span>][j] = counter;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å‘ä¸Š</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - layer - <span class="number">1</span>; i &gt; layer; --i, ++counter) &#123;</span><br><span class="line">                ans[i][layer] = counter;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¯¹äºè¾¹é•¿ä¸ºå¥‡æ•°çš„æ–¹é˜µï¼Œä¸­å¿ƒå…ƒç´ éœ€è¦æ‰‹åŠ¨å¤„ç†</span></span><br><span class="line">        <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            ans[n / <span class="number">2</span>][n / <span class="number">2</span>] = counter;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜¾ç„¶ï¼Œè¿™ç§åšæ³•å¾ˆå®¹æ˜“é”™ï¼Œæ¯•ç«Ÿæ‰¾è§„å¾‹æŒºæ— èŠçš„ã€‚</strong></p>
<p>åŠ›æ‰£ä¸Šçš„å‡ ä½å¤§ä½¬ï¼Œæä¾›äº†ä¸€ç§ä¸éœ€è¦æ‰¾è§„å¾‹çš„è§£æ³•ï¼Œæ¯”å¦‚ <a href="https://leetcode.cn/problems/spiral-matrix-ii/solutions/12594/spiral-matrix-ii-mo-ni-fa-she-ding-bian-jie-qing-x/">Krahets çš„é¢˜è§£</a>ï¼šæ‰‹åŠ¨åœ°æ§åˆ¶ä¸Šä¸‹å·¦å³å››ä¸ªè¾¹ç•Œï¼Œå½“éå†åˆ°è¾¹ç•Œæ—¶ï¼Œå°±åˆ°å¤´äº†ï¼Œå‘ä¸‹ä¸€ä¸ªæ–¹å‘å¼€å§‹éå†ã€‚</p>
<h2 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯ 2"></a>æ€è·¯ 2</h2><p>ç”±äºæˆ‘ä»¬è¦ç”Ÿæˆä¸€ä¸ªçŸ©é˜µï¼ˆ<strong>éå¸¸è§„åˆ™</strong>çš„å›¾å½¢ï¼‰ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šä»<strong>å®è§‚</strong>çš„è§’åº¦æ§åˆ¶éå†ï¼Œå³æ€è·¯ 1ã€‚æ‰€è°“å®è§‚ï¼Œå³çŸ¥é“å…¨å±€ï¼Œå®ƒä½“ç°åœ¨æˆ‘çš„è§£æ³•çš„æ‰¾æ•°å­¦è§„å¾‹ï¼Œä¹Ÿä½“ç°åœ¨å¤§ä½¬çš„è§£æ³•çš„æ§åˆ¶å››ä¸ªè¾¹ç•Œã€‚</p>
<p>é‚£æˆ‘ä»¬ä¸å¦¨ä»<strong>å¾®è§‚</strong>è§’åº¦å‡ºå‘ï¼šå‡å¦‚æˆ‘ä»¬è‡ªå·±ç«™åœ¨ä¸€ä¸ª<strong>å·¨å¤§çš„ã€çœ‹ä¸åˆ°è¾¹ç•Œçš„</strong>æ£‹ç›˜ä¸Šï¼Œè¦å»å¡«å…¥è¿™äº›æ•°å­—ï¼Œæˆ‘ä»¬ä¼šæ€ä¹ˆå¡«ï¼Ÿæˆ‘ä»¬<strong>åªèƒ½çœ‹åˆ°å››å‘¨çš„æ ¼å­</strong>ä¸Šçš„æ•°å­—ã€‚æ­¤æ—¶ï¼Œå®è§‚çš„æ–¹æ³•ä¸å†å¥æ•ˆï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšï¼Ÿ</p>
<p><img src="/en/MarkDownImages/spiraln.jpg" alt="img"></p>
<p>å‡è®¾æˆ‘ä»¬ç«™åœ¨æ ¼å­ 1 ä¸Šï¼ˆé¢æœå³ï¼‰ï¼Œå¾€å‰èµ°ï¼Œè¾¹èµ°è¾¹å†™æ•°å­—ã€‚å½“èµ°åˆ°äº†æ ¼å­ 3ï¼Œå‘ç°å‰é¢æ— è·¯å¯èµ°ã€‚å› ä¸ºè¦é¡ºæ—¶é’ˆå¡«å…¥æ•°å­—ï¼Œæˆ‘ä»¬ä¸å¦¨å³æ‹ï¼ˆé¢æœä¸‹ï¼‰ï¼Œæ­¤æ—¶é¢å‘çš„æ ¼å­ï¼Œå°±æ˜¯è¦å¡«å…¥æ•°å­— 4 çš„æ ¼å­ã€‚</p>
<p>åŒç†ï¼Œå½“æˆ‘ä»¬èµ°åˆ°äº†æ ¼å­ 8ï¼ˆé¢æœä¸Šï¼‰ï¼Œæ­¤æ—¶å‰é¢çš„æ ¼å­å·²ç»å¡«å…¥äº†æ•°å­— 1ã€‚æˆ‘ä»¬å†æ¬¡å³æ‹ï¼ˆé¢æœå³ï¼‰ï¼Œæ­¤æ—¶é¢å‘çš„æ ¼å­ï¼Œå°±æ˜¯è¦å¡«å…¥æ•°å­— 9 çš„æ ¼å­ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸å¦¨<strong>åªå…³å¿ƒ agent å½“å‰çš„åæ ‡</strong>ï¼Œè®©ä»–<strong>è®¤å‡†ä¸€ä¸ªæ–¹å‘ä¸€ç›´èµ°</strong>ï¼Œç›´åˆ°é‡åˆ°è¾¹ç•Œã€æˆ–è€…å·²ç»å¡«å…¥äº†æ•°å­—ï¼Œ<strong>æ­¤æ—¶å³æ‹å³å¯</strong>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] generateMatrix(<span class="type">int</span> n) &#123;</span><br><span class="line">        <span class="type">int</span>[][] ans = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">        <span class="comment">// (dx[k], dy[k]) è¡¨ç¤ºç§»åŠ¨çš„æ–¹å‘ï¼ŒæŒ‰ç…§è½®è¯¢çš„é¡ºåºï¼Œä¾æ¬¡æ˜¯å‘å³ã€å‘ä¸‹ã€å‘å·¦ã€å‘ä¸Šã€å‘å³ ...</span></span><br><span class="line">        <span class="type">int</span>[] dx = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] dy = &#123;<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// (x, y) æ˜¯ agent çš„åæ ‡;</span></span><br><span class="line">        <span class="comment">// dir è¡¨ç¤ºå½“å‰ç§»åŠ¨çš„æ–¹å‘ï¼Œæ˜¯ dx, dy æ•°ç»„çš„ç´¢å¼•</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>, y = <span class="number">0</span>, dir = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å¾ªç¯å˜é‡ï¼Œä»¥åŠå¾ªç¯é€€å‡ºæ¡ä»¶</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="number">1</span>, limit = n * n;</span><br><span class="line">        <span class="keyword">while</span> (counter &lt;= limit) &#123;</span><br><span class="line">            <span class="comment">// å½“å‰åæ ‡åœ¨è¾¹ç•Œå†…ï¼ŒåŒæ—¶å½“å‰æ ¼å­æ²¡æœ‰å¡«å…¥æ•°å­—</span></span><br><span class="line">            <span class="keyword">while</span> (<span class="number">0</span> &lt;= x &amp;&amp; x &lt; n &amp;&amp; <span class="number">0</span> &lt;= y &amp;&amp; y &lt; n &amp;&amp; ans[x][y] == <span class="number">0</span>) &#123;</span><br><span class="line">                ans[x][y] = counter;</span><br><span class="line">                counter++;</span><br><span class="line">                <span class="comment">// ç»§ç»­èµ°</span></span><br><span class="line">                x += dx[dir];</span><br><span class="line">                y += dy[dir];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å›æ’¤ä¸€æ­¥</span></span><br><span class="line">            x -= dx[dir];</span><br><span class="line">            y -= dy[dir];</span><br><span class="line">            <span class="comment">// å‘å³è½¬</span></span><br><span class="line">            dir = (dir + <span class="number">1</span>) % dx.length;</span><br><span class="line">            <span class="comment">// å¾€å‰ä¸€æ­¥åï¼Œä½ç½® (x, y) å³ä¸ºä¸‹ä¸€è½® while å¾ªç¯è¦å¤„ç†çš„ç¬¬ä¸€ä¸ªæ ¼å­</span></span><br><span class="line">            x += dx[dir];</span><br><span class="line">            y += dy[dir];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h1><p>æˆ‘ä¼šæƒ³å‡ºæ€è·¯ 2ï¼Œæ˜¯å› ä¸ºæˆ‘æœ€è¿‘åšäº†ä¸€é“ç®—æ³•é¢˜ï¼Œå®ƒè¦æ±‚æˆ‘é¡ºæ—¶é’ˆåœ°ç»™ä¸€ä¸ªè¾¹é•¿ä¸º <code>n</code> çš„ç­‰è…°ç›´è§’ä¸‰è§’å½¢ï¼ˆç›´è§’è¾¹å¹³è¡Œäºåæ ‡è½´ï¼‰å¡«å…¥æ•°å­—ã€‚</p>
<p>æ¯”å¦‚ï¼Œå½“ <code>n = 4</code> æ—¶ï¼Œè¦æŒ‰å¦‚ä¸‹çš„æ–¹å¼å¡«å…¥æ•°å­—ï¼š</p>
<img src="/MarkDownImages/image-20231003171918667.png" alt="image-20231003171918667" style="zoom:67%;" />

<p>æŒ‰ç…§æ€è·¯ 1 çš„è§£æ³•ï¼Œä»å®è§‚å±‚é¢æ‰¾è§„å¾‹ï¼Œæˆ‘æ ¹æœ¬æ‡’å¾—æ‰¾ï¼Œæƒ³æƒ³å°±éº»çƒ¦ã€‚å¦‚æœæŒ‰ç…§å¤§ä½¬ä»¬çš„è¾¹ç•Œæ³•ï¼Œæ–œè¾¹éå†çš„ä»£ç ï¼ˆ $x + y \le k$ ï¼‰ï¼Œåˆä½•å°ä¸æ˜¯ä¸€ç§æ‰¾è§„å¾‹ï¼Ÿ</p>
<p>æŒ‰ç…§æ€è·¯ 2ï¼Œæ‰€è°“é¡ºæ—¶é’ˆï¼Œå…¶å®å°±æ˜¯è½®è¯¢è¿™å‡ ä¸ªæ–¹å‘ï¼šå‘ä¸Šã€å‘å³ä¸‹ã€å‘å·¦ã€‚é‚£ä¹ˆï¼Œåœ¨ä»£ç å±‚é¢å°±æ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] dx = &#123;-<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span>[] dy = &#123;<span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>æ”¹ä¸€æ”¹æ€è·¯ 2 çš„ä»£ç å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
      </categories>
      <tags>
        <tag>æ¨¡æ‹Ÿ</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®—æ³•é¢˜003ï¼šå¯¹è§’çº¿éå† II</title>
    <url>/en/2023/10/29/%E7%AE%97%E6%B3%95%E9%A2%98003%EF%BC%9A%E5%AF%B9%E8%A7%92%E7%BA%BF%E9%81%8D%E5%8E%86-II/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><blockquote>
<p>é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/diagonal-traverse-ii/">1424. å¯¹è§’çº¿éå† II</a></p>
</blockquote>
<p>ç»™ä½ ä¸€ä¸ªåˆ—è¡¨ <code>nums</code> ï¼Œé‡Œé¢æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæ•´æ•°åˆ—è¡¨ã€‚è¯·ä½ ä¾ç…§ä¸‹é¢å„å›¾çš„è§„åˆ™ï¼ŒæŒ‰é¡ºåºè¿”å› <code>nums</code> ä¸­å¯¹è§’çº¿ä¸Šçš„æ•´æ•°ã€‚</p>
<h2 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹ 1"></a>ç¤ºä¾‹ 1</h2><p><img src="/en/MarkDownImages/image-20231029115351760.png" alt="image-20231029115351760"></p>
<blockquote>
<p>è¾“å…¥ï¼šnums &#x3D; <code>[[1,2,3,4,5],[6,7],[8],[9,10,11],[12,13,14,15,16]]</code><br>è¾“å‡ºï¼š<code>[1,6,2,8,7,3,9,4,12,10,5,13,11,14,15,16]</code></p>
</blockquote>
<span id="more"></span>

<h2 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹ 2"></a>ç¤ºä¾‹ 2</h2><p><img src="/en/MarkDownImages/image-20231029115127660.png" alt="image-20231029115127660"></p>
<blockquote>
<p>è¾“å…¥ï¼šnums &#x3D; <code>[[1,2,3],[4,5,6],[7,8,9]]</code><br>è¾“å‡ºï¼š<code>[1,4,2,7,5,3,8,6,9]</code></p>
</blockquote>
<h2 id="ç¤ºä¾‹-3"><a href="#ç¤ºä¾‹-3" class="headerlink" title="ç¤ºä¾‹ 3"></a>ç¤ºä¾‹ 3</h2><blockquote>
<p>è¾“å…¥ï¼šnums &#x3D; <code>[[1,2,3],[4],[5,6,7],[8],[9,10,11]]</code><br>è¾“å‡ºï¼š<code>[1,4,2,5,3,8,6,9,7,10,11]</code></p>
</blockquote>
<h2 id="æ•°æ®èŒƒå›´"><a href="#æ•°æ®èŒƒå›´" class="headerlink" title="æ•°æ®èŒƒå›´"></a>æ•°æ®èŒƒå›´</h2><ul>
<li><code>1 &lt;= nums.length &lt;= 10^5</code></li>
<li><code>1 &lt;= nums[i].length &lt;= 10^5</code></li>
<li><code>1 &lt;= nums[i][j] &lt;= 10^9</code></li>
<li><code>nums</code> ä¸­æœ€å¤šæœ‰ <code>10^5</code> ä¸ªæ•°å­—ã€‚</li>
</ul>
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>å¯¹äºè‡ªç„¶æ•° $k \in \mathbb{N}$ï¼Œç¬¬ $k + 1$ æ¡å¯¹è§’çº¿ä¸Šçš„å…ƒç´ åæ ‡ä¸º $\set{(i,j) | i + j &#x3D; k}$ã€‚ä¾‹å¦‚ï¼Œå½“ $k &#x3D; 2$ æ—¶ï¼Œç¬¬ $3$ æ¡å¯¹è§’çº¿çš„å…ƒç´ åæ ‡æ˜¯ $\set{(0,2),(1,1),(2,0)}$</p>
<p>å¦‚æœ <code>nums</code> æ˜¯ä¸ªçŸ©é˜µï¼Œé‚£è¿™é¢˜æ˜¯ä¸€é“ç®€å•æ¨¡æ‹Ÿé¢˜ï¼ŒæŒ‰ç…§å¯¹è§’çº¿éå†å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(mn)$ã€‚</p>
<p>ä½†æ˜¯ï¼Œ<code>nums</code> çš„è¡Œæ•° $m \le 10^5$ï¼Œåˆ—æ•° $n \le 10^5$ï¼Œ$O(mn)$ çš„æ—¶é—´å¤æ‚åº¦ä¼šè¶…æ—¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸åº”è¯¥æŠŠ <code>nums</code> å½“ä½œä¸€ä¸ªçŸ©é˜µæ¥éå†ï¼Œå¦åˆ™ä¼šè®¿é—®å¤§é‡çš„ç©ºæ ¼å­ã€‚</p>
<p>è§‚å¯Ÿç¤ºä¾‹1ï¼š</p>
<p><img src="/en/MarkDownImages/image-20231029115351760.png" alt="image-20231029115351760"></p>
<p>è§‚å¯Ÿ1ï¸âƒ£ï¼šå¯¹äºä»»æ„çš„ $k \in \mathbb{N}$ï¼Œç¬¬ $k + 1$ æ¡å¯¹è§’çº¿çš„å…ƒç´ éå†é¡ºåºæ˜¯ä»å·¦ä¸‹åˆ°å³ä¸Šï¼Œå³ $(k, 0), (k - 1,1),\cdots,(0,k)$ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬è¦è·å¾—ç¬¬ $k + 1$ æ¡å¯¹è§’çº¿ä¸Šçš„å…ƒç´ ï¼Œæˆ‘ä»¬åº”è¯¥<strong>å€’åºéå†</strong> <code>nums</code> ä¸­æ¯ä¸€è¡Œçš„å¯¹åº”å…ƒç´ ã€‚</p>
<p>è§‚å¯Ÿ2ï¸âƒ£ï¼šæ˜“å¾—ï¼Œå¯¹äº<code>nums</code>ä¸­çš„æ¯ä¸€è¡Œ <code>nums[j]</code>ï¼Œå…¶ä¸­çš„å…ƒç´ éƒ½å±äºä¸åŒçš„å¯¹è§’çº¿ï¼Œå› æ­¤æ˜¯<strong>ç›¸äº’ç‹¬ç«‹</strong>çš„ã€‚</p>
<p>è§‚å¯Ÿ3ï¸âƒ£ï¼š<strong>å€’åºéå†</strong> <code>nums</code> ä¸­æ¯ä¸€è¡Œæ—¶ï¼š</p>
<ul>
<li>å¯¹äº<strong>æœ€åä¸€è¡Œ</strong>çš„å…ƒç´  $12,13,14,15,16$ï¼Œå®ƒä»¬éƒ½æ˜¯è‡ªå·±å¯¹è§’çº¿ä¸Šçš„<strong>ç¬¬ä¸€ä¸ª</strong>å…ƒç´ ï¼Œå°½ç®¡å 4 ä¸ªå…ƒç´ æ‰€å±çš„å¯¹è§’çº¿åœ¨ç¬¬ä¸€åˆ—ä¸Šä¸å­˜åœ¨å…ƒç´ ã€‚</li>
<li>å¯¹äº<strong>å€’æ•°ç¬¬äºŒè¡Œ</strong>çš„å…ƒç´  $9,10,11$ï¼Œå®ƒä»¬éƒ½æ˜¯æ‰€å±å¯¹è§’çº¿çš„<strong>ä¸‹ä¸€ä¸ª</strong>åº”è¯¥éå†çš„å…ƒç´ </li>
<li>ä»¥æ­¤ç±»æ¨â€¦â€¦</li>
</ul>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è¦æ”¶é›† <code>nums</code> ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œæ”¶é›†æ–¹å¼æ˜¯æŒ‰ç…§å¯¹è§’çº¿å…ƒç´ é¡ºåºæ”¶é›†ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä¸ºæ¯ä¸ªå¯¹è§’çº¿åˆ›å»ºä¸€ä¸ª listï¼Œå°†å¯¹åº”å…ƒç´ æ”¾å…¥è¯¥ list ä¸­ã€‚ç„¶åå†æ­£åºéå†æ¯ä¸ªå¯¹è§’çº¿ listï¼Œè·å¾—æœ€ç»ˆçš„ç»“æœã€‚å¦‚æœè¿™æ ·åšï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆåˆ›å»º <code>m + n - 1</code> ä¸ª listã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> nums.size();</span><br><span class="line"><span class="comment">// n ä¸ºæœ€å¤§åˆ—æ•°</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.stream().mapToInt(List::size).max().getAsInt();</span><br><span class="line"><span class="comment">// ans ä¸­å­˜æ”¾ m + n - 1 ä¸ª listï¼Œä»£è¡¨å„ä¸ªå¯¹è§’çº¿ä¸­éå†åˆ°çš„å…ƒç´ </span></span><br><span class="line">List&lt;List&lt;Integer&gt;&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">IntStream.range(<span class="number">0</span>, m + n - <span class="number">1</span>).forEach(i -&gt; ans.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¸å¿ƒï¼šå¦‚ä½•éå†ï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£åºæ”¶é›† ans ä¸­æ¯è¡Œçš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">return</span> ans.stream().flatMap(l -&gt; l.stream()).mapToInt(i -&gt; i).toArray();</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆå¦‚ä½•éå†å‘¢ï¼Ÿä¸ºäº†ä¸è¶…æ—¶ï¼Œè‚¯å®šæ˜¯æŒ‰ç…§è¡Œéå†ã€‚</p>
<ul>
<li>æ ¹æ®ã€è§‚å¯Ÿ1ï¸âƒ£ã€ï¼Œå€’åºéå† <code>nums</code> ï¼›</li>
<li>æ ¹æ®ã€è§‚å¯Ÿ2ï¸âƒ£ã€ï¼Œå¯¹äºæ¯ä¸€è¡Œï¼Œæ¯éå†åˆ°ä¸€ä¸ªå…ƒç´  <code>nums[i][j]</code>ï¼Œå°±æŠŠå®ƒæ”¾å…¥ç¬¬ $i+j + 1$ ä¸ª list ä¸­</li>
<li>æ ¹æ®ã€è§‚å¯Ÿ3ï¸âƒ£ã€ï¼Œä¸Šè¿°å…ƒç´  <code>nums[i][j]</code> åº”è¯¥æ·»åŠ åˆ°å¯¹åº” list æœ€åã€‚å› ä¸ºå‰ $n - i - 1$ è¡Œï¼ˆ$n -1,n - 2 ,\cdots, i + 1$ï¼‰ä¸­è¯¥å¯¹è§’çº¿ä¸Šçš„å…ƒç´ å·²ç»éå†è¿‡äº†ï¼Œå¹¶ä¸”å®ƒä»¬å·²ç»æŒ‰ç…§åŒæ ·çš„æ–¹æ³•ã€æœ‰åºå­˜æ”¾åœ¨è¯¥ list ä¸­äº†â€”â€” ä½¿ç”¨é€’å½’æˆ–è€…æ•°å­¦å½’çº³æ³•è¯æ˜</li>
</ul>
<p>ä»£ç æ˜¯ç®€å•çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å€’åºéå† nums</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> m - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    List&lt;Integer&gt; row = nums.get(i);</span><br><span class="line">    <span class="comment">// æ¯éå†åˆ°ä¸€ä¸ªå…ƒç´  nums[i][j]ï¼Œå°±æŠŠå®ƒæ”¾å…¥ç¬¬ i + j + 1 ä¸ª list ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; row.size(); j++) &#123;</span><br><span class="line">        ans.get(i + j).add(row.get(j));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ—¶é—´å¤æ‚åº¦æ˜¯ $O(m + n + \text{(nums å…ƒç´ ä¸ªæ•°)})$</p>
<p>ç©ºé—´å¤æ‚åº¦æ˜¯ $O(m+n)$</p>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] findDiagonalOrder(List&lt;List&lt;Integer&gt;&gt; nums) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> nums.size();</span><br><span class="line">        <span class="comment">// n ä¸ºæœ€å¤§åˆ—æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.stream().mapToInt(List::size).max().getAsInt();</span><br><span class="line">        <span class="comment">// ans ä¸­å­˜æ”¾ m + n - 1 ä¸ª listï¼Œä»£è¡¨å„ä¸ªå¯¹è§’çº¿ä¸­éå†åˆ°çš„å…ƒç´ </span></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        IntStream.range(<span class="number">0</span>, m + n - <span class="number">1</span>).forEach(i -&gt; ans.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å€’åºéå† nums</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> m - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            List&lt;Integer&gt; row = nums.get(i);</span><br><span class="line">            <span class="comment">// æ¯éå†åˆ°ä¸€ä¸ªå…ƒç´  nums[i][j]ï¼Œå°±æŠŠå®ƒæ”¾å…¥ç¬¬ i + j + 1 ä¸ª list ä¸­</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; row.size(); j++) &#123;</span><br><span class="line">                ans.get(i + j).add(row.get(j));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ­£åºæ”¶é›† ans ä¸­æ¯è¡Œçš„å…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> ans.stream().flatMap(l -&gt; l.stream()).mapToInt(i -&gt; i).toArray();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
      </categories>
      <tags>
        <tag>æ¨¡æ‹Ÿ</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®—æ³•é¢˜004ï¼šå‚åŠ ä¼šè®®çš„æœ€å¤šå‘˜å·¥æ•°</title>
    <url>/en/2023/11/01/%E7%AE%97%E6%B3%95%E9%A2%98004%EF%BC%9A%E5%8F%82%E5%8A%A0%E4%BC%9A%E8%AE%AE%E7%9A%84%E6%9C%80%E5%A4%9A%E5%91%98%E5%B7%A5%E6%95%B0/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><blockquote>
<p>é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/maximum-employees-to-be-invited-to-a-meeting/">2127. å‚åŠ ä¼šè®®çš„æœ€å¤šå‘˜å·¥æ•°</a>ï¼ˆæ¯æ—¥ä¸€é¢˜ï¼‰</p>
</blockquote>
<p>ä¸€ä¸ªå…¬å¸å‡†å¤‡ç»„ç»‡ä¸€åœºä¼šè®®ï¼Œé‚€è¯·åå•ä¸Šæœ‰ <code>n</code> ä½å‘˜å·¥ã€‚å…¬å¸å‡†å¤‡äº†ä¸€å¼  <strong>åœ†å½¢</strong> çš„æ¡Œå­ï¼Œå¯ä»¥åä¸‹ <strong>ä»»æ„æ•°ç›®</strong> çš„å‘˜å·¥ã€‚</p>
<p>å‘˜å·¥ç¼–å·ä¸º <code>0</code> åˆ° <code>n - 1</code> ã€‚æ¯ä½å‘˜å·¥éƒ½æœ‰ä¸€ä½ <strong>å–œæ¬¢</strong> çš„å‘˜å·¥ï¼Œæ¯ä½å‘˜å·¥ <strong>å½“ä¸”ä»…å½“</strong> ä»–è¢«å®‰æ’åœ¨å–œæ¬¢å‘˜å·¥çš„æ—è¾¹ï¼Œä»–æ‰ä¼šå‚åŠ ä¼šè®®ã€‚æ¯ä½å‘˜å·¥å–œæ¬¢çš„å‘˜å·¥ <strong>ä¸ä¼š</strong> æ˜¯ä»–è‡ªå·±ã€‚</p>
<p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» <strong>0</strong> å¼€å§‹çš„æ•´æ•°æ•°ç»„ <code>favorite</code> ï¼Œå…¶ä¸­ <code>favorite[i]</code> è¡¨ç¤ºç¬¬ <code>i</code> ä½å‘˜å·¥å–œæ¬¢çš„å‘˜å·¥ã€‚è¯·ä½ è¿”å›å‚åŠ ä¼šè®®çš„ <strong>æœ€å¤šå‘˜å·¥æ•°ç›®</strong> ã€‚</p>
<h2 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹ 1"></a>ç¤ºä¾‹ 1</h2><blockquote>
<p>è¾“å…¥ï¼šfavorite &#x3D; [2,2,1,2]<br>è¾“å‡ºï¼š3</p>
</blockquote>
<p><img src="/MarkDownImages/image-20231101114926490.png" alt="image-20231101114926490" style="zoom:65%;" /><img src="/MarkDownImages/image-20231101125447756-16988146128191.png" alt="image-20231101125447756" style="zoom:35%;" /></p>
<span id="more"></span>

<h2 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹ 2"></a>ç¤ºä¾‹ 2</h2><blockquote>
<p>è¾“å…¥ï¼šfavorite &#x3D; [1,2,0]<br>è¾“å‡ºï¼š3</p>
</blockquote>
<p><img src="/en/MarkDownImages/image-20231101115048286.png" alt="image-20231101115048286"></p>
<h2 id="ç¤ºä¾‹-3"><a href="#ç¤ºä¾‹-3" class="headerlink" title="ç¤ºä¾‹ 3"></a>ç¤ºä¾‹ 3</h2><blockquote>
<p>è¾“å…¥ï¼šfavorite &#x3D; [3,0,1,4,1]<br>è¾“å‡ºï¼š4</p>
</blockquote>
<p><img src="/MarkDownImages/image-20231101115200232.png" alt="image-20231101115200232" style="zoom:65%;" /><img src="/MarkDownImages/image-20231101125539019.png" alt="image-20231101125539019" style="zoom:33%;" /></p>
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>æ ¹æ® <code>favorite</code> çš„å®šä¹‰ï¼Œå¦‚æœå°†æ¯ä¸ªå‘˜å·¥è§†ä½œä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŒ‡å‘è‡ªå·±å–œæ¬¢çš„å‘˜å·¥ï¼Œé‚£ä¹ˆ $n$ æ¡è¾¹ã€$n$ ä¸ªèŠ‚ç‚¹ã€æ¯ä¸ªèŠ‚ç‚¹çš„å‡ºåº¦ä¸º $1$ ï¼Œè¿™å½¢æˆäº†ä¸€ä¸ª<strong>æœ‰å‘æœ‰ç¯å›¾</strong>ã€‚</p>
<p>è§‚å¯Ÿç¤ºä¾‹ 2 å’Œ ç¤ºä¾‹ 3ï¼Œå‚åŠ åœ†æ¡Œä¼šè®®çš„å‘˜å·¥ä¸€å®šå½¢æˆä¸€ä¸ªç¯ã€‚å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„å‡ºåº¦ä¸º $1$ï¼Œè¯¥å‘˜å·¥åˆå¿…é¡»ååœ¨è‡ªå·±å–œæ¬¢çš„å‘˜å·¥æ—ã€‚æ‰€ä»¥ï¼Œå‚åŠ ä¼šè®®çš„æœ€å¤šå‘˜å·¥æ•°ç›®ï¼Œç­‰äº<strong>æœ€å¤§ç¯çš„é•¿åº¦</strong>ã€‚ï¼ˆç»“è®º 1ï¸âƒ£ï¼‰</p>
<p>ç»“è®º 1ï¸âƒ£ä¹Ÿå¯ä»¥åè¿‡æ¥è®ºè¯ï¼š</p>
<p>è§‚å¯Ÿç¤ºä¾‹ 3ï¼ŒèŠ‚ç‚¹ 2 ä¸èƒ½å‚åŠ ä¼šè®®ï¼Œå› ä¸ºå°†è¯¥å‘˜å·¥æ’å…¥åœ†æ¡Œä»»ä¸€ä½ç½®åä¸ç¬¦åˆæ¡ä»¶â€”â€”å·²æœ‰çš„ç¯è¢«æ‰“ç ´äº†ã€‚ä¾‹å¦‚ï¼Œå°† 2 æ’å…¥ 0 å’Œ 1 ä¹‹é—´ï¼Œé‚£ä¹ˆ 1 çš„æ—è¾¹æ˜¯ 2 å’Œ 4ï¼Œéƒ½ä¸æ˜¯è‡ªå·±å–œæ¬¢çš„å‘˜å·¥ï¼Œæ¡ä»¶ä¸å†æˆç«‹ã€‚</p>
<p>æ‰€ä»¥ï¼Œé‚£äº›èƒ½å‚åŠ ä¼šè®®çš„å‘˜å·¥ç»„æˆçš„å›¾ï¼Œä¸€å®šæ˜¯ä¸€ä¸ªç¯ï¼Œä¸å¯èƒ½å†æœ‰å…¶ä»–èŠ‚ç‚¹é“¾ï¼ˆå•å‘é“¾è¡¨ï¼‰æŒ‡å‘ç¯ä¸­çš„æŸä¸ªèŠ‚ç‚¹ã€‚</p>
<p>å¦‚å›¾ï¼Œç­”æ¡ˆæ˜¯ $\set{0,1,2,3}$ï¼Œè€Œä¸å¯èƒ½åŒ…å« $\set{7,8}$ å’Œ $\set{4,5,6}$ã€‚</p>
<img src="/MarkDownImages/image-20231101132810263.png" alt="image-20231101132810263" style="zoom: 50%;" />

<p><strong>ä½†æ˜¯</strong>ï¼Œå¯¹äº<strong>é•¿åº¦ä¸º 2 çš„ç¯</strong>ï¼ˆäº’ç›¸æŒ‡å‘çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œåªè¦ä¸¤ä¸ªå‘˜å·¥ååœ¨ä¸€èµ·ï¼Œè¿™ä¸ªç¯å°±æ— æ³•è¢«æ‰“ç ´ã€‚å› æ­¤ï¼Œé•¿åº¦ä¸º 2 çš„ç¯éœ€è¦<strong>ç‰¹æ®Šå¤„ç†</strong>ã€‚è§‚å¯Ÿç¤ºä¾‹ 1ï¼ŒèŠ‚ç‚¹ 1 å’Œ 2 å½¢æˆç¯ï¼Œæ­¤æ—¶çš„åœ†æ¡Œå¯ä»¥å†è¿›å…¥ 1 äººã€‚</p>
<p>å†è§‚å¯Ÿå¦‚ä¸‹ç¤ºä¾‹ï¼š</p>
<img src="/MarkDownImages/image-20231101133700388.png" alt="image-20231101133700388" style="zoom:50%;" />

<p>èŠ‚ç‚¹ 0 å’Œ 1 å½¢æˆé•¿åº¦ä¸º 2 çš„ç¯ï¼ŒèŠ‚ç‚¹é“¾ $(3,2)$ æŒ‡å‘ 0ï¼ŒèŠ‚ç‚¹é“¾$(5,4),(6)$ æŒ‡å‘ 1ã€‚æœ€ç»ˆåœ†æ¡Œä¸Šçš„å‘˜å·¥æŒ‰é¡ºåºä¾æ¬¡ä¸ºï¼š$3,2,0,1,4,5$ã€‚å³<strong>ä»¥ç¯ä¸ºä¸­å¿ƒï¼Œé€‰æ‹©ç¯ä¸­ä¸¤ä¸ªèŠ‚ç‚¹å„è‡ªæœ€é•¿çš„èŠ‚ç‚¹é“¾åŠ å…¥ç»“æœé›†</strong>ã€‚ï¼ˆç»“è®º2ï¸âƒ£ï¼‰æ‰€ä»¥ï¼Œæˆ‘ä»¬é€‰æ‹© $(5,4)$ï¼Œè€Œä¸æ˜¯ $(6)$ã€‚</p>
<p>æ³¨æ„åˆ°ï¼Œè¿™ä¸ªå›¾å¯èƒ½åŒ…å«å¤šä¸ªè¿é€šåˆ†é‡ã€‚æˆ‘ä»¬éœ€è¦ä¿®æ­£ä¸Šè¿°ä¸¤ä¸ªç»“è®ºï¼š</p>
<ul>
<li>å¯¹äºé•¿åº¦å¤§äº 2 çš„ç¯ï¼Œæ•´ä¸ªåœ†æ¡Œå¿…é¡»å½’å…¶ä¸­çš„èŠ‚ç‚¹æ‰€æœ‰ï¼Œä¸å…è®¸å…¶å®ƒèŠ‚ç‚¹å‡ºç°ã€‚å› æ­¤ï¼Œå½“æœ‰å¤šä¸ªç¯æ—¶ï¼Œé€‰æ‹©é•¿åº¦æœ€å¤§çš„ä½œä¸ºç»“æœã€‚</li>
<li>å¯¹äºé•¿åº¦ç­‰äº 2 çš„ç¯ï¼Œâ€œæ¯ä½å‘˜å·¥å½“ä¸”ä»…å½“ä»–è¢«å®‰æ’åœ¨å–œæ¬¢å‘˜å·¥çš„æ—è¾¹ï¼Œä»–æ‰ä¼šå‚åŠ ä¼šè®®â€ï¼Œè¿™ä¸ªæ¡ä»¶çš„æˆç«‹ä»…ä»…ä¾èµ–äºç¯ï¼Œè€Œä¸ä¾èµ–äºç‹¬å åœ†æ¡Œã€‚å› æ­¤ï¼Œ<strong>æœ€ç»ˆçš„ç»“æœæ˜¯ç¬¦åˆã€ç»“è®º2ï¸âƒ£ã€çš„æ‰€æœ‰ç»“æœé›†çš„å¹¶é›†</strong>ã€‚ä¸€ä¸ªç»“æœé›†ä¸­çš„å‘˜å·¥åªè¦ååœ¨ä¸€èµ·ï¼Œ<strong>é‚£ä¹ˆæ‰€æœ‰çš„ç»“æœé›†å°±èƒ½åŒæ—¶å­˜åœ¨</strong>ã€‚</li>
</ul>
<p>è§‚å¯Ÿä¸‹é¢çš„ç¤ºä¾‹ï¼Œç­”æ¡ˆä¸ºä¸‰ä¸ªé•¿åº¦ä¸º 2 çš„ç¯å’Œå»¶ä¼¸å‡ºå»çš„èŠ‚ç‚¹é“¾ï¼Œæ€»å…± 8 ä¸ªèŠ‚ç‚¹ï¼›è€Œå‰©ä¸‹çš„è¿é€šåˆ†é‡ï¼Œæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 4 çš„ç¯ã€‚</p>
<img src="/MarkDownImages/image-20231101134045195.png" alt="image-20231101134045195" style="zoom: 50%;" />

<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><p>æ ¹æ®ä¸Šä¸€èŠ‚çš„æ¨è®ºï¼Œæˆ‘ä»¬åœ¨ä»£ç ä¸­éœ€è¦æ±‚å¾—å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>å„ä¸ªç¯çš„é•¿åº¦</li>
<li>é•¿åº¦ä¸º 2 çš„ç¯çš„æ¯ä¸ªèŠ‚ç‚¹çš„èŠ‚ç‚¹é“¾çš„æœ€å¤§é•¿åº¦</li>
</ul>
<h2 id="å¦‚ä½•æ‰¾åˆ°å›¾ä¸­çš„ç¯ï¼Ÿ"><a href="#å¦‚ä½•æ‰¾åˆ°å›¾ä¸­çš„ç¯ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ‰¾åˆ°å›¾ä¸­çš„ç¯ï¼Ÿ"></a>å¦‚ä½•æ‰¾åˆ°å›¾ä¸­çš„ç¯ï¼Ÿ</h2><p>æ‹“æ‰‘æ’åºã€‚å› ä¸ºè¿™æ˜¯åŒ…å« <strong>$n$ æ¡è¾¹ã€$n$ ä¸ªèŠ‚ç‚¹ã€æ¯ä¸ªèŠ‚ç‚¹çš„å‡ºåº¦ä¸º $1$</strong> çš„æœ‰å‘å›¾ï¼Œå› æ­¤æ‹“æ‰‘æ’åºè¿‡ç¨‹ä¸­æ— æ³•è¢«è®¿é—®çš„èŠ‚ç‚¹ä¸€å®šæ˜¯ç¯ä¸­çš„èŠ‚ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> favorite.length;</span><br><span class="line"><span class="type">int</span>[] inDegree = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">ArrayDeque&lt;Integer&gt; que = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line"><span class="type">boolean</span>[] visited = <span class="keyword">new</span> <span class="title class_">boolean</span>[n];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    inDegree[favorite[i]]++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (inDegree[i] == <span class="number">0</span>) &#123;</span><br><span class="line">        que.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!que.isEmpty()) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> que.pollFirst();</span><br><span class="line">    visited[cur] = <span class="literal">true</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">next</span> <span class="operator">=</span> favorite[cur];</span><br><span class="line"></span><br><span class="line">    inDegree[next]--;</span><br><span class="line">    <span class="keyword">if</span> (inDegree[next] == <span class="number">0</span>) &#123;</span><br><span class="line">        que.addLast(next);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ­¤æ—¶éå†å®Œäº†æ‰€æœ‰éç¯èŠ‚ç‚¹ï¼Œå¹¶å°†å®ƒä»¬æ ‡è®°ä¸º visited</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">maxCircleSize</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (visited[i]) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="comment">// circle æ”¶é›†å½“å‰ç¯ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line">    ArrayList&lt;Integer&gt; circle = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> i;</span><br><span class="line">    <span class="keyword">while</span> (!visited[cur]) &#123;</span><br><span class="line">        circle.add(cur);</span><br><span class="line">        visited[cur] = <span class="literal">true</span>;</span><br><span class="line">        cur = favorite[cur];</span><br><span class="line">    &#125;</span><br><span class="line">    maxCircleSize = Math.max(maxCircleSize, circle.size());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¦‚ä½•ç»Ÿè®¡èŠ‚ç‚¹é“¾ï¼Ÿ"><a href="#å¦‚ä½•ç»Ÿè®¡èŠ‚ç‚¹é“¾ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç»Ÿè®¡èŠ‚ç‚¹é“¾ï¼Ÿ"></a>å¦‚ä½•ç»Ÿè®¡èŠ‚ç‚¹é“¾ï¼Ÿ</h2><p>èŠ‚ç‚¹é“¾æ˜¯ä¸å±äºç¯çš„å•é“¾è¡¨ã€‚è¯¥é“¾è¡¨ä»ä¸€ä¸ªå…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹å¼€å§‹ï¼Œä»¥æŒ‡å‘ä¸€ä¸ªç¯ä¸­èŠ‚ç‚¹è€Œç»“æŸã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª <code>pathLen</code> æ•°ç»„ï¼Œ<code>pathLen[i]</code> è¡¨ç¤º<strong>æŒ‡å‘èŠ‚ç‚¹ <code>i</code> çš„æœ€é•¿èŠ‚ç‚¹é“¾çš„é•¿åº¦</strong></p>
<p>ç”±äºæ‹“æ‰‘æ’åºä¸æ–­åœ°éå†å½“å‰å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼Œå¦‚æœèŠ‚ç‚¹ a æŒ‡å‘ bï¼Œé‚£ä¹ˆ a ä¸€å®šå…ˆè¢«è®¿é—®ã€‚å¦‚æœ a çš„èŠ‚ç‚¹é“¾å·²ç»è®¡ç®—å®Œæ¯•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è®¡ç®— b çš„èŠ‚ç‚¹é“¾ï¼š</p>
<p>$pathLen[b] &#x3D; \max\limits_{(a,b)\in E}\set{1 + pathLen[a]}$</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æ‹“æ‰‘æ’åºçš„è¿‡ç¨‹ä¸­è®¡ç®— <code>pathLen</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹å€¼ä¸º 0</span></span><br><span class="line"><span class="type">int</span>[] pathLen = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!que.isEmpty()) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> que.pollFirst();</span><br><span class="line">    visited[cur] = <span class="literal">true</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">next</span> <span class="operator">=</span> favorite[cur];</span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œæ›´æ–° pathLen</span></span><br><span class="line">    pathLen[next] = Math.max(pathLen[next], pathLen[cur] + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    inDegree[next]--;</span><br><span class="line">    <span class="keyword">if</span> (inDegree[next] == <span class="number">0</span>) &#123;</span><br><span class="line">        que.addLast(next);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æœ€ç»ˆä»£ç "><a href="#æœ€ç»ˆä»£ç " class="headerlink" title="æœ€ç»ˆä»£ç "></a>æœ€ç»ˆä»£ç </h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayDeque;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximumInvitations</span><span class="params">(<span class="type">int</span>[] favorite)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> favorite.length;</span><br><span class="line">        <span class="type">int</span>[] inDegree = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="type">int</span>[] pathLen = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        ArrayDeque&lt;Integer&gt; que = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">        <span class="type">boolean</span>[] visited = <span class="keyword">new</span> <span class="title class_">boolean</span>[n];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹“æ‰‘æ’åº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            inDegree[favorite[i]]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (inDegree[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                que.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!que.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> que.pollFirst();</span><br><span class="line">            visited[cur] = <span class="literal">true</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">next</span> <span class="operator">=</span> favorite[cur];</span><br><span class="line">            pathLen[next] = Math.max(pathLen[next], pathLen[cur] + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            inDegree[next]--;</span><br><span class="line">            <span class="keyword">if</span> (inDegree[next] == <span class="number">0</span>) &#123;</span><br><span class="line">                que.addLast(next);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ‹“æ‰‘æ’åºå®Œæ¯•ï¼Œæ­¤æ—¶éå†å®Œäº†æ‰€æœ‰éç¯èŠ‚ç‚¹ï¼Œå¹¶å°†å®ƒä»¬æ ‡è®°ä¸º visited</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æœ€å¤§ç¯é•¿åº¦</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">maxCircleLength</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// ç¬¦åˆã€ç»“è®º2ï¸âƒ£ã€çš„æ‰€æœ‰ç»“æœé›†çš„å¹¶é›†çš„å¤§å°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">twoCirclePath</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¼€å§‹æ‰¾ç¯</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visited[i]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="comment">// circle æ”¶é›†å½“å‰ç¯ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line">            ArrayList&lt;Integer&gt; circle = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> i;</span><br><span class="line">            <span class="keyword">while</span> (!visited[cur]) &#123;</span><br><span class="line">                circle.add(cur);</span><br><span class="line">                visited[cur] = <span class="literal">true</span>;</span><br><span class="line">                cur = favorite[cur];</span><br><span class="line">            &#125;</span><br><span class="line">            maxCircleLength = Math.max(maxCircleLength, circle.size());</span><br><span class="line">            <span class="keyword">if</span> (circle.size() == <span class="number">2</span>) &#123;</span><br><span class="line">                twoCirclePath += pathLen[circle.get(<span class="number">0</span>)] + pathLen[circle.get(<span class="number">1</span>)] + <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.max(maxCircleLength, twoCirclePath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
      </categories>
      <tags>
        <tag>å›¾</tag>
        <tag>æ‹“æ‰‘æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title>Messages for reader</title>
    <url>/en/3000/01/01/%E7%BD%AE%E9%A1%B6%E9%80%9A%E7%9F%A5/</url>
    <content><![CDATA[<ul>
<li>Translation of posts is based on ChatGPT first, and then proofread by me. If there is any ambiguity, please refer to the Chinese version.</li>
<li>Visit the Chinese site <a href="/" onclick="jump()">here</a>, or click â€˜Switch to Chineseâ€™ at the left sidebar.</li>
</ul>
<script>
    function jump() {
        window.location.href = "https://el-nino2020.github.io?timestamp=" + (new Date()).getTime();
    }
</script>]]></content>
  </entry>
  <entry>
    <title>ç®—æ³•é¢˜005ï¼šå¹³è¡¡å­åºåˆ—çš„æœ€å¤§å’Œ</title>
    <url>/en/2023/11/06/%E7%AE%97%E6%B3%95%E9%A2%98005%EF%BC%9A%E5%B9%B3%E8%A1%A1%E5%AD%90%E5%BA%8F%E5%88%97%E7%9A%84%E6%9C%80%E5%A4%A7%E5%92%8C/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><blockquote>
<p>é¢˜ç›®æ¥æºï¼š<a href="https://leetcode.cn/problems/maximum-balanced-subsequence-sum/">2926. å¹³è¡¡å­åºåˆ—çš„æœ€å¤§å’Œ</a></p>
<p>æœ¬æ–‡æ˜¯å¯¹ <a href="/2023/11/05/%E5%8A%9B%E6%89%A3-370-%E5%91%A8%E8%B5%9B%E6%80%BB%E7%BB%93/">åŠ›æ‰£ç¬¬ 370 åœºå‘¨èµ›</a> æ²¡åšå‡ºæ¥çš„æœ€åä¸€é¢˜çš„é¢˜è§£çš„åˆ†æã€‚é¢˜è§£å‚è€ƒäº†<a href="https://leetcode.cn/problems/maximum-balanced-subsequence-sum/solutions/2513121/shu-zhuang-shu-zu-you-hua-dp-by-endlessc-3zf4/">çµèŒ¶å±±è‰¾åºœçš„æ–‡ç« </a>ã€‚</p>
</blockquote>
<p><img src="/en/MarkDownImages/image-20231105162645031.png" alt="image-20231105162645031"></p>
<span id="more"></span>

<p><img src="/en/MarkDownImages/image-20231105162654150.png" alt="image-20231105162654150"></p>
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><h2 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h2><p>é‡æ–°è¯»é¢˜ï¼šä¸€ä¸ªå¹³è¡¡å­åºåˆ—ä¸­è¿ç»­çš„ä¸¤ä¸ªå…ƒç´  <code>nums[i]</code> å’Œ <code>nums[j]</code> éœ€è¦æ»¡è¶³ $i &lt; j$ ä¸” $nums[j] - nums[i] \ge j -i$</p>
<p>å¯¹ä¸Šè¿°ä¸ç­‰å¼ç§»é¡¹ï¼Œå¾—åˆ° $nums[j] - j \ge nums[i] - i$</p>
<p>ä»¤ $b[i] &#x3D; nums[i] - i$ï¼Œåˆ™å¹³è¡¡å­åºåˆ—ä¸­æ¯ä¸ªå…ƒç´ éœ€è¦æ»¡è¶³çš„æ¡ä»¶åªå’Œè‡ªèº«ä¸‹æ ‡æœ‰å…³ã€‚</p>
<p>å› æ­¤ï¼Œè¿™é“é¢˜ç±»ä¼¼äºæœ€é•¿é€’å¢å­åºåˆ—ï¼Œç”¨ DP è§£å†³ï¼š</p>
<p>DP å®šä¹‰ï¼š<code>dp[j]</code> è¡¨ç¤ºä»¥ <code>nums[j]</code> <strong>ç»“å°¾</strong>çš„ <strong>å¹³è¡¡</strong> å­åºåˆ—é‡Œé¢çš„ <strong>æœ€å¤§å…ƒç´ å’Œ</strong> ã€‚</p>
<p>é€’æ¨å¼ï¼š$dp[j] &#x3D; nums[j] + \max\set{dp[i] | (i &lt; j) âˆ§ (b[j] \ge b[i]}$</p>
<p>ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.IntStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">maxBalancedSubsequenceSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="comment">// b[i] = nums[i] - i</span></span><br><span class="line">        <span class="type">int</span>[] b = IntStream.range(<span class="number">0</span>, n).map(i -&gt; nums[i] - i).toArray();</span><br><span class="line">        <span class="comment">// dp[i]ï¼š ä»¥ nums[i] ç»“å°¾çš„å­åºåˆ—çš„æœ€å¤§å…ƒç´ å’Œ</span></span><br><span class="line">        <span class="type">long</span>[] dp = <span class="keyword">new</span> <span class="title class_">long</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            dp[j] = nums[j];</span><br><span class="line">            <span class="type">long</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; j; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (b[j] &gt;= b[i])</span><br><span class="line">                    max = Math.max(max, dp[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            dp[j] += max;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Arrays.stream(dp).max().getAsLong();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¾ç„¶ï¼Œä¸¤å±‚å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$ï¼Œè‚¯å®šä¼šè¶…æ—¶ã€‚æˆ‘ä»¬åº”è¯¥å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ</p>
<h2 id="æ ‘çŠ¶æ•°ç»„-BIT"><a href="#æ ‘çŠ¶æ•°ç»„-BIT" class="headerlink" title="æ ‘çŠ¶æ•°ç»„ BIT"></a>æ ‘çŠ¶æ•°ç»„ BIT</h2><p>æ ¹æ®ä¸Šè¿°é€’æ¨å¼ï¼Œæˆ‘ä»¬çš„ä»£ç é€»è¾‘åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>å¯¹äºæ¯ä¸€ä¸ª $j$</li>
<li>éå†åŒºé—´ $[0, j)$ï¼Œæ‰¾åˆ°å…¶ä¸­ä½¿å¾— $b[j] \ge b[i]$ å¹¶ä¸” $dp[i]$ æœ€å¤§çš„ä¸‹æ ‡ $i$ â€”â€” åŒºé—´æŸ¥è¯¢æœ€å¤§å€¼</li>
<li>ä»¤ $dp[j] &#x3D; nums[j] + dp[i]$ â€”â€” å•ç‚¹æ›´æ–°</li>
</ul>
<p>æˆ‘ä»¬éœ€è¦è®© ã€åŒºé—´æŸ¥è¯¢ã€+ ã€å•ç‚¹æ›´æ–°ã€çš„æ—¶é—´å¤æ‚åº¦ä¸¥æ ¼å°äº $O(n)$ï¼Œè¿™æ ·æ‰ä¸ä¼šè¶…æ—¶ã€‚å“ªä¸€ç§ç°æœ‰çš„æ•°æ®ç»“æ„èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Ÿâ€”â€” æ ‘çŠ¶æ•°ç»„ï¼ˆBinary Index Treeï¼‰ã€‚</p>
<blockquote>
<p>æˆ‘æœ¬æ¥ä»¥ä¸º BIT åªé€‚åˆåŒºé—´æŸ¥è¯¢æ±‚å’Œï¼ˆå¯¹äºå·®åˆ†æ•°ç»„çš„ä¼˜åŒ–ï¼‰ï¼Œä½†è¿™é“é¢˜å‘Šè¯‰äº†æˆ‘ä»¬ï¼ŒåŒºé—´æŸ¥è¯¢çš„å¯¹è±¡å¯ä»¥æ‹“å±•åˆ°æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚</p>
</blockquote>
<p>BIT ä¸­å­˜æ”¾çš„æ˜¯ä»€ä¹ˆï¼Ÿ<code>&lt;b[j], dp[j]&gt;</code> çš„é”®å€¼å¯¹ï¼Œå³ <code>b[j]</code> æ˜¯ä¸‹æ ‡ï¼Œ<code>dp[j]</code> æ˜¯æ•°ç»„å…ƒç´ ã€‚æˆ‘ä»¬è¦æŸ¥è¯¢æ‰€æœ‰ä¸‹æ ‡ $\le b[j]$  çš„å…ƒç´ çš„æœ€å¤§å€¼ï¼Œå³å‰ç¼€åŒºé—´çš„æœ€å¤§å€¼ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.IntStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">BIT</span> &#123;</span><br><span class="line">        <span class="type">long</span>[] arr;</span><br><span class="line">        <span class="type">int</span> offset;</span><br><span class="line"></span><br><span class="line">        BIT(<span class="type">int</span> min, <span class="type">int</span> max) &#123;</span><br><span class="line">            <span class="comment">// å°†åŒºé—´ [min, max] ç§»åŠ¨åˆ°ä» 0 å¼€å§‹</span></span><br><span class="line">            offset = -min;</span><br><span class="line">            <span class="comment">// BIT çš„ä¸‹æ ‡ 0 å¿…é¡»ç•™ç©ºï¼Œå› æ­¤ä¸Šè¿°åŒºé—´ä» 1 å¼€å§‹</span></span><br><span class="line">            offset++;</span><br><span class="line">            arr = <span class="keyword">new</span> <span class="title class_">long</span>[max - min + <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="title function_">lsb</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> i &amp; -i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">setMax</span><span class="params">(<span class="type">int</span> i, <span class="type">long</span> val)</span> &#123;</span><br><span class="line">            i += offset;</span><br><span class="line">            <span class="comment">// ä¸‹æ ‡ i ä¼šå¯¹ä¹‹åæ‰€æœ‰åŒºé—´äº§ç”Ÿå½±å“ï¼Œå› æ­¤æ˜¯åŠ ä¸Š lsb</span></span><br><span class="line">            <span class="keyword">for</span> (; i &lt; arr.length; i += lsb(i)) &#123;</span><br><span class="line">                arr[i] = Math.max(arr[i], val);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="title function_">getMax</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">            i += offset;</span><br><span class="line">            <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line">            <span class="comment">// å‰ç¼€åŒºé—´ï¼Œå› æ­¤æ˜¯å‡å» lsb</span></span><br><span class="line">            <span class="keyword">for</span> (; i &gt; <span class="number">0</span>; i -= lsb(i)) &#123;</span><br><span class="line">                ans = Math.max(ans, arr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">maxBalancedSubsequenceSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="comment">// b[i] = nums[i] - i</span></span><br><span class="line">        <span class="type">int</span>[] b = IntStream.range(<span class="number">0</span>, n).map(i -&gt; nums[i] - i).toArray();</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> Arrays.stream(b).max().getAsInt();</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> Arrays.stream(b).min().getAsInt();</span><br><span class="line">        <span class="comment">// æ ¹æ® b ä¸­å…ƒç´ çš„èŒƒå›´å®šåˆ¶ BIT#arr çš„å¤§å°</span></span><br><span class="line">        <span class="type">BIT</span> <span class="variable">tree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BIT</span>(min, max);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="comment">// åŒºé—´æŸ¥è¯¢æœ€å¤§å€¼</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">dp_i</span> <span class="operator">=</span> Math.max(tree.getMax(b[j]), <span class="number">0</span>);</span><br><span class="line">            <span class="comment">// å•ç‚¹æ›´æ–°</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">dp_j</span> <span class="operator">=</span> dp_i + nums[j];</span><br><span class="line">            tree.setMax(b[j], dp_j);</span><br><span class="line"></span><br><span class="line">            ans = Math.max(ans, dp_j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æäº¤è¯¥ä»£ç ï¼š</p>
<p><img src="/en/MarkDownImages/image-20231106113338051.png" alt="image-20231106113338051"></p>
<p>æ³¨æ„é¢˜ç›®çš„æ•°æ®èŒƒå›´ï¼š$n \le 10^5$ ï¼Œ$nums[i] \in[-10^9,10^9]$</p>
<p>å› æ­¤ <code>b[i]</code> çš„å–å€¼èŒƒå›´çº¦ç­‰äº 32-bit æ•´å‹çš„å–å€¼èŒƒå›´ï¼Œå³ $2^{32}$ï¼Œè¿™æ˜¾ç„¶ä¼šåœ¨åˆ›å»º <code>BIT#arr</code> æ—¶å¯¼è‡´ OOMã€‚å¦‚ä½•ä¼˜åŒ–ç©ºé—´å‘¢ï¼Ÿ</p>
<h2 id="ç¦»æ•£åŒ–"><a href="#ç¦»æ•£åŒ–" class="headerlink" title="ç¦»æ•£åŒ–"></a>ç¦»æ•£åŒ–</h2><blockquote>
<p>å‚è€ƒ <a href="https://oi-wiki.org/misc/discrete/">OI-wiki</a> çš„æè¿°ï¼š</p>
<p>ç¦»æ•£åŒ–æ˜¯ä¸€ç§æ•°æ®å¤„ç†çš„æŠ€å·§ï¼Œæœ¬è´¨ä¸Šå¯ä»¥çœ‹æˆæ˜¯ä¸€ç§å“ˆå¸Œï¼Œå…¶ä¿è¯æ•°æ®åœ¨å“ˆå¸Œä»¥åä»ç„¶ä¿æŒåŸæ¥çš„å…¨&#x2F;ååºå…³ç³»ã€‚</p>
<p>é€šä¿—åœ°è®²å°±æ˜¯å½“<strong>æœ‰äº›æ•°æ®</strong>å› ä¸ºæœ¬èº«å¾ˆå¤§æˆ–è€…ç±»å‹ä¸æ”¯æŒï¼Œè‡ªèº«<strong>æ— æ³•ä½œä¸ºæ•°ç»„çš„ä¸‹æ ‡</strong>æ¥æ–¹ä¾¿åœ°å¤„ç†ï¼Œè€Œ<strong>å½±å“æœ€ç»ˆç»“æœçš„åªæœ‰å…ƒç´ ä¹‹é—´çš„ç›¸å¯¹å¤§å°å…³ç³»</strong>æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸæ¥çš„æ•°æ®<strong>æŒ‰ç…§æ’åæ¥å¤„ç†é—®é¢˜</strong>ï¼Œå³ç¦»æ•£åŒ–ã€‚</p>
</blockquote>
<p>ç»“åˆæœ¬é¢˜æ¥ç†è§£ï¼š</p>
<ul>
<li>æˆ‘ä»¬è¦æŸ¥è¯¢æ‰€æœ‰ä¸‹æ ‡ $\le b[j]$  çš„å…ƒç´ çš„æœ€å¤§å€¼ â€”â€” $b[j]$ æœ‰ $2^{32}$ ä¸ªå¯èƒ½å–å€¼ã€‚</li>
<li>è€Œæ•°ç»„ <code>b</code> åªæœ‰ <code>n</code> ä¸ªå…ƒç´ ã€‚</li>
<li>å‡è®¾ <code>b[j]</code> åœ¨æ’åºåæ˜¯ç¬¬ $k$ å°çš„å…ƒç´ ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æŸ¥è¯¢å‰ $k - 1$ ä¸ªæ¯” <code>b[j]</code> å°çš„å…ƒç´ ä¸­çš„æœ€å¤§å€¼ã€‚</li>
<li>å› æ­¤ï¼Œ<code>BIT#arr</code> çš„é•¿åº¦ä¹Ÿæ˜¯ <code>n</code> ï¼Œä¸” $n \ll 2^{32}$ã€‚</li>
<li>å‡è®¾æˆ‘ä»¬çŸ¥é“ <code>b[j]</code> åœ¨æ’åºåçš„ä¸‹æ ‡ <code>k</code>ï¼Œé‚£ä¹ˆã€æŸ¥è¯¢æ‰€æœ‰ä¸‹æ ‡ $\le b[j]$  çš„å…ƒç´ çš„æœ€å¤§å€¼ã€å°±ç­‰ä»·äº <code>getMax(k)</code>ã€‚</li>
</ul>
<blockquote>
<p>ä»ç»“æœä¸Šæ¥çœ‹ï¼Œã€ç¦»æ•£åŒ–ã€åº”è¯¥å«åšã€å½’ä¸€åŒ–ã€æ›´åˆé€‚ï¼ŸğŸ¤”</p>
</blockquote>
<p>ç¦»æ•£åŒ–çš„è¿‡ç¨‹ä¹Ÿæ˜¯å…¸å‹çš„æ¨¡æ¿ï¼ŒèƒŒå‡ºæ¥å°±è¡Œäº†ï¼š</p>
<blockquote>
<ol>
<li>åˆ›å»ºåŸæ•°ç»„çš„å‰¯æœ¬ã€‚</li>
<li>å°†å‰¯æœ¬ä¸­çš„å€¼ä»å°åˆ°å¤§æ’åºã€‚</li>
<li>å°†æ’åºå¥½çš„å‰¯æœ¬å»é‡ã€‚</li>
<li>æŸ¥æ‰¾åŸæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ åœ¨å‰¯æœ¬ä¸­çš„ä½ç½®ï¼Œä½ç½®å³ä¸ºæ’åï¼Œå°†å…¶ä½œä¸ºç¦»æ•£åŒ–åçš„å€¼ã€‚</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> ans[i] è¡¨ç¤º b[i] åœ¨æ’åºåæ˜¯ç¬¬å‡ å°çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] discretize(<span class="type">int</span>[] b) &#123;</span><br><span class="line">    <span class="type">int</span>[] arr = Arrays.stream(b).sorted().distinct().toArray();</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> b.length;</span><br><span class="line">    <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="comment">// b[i] ä¸€å®šå­˜åœ¨äº arr ä¸­</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">order</span> <span class="operator">=</span> Arrays.binarySearch(arr, b[i]);</span><br><span class="line">        <span class="comment">// ans[i] &gt;= 1 æ˜¯å› ä¸º BIT çš„ä¸‹æ ‡ 0 å¿…é¡»ç•™ç©ºã€‚å®é™…ä¸Šå¯ä»¥ä¸ç”¨åŠ  1</span></span><br><span class="line">        ans[i] = order + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸å»é‡ï¼ŒC++ ä½¿ç”¨ <code>std::lower_bound</code> ä»£æ›¿ <code>std::binary_search</code>ã€‚ä½†æ˜¯ Java ä¸­æ²¡æœ‰è¿™æ ·çš„å‡½æ•°ï¼Œå› æ­¤ä¸€å®šè¦å»é‡ã€‚</p>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.IntStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">BIT</span> &#123;</span><br><span class="line">        <span class="type">long</span>[] arr;</span><br><span class="line"></span><br><span class="line">        BIT(<span class="type">int</span> n) &#123;</span><br><span class="line">            arr = <span class="keyword">new</span> <span class="title class_">long</span>[n + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="title function_">lsb</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> i &amp; -i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">setMax</span><span class="params">(<span class="type">int</span> i, <span class="type">long</span> val)</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸‹æ ‡ i ä¼šå¯¹ä¹‹åæ‰€æœ‰åŒºé—´äº§ç”Ÿå½±å“ï¼Œå› æ­¤æ˜¯åŠ ä¸Š lsb</span></span><br><span class="line">            <span class="keyword">for</span> (; i &lt; arr.length; i += lsb(i)) &#123;</span><br><span class="line">                arr[i] = Math.max(arr[i], val);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="title function_">getMax</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line">            <span class="comment">// å‰ç¼€åŒºé—´ï¼Œå› æ­¤æ˜¯å‡å» lsb</span></span><br><span class="line">            <span class="keyword">for</span> (; i &gt; <span class="number">0</span>; i -= lsb(i)) &#123;</span><br><span class="line">                ans = Math.max(ans, arr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ans[i] è¡¨ç¤º b[i] åœ¨æ’åºåæ˜¯ç¬¬å‡ å°çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] discretize(<span class="type">int</span>[] b) &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = Arrays.stream(b).sorted().distinct().toArray();</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> b.length;</span><br><span class="line">        <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="comment">// b[i] ä¸€å®šå­˜åœ¨äº arr ä¸­</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">order</span> <span class="operator">=</span> Arrays.binarySearch(arr, b[i]);</span><br><span class="line">            <span class="comment">// ans[i] &gt;= 1 æ˜¯å› ä¸º BIT çš„ä¸‹æ ‡ 0 å¿…é¡»ç•™ç©ºã€‚å®é™…ä¸Šå¯ä»¥ä¸ç”¨åŠ  1</span></span><br><span class="line">            ans[i] = order + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">maxBalancedSubsequenceSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="comment">// b[i] = nums[i] - i</span></span><br><span class="line">        <span class="type">int</span>[] b = IntStream.range(<span class="number">0</span>, n).map(i -&gt; nums[i] - i).toArray();</span><br><span class="line">        <span class="comment">// ç¦»æ•£åŒ–</span></span><br><span class="line">        <span class="type">int</span>[] arr = discretize(b);</span><br><span class="line">        <span class="type">BIT</span> <span class="variable">tree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BIT</span>(n + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="comment">// b[j] æ˜¯ç¬¬ k å°çš„å…ƒç´ </span></span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> arr[j];</span><br><span class="line">            <span class="comment">// åŒºé—´æŸ¥è¯¢æœ€å¤§å€¼</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">dp_i</span> <span class="operator">=</span> Math.max(tree.getMax(k), <span class="number">0</span>);</span><br><span class="line">            <span class="comment">// å•ç‚¹æ›´æ–°</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">dp_j</span> <span class="operator">=</span> dp_i + nums[j];</span><br><span class="line">            tree.setMax(k, dp_j);</span><br><span class="line"></span><br><span class="line">            ans = Math.max(ans, dp_j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><ul>
<li><a href="https://leetcode.cn/problems/maximum-balanced-subsequence-sum/solutions/2513121/shu-zhuang-shu-zu-you-hua-dp-by-endlessc-3zf4/">æ ‘çŠ¶æ•°ç»„ä¼˜åŒ– DPï¼ˆPython&#x2F;Java&#x2F;C++&#x2F;Goï¼‰</a></li>
<li><a href="https://oi-wiki.org/misc/discrete/">ç¦»æ•£åŒ– - OI Wiki</a></li>
</ul>
]]></content>
      <categories>
        <category>ç®—æ³•é¢˜</category>
      </categories>
      <tags>
        <tag>åŠ¨æ€è§„åˆ’</tag>
        <tag>æ ‘çŠ¶æ•°ç»„</tag>
        <tag>ç¦»æ•£åŒ–</tag>
      </tags>
  </entry>
</search>
